---
layout: default
title: TechnicalReference_Asr_BswM
nav_order: 3
parent: Fiasa_326_327_EPS_TMS570
---
{% raw %}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
     "http://www.w3.org/TR/html4/transitional.dtd">
<html>
<head>

  <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  <title></title>
  <meta name="generator" content="LibreOffice 24.2.7.2 (Linux)"/>
  <meta name="created" content="00:00:00"/>
  <meta name="changed" content="00:00:00"/>
</head>
<body>
<h1></h1>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>MICROSAR BswM </b></p>
<p>Technical Reference </p>
<p> </p>
<p> </p>
<p>Version 1.6.0 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>Authors </p>
<p>Daniel Hof, Thomas Kuhl, Leticia Garcia Herrera </p>
<p>Status </p>
<p>Released </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>2 / 124 </p>
<p><b>Document Information </b></p>
<p><b>History </b></p>
<p><b>Author </b></p>
<p><b>Date </b></p>
<p><b>Version </b></p>
<p><b>Remarks </b></p>
<p>Daniel Hof </p>
<p>2011-01-14 </p>
<p>1.0 </p>
<p>Creation </p>
<p>Daniel Hof </p>
<p>2011-05-27 </p>
<p>1.1 </p>
<p>ESCAN00051215: Added description for </p>
<p>Nm_Fiat and some minor modifications </p>
<p>Daniel Hof </p>
<p>2011-08-03 </p>
<p>1.2 </p>
<p><b>&gt; </b></p>
<p>Added description of further Det </p>
<p>checks </p>
<p><b>&gt; </b></p>
<p>Added descriptions for automatic </p>
<p>configuration of recommended Use </p>
<p>Cases </p>
<p><b>&gt; </b></p>
<p>Added description of multiple </p>
<p>identities configuration </p>
<p><b>&gt; </b></p>
<p>Added Passive Mode description </p>
<p><b>&gt; </b></p>
<p>Added Partial Networks description </p>
<p>Thomas Kuhl </p>
<p>2011-11-03 </p>
<p>1.2.1 </p>
<p><b>&gt; </b></p>
<p>ESCAN00054154 </p>
<p>Thomas Kuhl </p>
<p>2011-12-06 </p>
<p>1.2.2 </p>
<p><b>&gt; </b></p>
<p>ESCAN00055325 </p>
<p>Thomas Kuhl </p>
<p>2012-01-10 </p>
<p>1.3.0 </p>
<p><b>&gt; </b></p>
<p>Add function description </p>
<p>BswM_Dcm_ApplicationUpdated </p>
<p><b>&gt; </b></p>
<p>Update Module Configuration </p>
<p>description for Dcm service </p>
<p>“Application Updated” </p>
<p>Thomas Kuhl </p>
<p>2012-05-07 </p>
<p>1.4.0 </p>
<p><b>&gt; </b></p>
<p>Update Template </p>
<p><b>&gt; </b></p>
<p>Add chapter 5.6.1.2 Require Ports  </p>
<p><b>&gt; </b></p>
<p>Add chapter 6.2.4 Timer </p>
<p>Configuration </p>
<p><b>&gt; </b></p>
<p>Extend chapter 6.2.5.2.2 Adding </p>
<p>Actions to an Action List with Timer </p>
<p>and Mode Notification Actions </p>
<p>Thomas Kuhl </p>
<p>2012-10-02 </p>
<p>1.5.0 </p>
<p><b>&gt; </b></p>
<p>Extend chapter 6.2.2 with LinSM </p>
<p>schedule end notification </p>
<p>Leticia Garcia </p>
<p>Herrera </p>
<p>2013-10-12 </p>
<p>1.6.0 </p>
<p><b>&gt; </b></p>
<p>Extension of chapter 6.2.4 and </p>
<p>modification of chapter 7.7. </p>
<p><b> </b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>3 / 124 </p>
<p><b>Reference Documents </b></p>
<p><b>No. </b></p>
<p><b>Source </b></p>
<p><b>Title </b></p>
<p><b>Version </b></p>
<p>[1] </p>
<p> AUTOSAR </p>
<p>AUTOSAR_SWS_BSWModeManager.pdf </p>
<p>(AUTOSAR Release 3.2) </p>
<p>1.0.0 </p>
<p>[2] </p>
<p> AUTOSAR </p>
<p>AUTOSAR_SWS_DET.pdf </p>
<p>2.2.1 </p>
<p>[3] </p>
<p> AUTOSAR </p>
<p>AUTOSAR_SWS_DEM.pdf </p>
<p>3.1.0 </p>
<p>[4] </p>
<p> AUTOSAR </p>
<p>AUTOSAR_BasicSoftwareModules.pdf </p>
<p>1.3.0 </p>
<p>[5] </p>
<p> Vector </p>
<p>TechnicalReference_Asr_LinSM.pdf </p>
<p>1.12.0 </p>
<p>[6] </p>
<p> Vector </p>
<p>TechnicalReference_ Asr_CanSM.pdf </p>
<p>1.15.0 </p>
<p>[7] </p>
<p> Vector </p>
<p>TechnicalReference_ Asr_FrSM.pdf </p>
<p>1.11.0 </p>
<p>[8] </p>
<p> Vector </p>
<p>TechnicalReference_ Asr_ComM.pdf </p>
<p>3.14.0 </p>
<p>[9] </p>
<p> Vector </p>
<p>TechnicalReference_ Asr_LinIf.pdf </p>
<p>2.7.6 </p>
<p>[10]  Vector </p>
<p>TechnicalReference_ Asr_PduR.pdf </p>
<p>3.10.0 </p>
<p>[11]  Vector </p>
<p>TechnicalReference_ Asr_Dcm_&lt;OEM&gt;.pdf </p>
<p>- </p>
<p>[12]  Vector </p>
<p>TechnicalReference_Asr_Nm.pdf </p>
<p>2.13.0 </p>
<p>[13]  Vector </p>
<p>TechnicalReference_Asr_Com.pdf </p>
<p>2.11.0 </p>
<p>[14]  Vector </p>
<p>TechnicalReference_Asr_NmFiatB.pdf </p>
<p>1.0.0 </p>
<p>[15]  Vector </p>
<p>TechnicalReference_Asr_NmFiatC.pdf </p>
<p>1.02.0 </p>
<p>Scope of the Document </p>
<p>This  technical  reference  describes  the  general  use  of  the  AUTOSAR  Basic  Software </p>
<p>module BSW Mode Manager (BswM).  </p>
<p> </p>
<p> </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>We have configured the programs in accordance with your specifications in the </p>
<p>questionnaire. Whereas the programs do support other configurations than the one </p>
<p>specified in your questionnaire, Vector´s release of the programs delivered to your </p>
<p>company is expressly restricted to the configuration you have specified in the </p>
<p>questionnaire. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>4 / 124 </p>
<p><b>Contents </b></p>
<p> </p>
<p><b>1</b></p>
<p> </p>
<p><b>Component History .................................................................................................... 11</b></p>
<p> </p>
<p><b>2</b></p>
<p> </p>
<p><b>Introduction................................................................................................................. 12</b></p>
<p> </p>
<p>2.1</p>
<p> </p>
<p>Architecture Overview ...................................................................................... 13</p>
<p> </p>
<p><b>3</b></p>
<p> </p>
<p><b>Functional Description ............................................................................................... 15</b></p>
<p> </p>
<p>3.1</p>
<p> </p>
<p>Features .......................................................................................................... 15</p>
<p> </p>
<p>3.2</p>
<p> </p>
<p>Initialization ...................................................................................................... 15</p>
<p> </p>
<p>3.3</p>
<p> </p>
<p>Mode Management .......................................................................................... 16</p>
<p> </p>
<p>3.3.1</p>
<p> </p>
<p>Immediate Mode Handling ............................................................... 16</p>
<p> </p>
<p>3.3.2</p>
<p> </p>
<p>Deferred Mode Handling .................................................................. 18</p>
<p> </p>
<p>3.4</p>
<p> </p>
<p>Execution of action lists.................................................................................... 20</p>
<p> </p>
<p>3.5</p>
<p> </p>
<p>States .............................................................................................................. 20</p>
<p> </p>
<p>3.6</p>
<p> </p>
<p>Error Handling .................................................................................................. 22</p>
<p> </p>
<p>3.6.1</p>
<p> </p>
<p>Development Error Reporting ........................................................... 22</p>
<p> </p>
<p>3.6.1.1</p>
<p> </p>
<p>Parameter Checking ...................................................... 24</p>
<p> </p>
<p>3.6.2</p>
<p> </p>
<p>Production Code Error Reporting ..................................................... 25</p>
<p> </p>
<p><b>4</b></p>
<p> </p>
<p><b>Integration ................................................................................................................... 26</b></p>
<p> </p>
<p>4.1</p>
<p> </p>
<p>Scope of Delivery ............................................................................................. 26</p>
<p> </p>
<p>4.1.1</p>
<p> </p>
<p>Static Files ....................................................................................... 26</p>
<p> </p>
<p>4.1.2</p>
<p> </p>
<p>Dynamic Files .................................................................................. 26</p>
<p> </p>
<p>4.2</p>
<p> </p>
<p>Include Structure .............................................................................................. 27</p>
<p> </p>
<p>4.3</p>
<p> </p>
<p>Critical Sections ............................................................................................... 27</p>
<p> </p>
<p>4.4</p>
<p> </p>
<p>Cyclic Task ....................................................................................................... 28</p>
<p> </p>
<p><b>5</b></p>
<p> </p>
<p><b>API Description ........................................................................................................... 29</b></p>
<p> </p>
<p>5.1</p>
<p> </p>
<p>Type Definitions ............................................................................................... 29</p>
<p> </p>
<p>5.2</p>
<p> </p>
<p>Services provided by BswM ............................................................................. 30</p>
<p> </p>
<p>5.2.1</p>
<p> </p>
<p>BswM_RequestMode ....................................................................... 30</p>
<p> </p>
<p>5.2.2</p>
<p> </p>
<p>BswM_Init ........................................................................................ 31</p>
<p> </p>
<p>5.2.3</p>
<p> </p>
<p>BswM_InitMemory ........................................................................... 32</p>
<p> </p>
<p>5.2.4</p>
<p> </p>
<p>BswM_Deinit .................................................................................... 32</p>
<p> </p>
<p>5.2.5</p>
<p> </p>
<p>BswM_GetVersionInfo ...................................................................... 33</p>
<p> </p>
<p>5.2.6</p>
<p> </p>
<p>BswM_ComM_CurrentMode ............................................................ 34</p>
<p> </p>
<p>5.2.7</p>
<p> </p>
<p>BswM_ComM_CurrentPNCMode ..................................................... 34</p>
<p> </p>
<p>5.2.8</p>
<p> </p>
<p>BswM_CanSM_CurrentState ........................................................... 36</p>
<p> </p>
<p>5.2.9</p>
<p> </p>
<p>BswM_FrSM_StateChangeNotification ............................................ 37</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>5 / 124 </p>
<p>5.2.10</p>
<p> </p>
<p>BswM_LinSM_CurrentState ............................................................. 38</p>
<p> </p>
<p>5.2.11</p>
<p> </p>
<p>BswM_LinSM_CurrentSchedule....................................................... 39</p>
<p> </p>
<p>5.2.12</p>
<p> </p>
<p>BswM_LinSM_ScheduleEnd_Notification ......................................... 40</p>
<p> </p>
<p>5.2.13</p>
<p> </p>
<p>BswM_LinTp_RequestMode ............................................................ 41</p>
<p> </p>
<p>5.2.14</p>
<p> </p>
<p>BswM_Nm_StateChangeNotification ............................................... 42</p>
<p> </p>
<p>5.2.15</p>
<p> </p>
<p>BswM_Dcm_RequestCommunicationMode ..................................... 43</p>
<p> </p>
<p>5.2.16</p>
<p> </p>
<p>BswM_Dcm_RequestResetMode..................................................... 44</p>
<p> </p>
<p>5.2.17</p>
<p> </p>
<p>BswM_Dcm_SetPassiveMode ......................................................... 45</p>
<p> </p>
<p>5.2.18</p>
<p> </p>
<p>BswM_Dcm_ApplicationUpdated ..................................................... 45</p>
<p> </p>
<p>5.3</p>
<p> </p>
<p>Services used by BswM ................................................................................... 46</p>
<p> </p>
<p>5.4</p>
<p> </p>
<p>Callback Functions ........................................................................................... 46</p>
<p> </p>
<p>5.4.1</p>
<p> </p>
<p>Appl_BswM_ApplicationUpdated ..................................................... 46</p>
<p> </p>
<p>5.5</p>
<p> </p>
<p>Configurable Interfaces .................................................................................... 47</p>
<p> </p>
<p>5.5.1</p>
<p> </p>
<p>Callout Functions ............................................................................. 47</p>
<p> </p>
<p>5.5.2</p>
<p> </p>
<p>Mode Trigger Functions ................................................................... 47</p>
<p> </p>
<p>5.5.3</p>
<p> </p>
<p>User Condition Functions ................................................................. 48</p>
<p> </p>
<p>5.6</p>
<p> </p>
<p>Service Ports ................................................................................................... 49</p>
<p> </p>
<p>5.6.1</p>
<p> </p>
<p>Client Server Interface ..................................................................... 49</p>
<p> </p>
<p>5.6.1.1</p>
<p> </p>
<p>Provide Ports on BswM Side .......................................... 49</p>
<p> </p>
<p>5.6.1.1.1</p>
<p>BswM_ModeIndication_&lt;GenericModeName&gt; </p>
<p>49</p>
<p> </p>
<p>5.6.1.1.2</p>
<p> </p>
<p>BswM_DcmAppUpdate .............................. 49</p>
<p> </p>
<p>5.6.1.2</p>
<p> </p>
<p>Require Ports ................................................................. 49</p>
<p> </p>
<p>5.6.1.2.1</p>
<p> </p>
<p>Mode Switch Port ....................................... 49</p>
<p> </p>
<p><b>6</b></p>
<p> </p>
<p><b>Configuration .............................................................................................................. 50</b></p>
<p> </p>
<p>6.1</p>
<p> </p>
<p>Configuration Variants ...................................................................................... 50</p>
<p> </p>
<p>6.2</p>
<p> </p>
<p>Configuration with GENy .................................................................................. 50</p>
<p> </p>
<p>6.2.1</p>
<p> </p>
<p>General Configuration Options ......................................................... 50</p>
<p> </p>
<p>6.2.2</p>
<p> </p>
<p>BSW Mode Configuration ................................................................. 52</p>
<p> </p>
<p>6.2.3</p>
<p> </p>
<p>Generic Mode Configuration ............................................................ 55</p>
<p> </p>
<p>6.2.4</p>
<p> </p>
<p>Timer Configuration .......................................................................... 56</p>
<p> </p>
<p>6.2.5</p>
<p> </p>
<p>Rule Configuration ........................................................................... 58</p>
<p> </p>
<p>6.2.5.1</p>
<p> </p>
<p>Configuration of Rule Conditions.................................... 59</p>
<p> </p>
<p>6.2.5.2</p>
<p> </p>
<p>Configuration of Rule Action Lists .................................. 63</p>
<p> </p>
<p>6.2.5.2.1</p>
<p> </p>
<p>Action List Execution Type ......................... 64</p>
<p> </p>
<p>6.2.5.2.2</p>
<p> </p>
<p>Adding Actions to an Action List ................. 65</p>
<p> </p>
<p>6.2.5.3</p>
<p> </p>
<p>Configuration of the Identity Assignment ........................ 73</p>
<p> </p>
<p><b>7</b></p>
<p> </p>
<p><b>Use Cases of BSWM ................................................................................................... 75</b></p>
<p> </p>
<p>7.1</p>
<p> </p>
<p>CAN Communication Modes ............................................................................ 75</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>6 / 124 </p>
<p>7.1.1</p>
<p> </p>
<p>Rule Switch_Tx_DM ......................................................................... 80</p>
<p> </p>
<p>7.1.2</p>
<p> </p>
<p>Rule Switch_Rx ................................................................................ 82</p>
<p> </p>
<p>7.2</p>
<p> </p>
<p>Dcm Communication Control Modes ................................................................ 83</p>
<p> </p>
<p>7.3</p>
<p> </p>
<p>Dcm Reset Modes ........................................................................................... 84</p>
<p> </p>
<p>7.4</p>
<p> </p>
<p>LIN Communication Modes .............................................................................. 84</p>
<p> </p>
<p>7.4.1</p>
<p> </p>
<p>Generic Mode for clamp 15 .............................................................. 85</p>
<p> </p>
<p>7.4.2</p>
<p> </p>
<p>Rule clamp 15 on ............................................................................. 87</p>
<p> </p>
<p>7.4.3</p>
<p> </p>
<p>Rule clamp 15 off ............................................................................. 88</p>
<p> </p>
<p>7.5</p>
<p> </p>
<p>LIN TP Modes .................................................................................................. 88</p>
<p> </p>
<p>7.5.1</p>
<p> </p>
<p>Generic Mode Configuration ............................................................ 91</p>
<p> </p>
<p>7.5.2</p>
<p> </p>
<p>Rule Configuration ........................................................................... 92</p>
<p> </p>
<p>7.5.2.1</p>
<p> </p>
<p>Rule for application schedule ......................................... 92</p>
<p> </p>
<p>7.5.2.2</p>
<p> </p>
<p>Rule for switching the LIN Diagnostic Mode ................... 93</p>
<p> </p>
<p>7.5.2.3</p>
<p> </p>
<p>Rule for master request in LIN_STANDARD Mode ........ 94</p>
<p> </p>
<p>7.5.2.4</p>
<p> </p>
<p>Rule for slave response in LIN_STANDARD Mode ........ 96</p>
<p> </p>
<p>7.5.2.5</p>
<p> </p>
<p>Rule for master request in LIN_FLASH Mode ................ 97</p>
<p> </p>
<p>7.5.2.6</p>
<p> </p>
<p>Rule for slave response in LIN_FLASH Mode ................ 98</p>
<p> </p>
<p>7.5.3</p>
<p> </p>
<p>User Callouts ................................................................................... 99</p>
<p> </p>
<p>7.6</p>
<p> </p>
<p>FlexRay Communication Modes .................................................................... 100</p>
<p> </p>
<p>7.6.1</p>
<p> </p>
<p>Rule Switch_Rx_Tx_DM_FlexRay ................................................. 100</p>
<p> </p>
<p>7.6.2</p>
<p> </p>
<p>Rule Switch_Tx_FlexRay ............................................................... 102</p>
<p> </p>
<p>7.6.3</p>
<p> </p>
<p>Rule Switch_Rx_DM_FlexRay ....................................................... 103</p>
<p> </p>
<p>7.7</p>
<p> </p>
<p>NmFiatB and NmFiatC Communication Modes .............................................. 105</p>
<p> </p>
<p>7.7.1</p>
<p> </p>
<p>Rule Switch_Tx_DM ....................................................................... 106</p>
<p> </p>
<p>7.7.2</p>
<p> </p>
<p>Rule Switch_Rx .............................................................................. 109</p>
<p> </p>
<p>7.7.3</p>
<p> </p>
<p>Rule Switch_Tx_DM with communication control ............................ 111</p>
<p> </p>
<p>7.7.4</p>
<p> </p>
<p>Rule Switch_Rx with communication control .................................. 114</p>
<p> </p>
<p>7.8</p>
<p> </p>
<p>Partial Network Cluster Modes ....................................................................... 117</p>
<p> </p>
<p>7.8.1</p>
<p> </p>
<p>Rule Switch_On_PNC .................................................................... 119</p>
<p> </p>
<p>7.8.2</p>
<p> </p>
<p>Rule Switch_Off_PNC .................................................................... 120</p>
<p> </p>
<p>7.8.3</p>
<p> </p>
<p>Extension for communication start ................................................. 121</p>
<p> </p>
<p><b>8</b></p>
<p> </p>
<p><b>AUTOSAR Standard Compliance............................................................................. 122</b></p>
<p> </p>
<p>8.1</p>
<p> </p>
<p>Deviations ...................................................................................................... 122</p>
<p> </p>
<p>8.2</p>
<p> </p>
<p>Additions/ Extensions ..................................................................................... 122</p>
<p> </p>
<p>8.3</p>
<p> </p>
<p>Limitations...................................................................................................... 122</p>
<p> </p>
<p>8.3.1</p>
<p> </p>
<p>Mode arbitration and mode control ................................................. 122</p>
<p> </p>
<p>8.3.2</p>
<p> </p>
<p>BSW modes ................................................................................... 122</p>
<p> </p>
<p><b>9</b></p>
<p> </p>
<p><b>Glossary and Abbreviations .................................................................................... 123</b></p>
<p> </p>
<p>9.1</p>
<p> </p>
<p>Glossary ........................................................................................................ 123</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>7 / 124 </p>
<p>9.2</p>
<p> </p>
<p>Abbreviations ................................................................................................. 123</p>
<p> </p>
<p><b>10</b></p>
<p> </p>
<p><b>Contact ...................................................................................................................... 124</b></p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>8 / 124 </p>
<p>Illustrations </p>
<p>Figure 2-1</p>
<p> </p>
<p>AUTOSAR architecture ............................................................................. 13</p>
<p> </p>
<p>Figure 2-2</p>
<p> </p>
<p>Interfaces to adjacent modules of the BswM ............................................. 13</p>
<p> </p>
<p>Figure 3-1</p>
<p> </p>
<p>Sequence Immediate Mode ...................................................................... 17</p>
<p> </p>
<p>Figure 3-2</p>
<p> </p>
<p>Sequence Deferred Mode ......................................................................... 19</p>
<p> </p>
<p>Figure 3-3</p>
<p> </p>
<p>States of the BswM ................................................................................... 21</p>
<p> </p>
<p>Figure 4-1</p>
<p> </p>
<p>Include structure ....................................................................................... 27</p>
<p> </p>
<p>Figure 6-1</p>
<p> </p>
<p>GENy Component Selection: enable BswM .............................................. 50</p>
<p> </p>
<p>Figure 6-2</p>
<p> </p>
<p>General Configuration Options ................................................................. 50</p>
<p> </p>
<p>Figure 6-3</p>
<p> </p>
<p>Example view of BSW Modes and their Mode Request Processing Type . 52</p>
<p> </p>
<p>Figure 6-4</p>
<p> </p>
<p>Addition of a Generic Mode ...................................................................... 55</p>
<p> </p>
<p>Figure 6-5</p>
<p> </p>
<p>Generic Mode Configuration Parameter .................................................... 55</p>
<p> </p>
<p>Figure 6-6 </p>
<p> </p>
<p> Adding a Timer to the configuration of the BswM ..................................... 56</p>
<p> </p>
<p>Figure 6-7 </p>
<p> </p>
<p>Configuration of a Timer ........................................................................... 57</p>
<p> </p>
<p>Figure 6-8</p>
<p> </p>
<p>Adding a rule to the BswM configuration ................................................... 58</p>
<p> </p>
<p>Figure 6-9</p>
<p> </p>
<p>Rule Naming and initial state .................................................................... 59</p>
<p> </p>
<p>Figure 6-10</p>
<p> </p>
<p>Adding a condition to a rule ...................................................................... 59</p>
<p> </p>
<p>Figure 6-11</p>
<p> </p>
<p>Configuration view of a rule condition ....................................................... 60</p>
<p> </p>
<p>Figure 6-12</p>
<p> </p>
<p>Adding a User Condition ........................................................................... 61</p>
<p> </p>
<p>Figure 6-13</p>
<p> </p>
<p>Configuration view of a user condition ...................................................... 61</p>
<p> </p>
<p>Figure 6-14</p>
<p> </p>
<p>Configuration of the Operator of multiple conditions.................................. 62</p>
<p> </p>
<p>Figure 6-15</p>
<p> </p>
<p>Adding Action Lists to a Rule .................................................................... 63</p>
<p> </p>
<p>Figure 6-16</p>
<p> </p>
<p>Action List Execution Type ........................................................................ 64</p>
<p> </p>
<p>Figure 6-17</p>
<p> </p>
<p>Adding Actions to an Action List ................................................................ 65</p>
<p> </p>
<p>Figure 6-18</p>
<p> </p>
<p>Action Pdu Router Control ........................................................................ 66</p>
<p> </p>
<p>Figure 6-19</p>
<p> </p>
<p>Action Nm Communication Control ........................................................... 67</p>
<p> </p>
<p>Figure 6-20</p>
<p> </p>
<p>Action Pdu Group Switch .......................................................................... 68</p>
<p> </p>
<p>Figure 6-21</p>
<p> </p>
<p>Action Deadline Monitoring ....................................................................... 69</p>
<p> </p>
<p>Figure 6-22</p>
<p> </p>
<p>Action Schedule Table Switch ................................................................... 70</p>
<p> </p>
<p>Figure 6-23</p>
<p> </p>
<p>Action User Callout ................................................................................... 71</p>
<p> </p>
<p>Figure 6-24</p>
<p> </p>
<p>Action Rule ............................................................................................... 72</p>
<p> </p>
<p>Figure 6-25</p>
<p> </p>
<p>Action Timer Control ................................................................................. 72</p>
<p> </p>
<p>Figure 6-26</p>
<p> </p>
<p>Action Mode Notification ........................................................................... 73</p>
<p> </p>
<p>Figure 6-27</p>
<p> </p>
<p>Configuration of the Identity Assignment ................................................... 73</p>
<p> </p>
<p>Figure 7-1</p>
<p> </p>
<p>CanSM communication modes ................................................................. 76</p>
<p> </p>
<p>Figure 7-2</p>
<p> </p>
<p>Example mode request processing type “BSWM_IMMEDIATE” ................ 77</p>
<p> </p>
<p>Figure 7-3</p>
<p> </p>
<p>Example rule initial state ........................................................................... 77</p>
<p> </p>
<p>Figure 7-4</p>
<p> </p>
<p>Example rule conditions for Tx and DM .................................................... 77</p>
<p> </p>
<p>Figure 7-5</p>
<p> </p>
<p>Example rule conditions for Rx ................................................................. 78</p>
<p> </p>
<p>Figure 7-6</p>
<p> </p>
<p>Example Action List Execution Type ......................................................... 78</p>
<p> </p>
<p>Figure 7-7</p>
<p> </p>
<p>Action List True for rule Switch_Rx ........................................................... 79</p>
<p> </p>
<p>Figure 7-8</p>
<p> </p>
<p>Action List False for rule “Switch_Rx” ....................................................... 79</p>
<p> </p>
<p>Figure 7-9</p>
<p> </p>
<p>Action List True for rule “Switch_Tx_DM” .................................................. 79</p>
<p> </p>
<p>Figure 7-10</p>
<p> </p>
<p>Action List False for rule “Switch_Tx_DM” ................................................ 80</p>
<p> </p>
<p>Figure 7-11</p>
<p> </p>
<p>LIN communication states......................................................................... 85</p>
<p> </p>
<p>Figure 7-12</p>
<p> </p>
<p>LinTp Modes ............................................................................................. 89</p>
<p> </p>
<p>Figure 7-13</p>
<p> </p>
<p>FlexRay States ....................................................................................... 100</p>
<p> </p>
<p>Figure 7-14</p>
<p> </p>
<p>Screenshot FlexRay example rule .......................................................... 102</p>
<p> </p>
<p>Figure 7-15</p>
<p> </p>
<p>NmFiatB and NmFiatC state transitions .................................................. 105</p>
<p> </p>
<p>Figure 7-16 </p>
<p> </p>
<p>Screenshot example rule for Tx communication with NmFiatB and </p>
<p>NmFiatC ................................................................................................. 109</p>
<p> </p>
<p>Figure 7-17</p>
<p> </p>
<p>Screenshot example rule for Rx communication with NmFiatB and </p>
<p>NmFiatC ................................................................................................. 110</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>9 / 124 </p>
<p>Figure 7-18</p>
<p> </p>
<p>ComM PNC Modes ................................................................................. 117</p>
<p> </p>
<p><b> </b></p>
<p><b>Tables </b></p>
<p>Table 1-1 </p>
<p> </p>
<p>Component history.................................................................................... 11</p>
<p> </p>
<p>Table 3-1 </p>
<p> </p>
<p>Supported AUTOSAR standard conform features ..................................... 15</p>
<p> </p>
<p>Table 3-2 </p>
<p> </p>
<p>Not supported AUTOSAR standard conform features ............................... 15</p>
<p> </p>
<p>Table 3-3 </p>
<p> </p>
<p>Features provided beyond the AUTOSAR standard .................................. 15</p>
<p> </p>
<p>Table 3-4 </p>
<p> </p>
<p>Service IDs ............................................................................................... 23</p>
<p> </p>
<p>Table 3-5 </p>
<p> </p>
<p>Errors reported to DET ............................................................................. 23</p>
<p> </p>
<p>Table 3-6 </p>
<p> </p>
<p>Development Error Reporting: Assignment of checks to services ............. 24</p>
<p> </p>
<p>Table 4-1 </p>
<p> </p>
<p>Static files ................................................................................................. 26</p>
<p> </p>
<p>Table 4-2 </p>
<p> </p>
<p>Generated files ......................................................................................... 26</p>
<p> </p>
<p>Table 5-1 </p>
<p> </p>
<p>Type definitions ......................................................................................... 29</p>
<p> </p>
<p>Table 5-2 </p>
<p> </p>
<p>BswM_RequestMode ................................................................................ 30</p>
<p> </p>
<p>Table 5-3 </p>
<p> </p>
<p>BswM_Init ................................................................................................. 31</p>
<p> </p>
<p>Table 5-4 </p>
<p> </p>
<p>BswM_InitMemory .................................................................................... 32</p>
<p> </p>
<p>Table 5-5 </p>
<p> </p>
<p>BswM_Deinit............................................................................................. 32</p>
<p> </p>
<p>Table 5-6 </p>
<p> </p>
<p>BswM_GetVersionInfo .............................................................................. 33</p>
<p> </p>
<p>Table 5-7 </p>
<p> </p>
<p>BswM_ComM_CurrentMode ..................................................................... 34</p>
<p> </p>
<p>Table 5-8 </p>
<p> </p>
<p>BswM_ComM_CurrentPNCMode ............................................................. 35</p>
<p> </p>
<p>Table 5-9 </p>
<p> </p>
<p>BswM_CanSM_CurrentState .................................................................... 36</p>
<p> </p>
<p>Table 5-10 </p>
<p> </p>
<p>BswM_FrSM_StateChangeNotification ..................................................... 37</p>
<p> </p>
<p>Table 5-11 </p>
<p> </p>
<p>BswM_LinSM_CurrentState ...................................................................... 38</p>
<p> </p>
<p>Table 5-12 </p>
<p> </p>
<p>BswM_LinSM_CurrentSchedule ............................................................... 39</p>
<p> </p>
<p>Table 5-13 </p>
<p> </p>
<p>BswM_LinSM_ScheduleEnd_Notification ................................................. 40</p>
<p> </p>
<p>Table 5-14 </p>
<p> </p>
<p>BswM_LinTp_RequestMode ..................................................................... 41</p>
<p> </p>
<p>Table 5-15 </p>
<p> </p>
<p>BswM_Nm_StateChangeNotification ........................................................ 42</p>
<p> </p>
<p>Table 5-16 </p>
<p> </p>
<p>BswM_Dcm_RequestCommunicationMode .............................................. 43</p>
<p> </p>
<p>Table 5-17 </p>
<p> </p>
<p>BswM_Dcm_RequestCommunicationMode .............................................. 44</p>
<p> </p>
<p>Table 5-18 </p>
<p> </p>
<p>BswM_Dcm_RequestCommunicationMode .............................................. 45</p>
<p> </p>
<p>Table 5-19 </p>
<p> </p>
<p>BswM_Dcm_ApplicationUpdated .............................................................. 46</p>
<p> </p>
<p>Table 5-20 </p>
<p> </p>
<p>Services used by the BswM ...................................................................... 46</p>
<p> </p>
<p>Table 5-21 </p>
<p> </p>
<p>Appl_BswM_ApplicationUpdated .............................................................. 47</p>
<p> </p>
<p>Table 5-22 </p>
<p> </p>
<p>User Callout .............................................................................................. 47</p>
<p> </p>
<p>Table 5-23 </p>
<p> </p>
<p>Mode Trigger Function Prototype .............................................................. 48</p>
<p> </p>
<p>Table 5-24 </p>
<p> </p>
<p>User Condition .......................................................................................... 48</p>
<p> </p>
<p>Table 5-25 </p>
<p> </p>
<p>Provide Port .............................................................................................. 49</p>
<p> </p>
<p>Table 5-26 </p>
<p> </p>
<p>BswM_DcmAppUpdate ............................................................................. 49</p>
<p> </p>
<p>Table 5-27 </p>
<p> </p>
<p>Mode Switch Port ..................................................................................... 49</p>
<p> </p>
<p>Table 6-1 </p>
<p> </p>
<p>General Configuration Options ................................................................. 52</p>
<p> </p>
<p>Table 6-2 </p>
<p> </p>
<p>Overview BSW Mode Indications .............................................................. 54</p>
<p> </p>
<p>Table 6-3 </p>
<p> </p>
<p>Configuration parameter for BSW Modes ................................................. 55</p>
<p> </p>
<p>Table 6-4 </p>
<p> </p>
<p>Generic Mode general configuration parameter ........................................ 56</p>
<p> </p>
<p>Table 6-5 </p>
<p> </p>
<p>General Rule Configuration Options ......................................................... 59</p>
<p> </p>
<p>Table 6-6 </p>
<p> </p>
<p>Condition Configuration Parameter ........................................................... 60</p>
<p> </p>
<p>Table 6-7 </p>
<p> </p>
<p>User Condition Configuration Parameter .................................................. 61</p>
<p> </p>
<p>Table 6-8 </p>
<p> </p>
<p>Condition Operation Parameter ................................................................ 62</p>
<p> </p>
<p>Table 6-9 </p>
<p> </p>
<p>Action List Execution Type Configuration Parameter ................................ 64</p>
<p> </p>
<p>Table 6-10 </p>
<p> </p>
<p>Action Pdu Router Control Configuration Parameter ................................. 66</p>
<p> </p>
<p>Table 6-11 </p>
<p> </p>
<p>Action Nm Communication Control Configuration Parameter .................... 67</p>
<p> </p>
<p>Table 6-12 </p>
<p> </p>
<p>Action Pdu Group Switch Configuration Parameter .................................. 68</p>
<p> </p>
<p>Table 6-13 </p>
<p> </p>
<p>Action Deadline Monitoring Configuration Parameter ................................ 69</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>10 / 124 </p>
<p>Table 6-14 </p>
<p> </p>
<p>Action Schedule Table Switch Configuration Parameter............................ 70</p>
<p> </p>
<p>Table 6-15 </p>
<p> </p>
<p>Action Schedule Table Switch Configuration Parameter............................ 71</p>
<p> </p>
<p>Table 6-16 </p>
<p> </p>
<p>Action Schedule Table Switch Configuration Parameter............................ 72</p>
<p> </p>
<p>Table 6-17 </p>
<p> </p>
<p>Action Timer Control Configuration Parameter .......................................... 72</p>
<p> </p>
<p>Table 6-18 </p>
<p> </p>
<p>Action Mode Notification Configuration Parameter .................................... 73</p>
<p> </p>
<p>Table 6-19 </p>
<p> </p>
<p>Example Identity-Channel Assignment...................................................... 74</p>
<p> </p>
<p>Table 7-1 </p>
<p> </p>
<p>Configuration of rule for starting and stopping Tx and DM for CAN with </p>
<p>Dcm Com Control ..................................................................................... 81</p>
<p> </p>
<p>Table 7-2 </p>
<p> </p>
<p>Configuration of rule for starting and stopping Rx and DM for FlexRay </p>
<p>with Dcm Com Control .............................................................................. 83</p>
<p> </p>
<p>Table 7-3 </p>
<p> </p>
<p>Recommended communication control modes ......................................... 84</p>
<p> </p>
<p>Table 7-4 </p>
<p> </p>
<p>Recommended configuration for Generic Mode clamp 15......................... 86</p>
<p> </p>
<p>Table 7-5 </p>
<p> </p>
<p>Configuration of example rule clamp 15 on ............................................... 87</p>
<p> </p>
<p>Table 7-6 </p>
<p> </p>
<p>Configuration of example rule clamp 15 off ............................................... 88</p>
<p> </p>
<p>Table 7-7 </p>
<p> </p>
<p>Recommended configuration for Generic LIN Mode ................................. 91</p>
<p> </p>
<p>Table 7-8 </p>
<p> </p>
<p>Configuration of rule for application schedule ........................................... 92</p>
<p> </p>
<p>Table 7-9 </p>
<p> </p>
<p>Configuration of rule for switching the LIN Diagnostic Mode ..................... 94</p>
<p> </p>
<p>Table 7-10 </p>
<p> </p>
<p>Configuration of rule for switching the master request schedule in </p>
<p>standard mode .......................................................................................... 95</p>
<p> </p>
<p>Table 7-11 </p>
<p> </p>
<p>Configuration of rule for switching the slave response schedule in </p>
<p>standard mode .......................................................................................... 96</p>
<p> </p>
<p>Table 7-12 </p>
<p> </p>
<p>Configuration of rule for switching the master request schedule in flash </p>
<p>mode ........................................................................................................ 97</p>
<p> </p>
<p>Table 7-13 </p>
<p> </p>
<p>Configuration of rule for switching the slave response schedule in </p>
<p>standard mode .......................................................................................... 98</p>
<p> </p>
<p>Table 7-14 </p>
<p> </p>
<p>Configuration of rule for starting and stopping the communication for </p>
<p>FlexRay .................................................................................................. 101</p>
<p> </p>
<p>Table 7-15 </p>
<p> </p>
<p>Configuration of rule for starting and stopping Tx for FlexRay with Dcm </p>
<p>Com Control ........................................................................................... 103</p>
<p> </p>
<p>Table 7-16 </p>
<p> </p>
<p>Configuration of rule for starting and stopping Rx and DM for FlexRay </p>
<p>with Dcm Com Control ............................................................................ 105</p>
<p> </p>
<p>Table 7-17 </p>
<p> </p>
<p>Configuration of rule for starting and stopping the Tx communication for </p>
<p>NmFiat B ................................................................................................ 107</p>
<p> </p>
<p>Table 7-18 </p>
<p> </p>
<p>Configuration of rule for starting and stopping the Tx communication for </p>
<p>NmFiat C ................................................................................................ 108</p>
<p> </p>
<p>Table 7-19 </p>
<p> </p>
<p>Configuration of rule for starting and stopping the Rx communication for </p>
<p>NmFiatB and NmFiatC ............................................................................ 109</p>
<p> </p>
<p>Table 7-20 </p>
<p> </p>
<p>Configuration of rule for starting and stopping Tx for NmFiatB with Dcm </p>
<p>Com Control ........................................................................................... 112</p>
<p> </p>
<p>Table 7-21 </p>
<p> </p>
<p>Configuration of rule for starting and stopping Tx for NmFiatC with Dcm </p>
<p>Com Control ........................................................................................... 114</p>
<p> </p>
<p>Table 7-22 </p>
<p> </p>
<p>Configuration of rule for starting and stopping Rx for NmFiatB and </p>
<p>NmFiatC with Dcm Com Control ............................................................. 116</p>
<p> </p>
<p>Table 7-23 </p>
<p> </p>
<p>Rule Switch_On_PNC ............................................................................ 119</p>
<p> </p>
<p>Table 7-24 </p>
<p> </p>
<p>Rule Switch_Off_PNC ............................................................................ 120</p>
<p> </p>
<p>Table 7-25 </p>
<p> </p>
<p>Extension of Rule StdRule_Switch_DM .................................................. 121</p>
<p> </p>
<p>Table 9-1 </p>
<p> </p>
<p>Glossary ................................................................................................. 123</p>
<p> </p>
<p>Table 9-2 </p>
<p> </p>
<p>Abbreviations .......................................................................................... 123</p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>11 / 124 </p>
<p><b>1 </b></p>
<p><b>Component History </b></p>
<p>The </p>
<p>component </p>
<p>history </p>
<p>gives </p>
<p>an </p>
<p>overview </p>
<p>over </p>
<p>the </p>
<p>important </p>
<p>milestones </p>
<p>that </p>
<p>are </p>
<p>supported in the different versions of the component.  </p>
<p><b>Component Version </b></p>
<p><b>New Features </b></p>
<p>1.0 </p>
<p>Initial version  </p>
<p>1.1 </p>
<p>Added support of NmFiatB  </p>
<p>1.2 </p>
<p><b>&gt; </b></p>
<p>Added automatic recommended configuration </p>
<p><b>&gt; </b></p>
<p>References to other Rules can be used as an Action within an </p>
<p>Action List </p>
<p><b>&gt; </b></p>
<p>Action List Execution can be aborted if an Action fails </p>
<p><b>&gt; </b></p>
<p>Added Dcm Passive Mode </p>
<p><b>&gt; </b></p>
<p>Added support of multiple identities configurations </p>
<p><b>&gt; </b></p>
<p>Added Mode LINSM_CURRENT_SCHEDULE </p>
<p><b>&gt; </b></p>
<p>Added ComM Partial Network support </p>
<p>1.3 </p>
<p><b>&gt; </b></p>
<p>Add BswM_Dcm_ApplicationUpdated functionality </p>
<p>1.4 </p>
<p><b>&gt; </b></p>
<p>Add Timer handling </p>
<p>1.5 </p>
<p><b>&gt; </b></p>
<p>Remove DCM_RESET_EXECUTION from the </p>
<p>Dcm_ResetModeType </p>
<p>1.6 </p>
<p><b>&gt; </b></p>
<p>Version not used </p>
<p>1.7 </p>
<p><b>&gt; </b></p>
<p>Add Support for LinSM schedule end notification </p>
<p><b>&gt; </b></p>
<p>Adapt LinTp_Modes to AUTOSAR specification </p>
<p>1.8 </p>
<p><b>&gt; </b></p>
<p>BswMNmClassCModeRequest supported as mode request </p>
<p>1.9 </p>
<p><b>&gt; </b></p>
<p>Implement AMD time measurement support </p>
<p>1.10 </p>
<p><b>&gt; </b></p>
<p>Support mode notifications from NMOsek </p>
<p>Table 1-1  </p>
<p>Component history </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>12 / 124 </p>
<p><b>2 </b></p>
<p><b>Introduction </b></p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Cross reference</b>  </p>
<p>The mandatory BSWM use cases and how to configure them are described in chapter </p>
<p>7. Chapter 7 is also helpful to get a basic understanding on what the BswM is doing. </p>
<p><b> </b></p>
<p><b> </b></p>
<p>This document describes the functionality, API and configuration of the AUTOSAR BSW </p>
<p>module BswM as specified in [1].  </p>
<p> </p>
<p><b>Supported AUTOSAR Release*: </b></p>
<p>3 </p>
<p><b>Supported Configuration Variants: </b></p>
<p>pre-compile, link-time, post-build </p>
<p><b>Vendor ID: </b></p>
<p>BswM_VENDOR_ID </p>
<p>30 decimal </p>
<p>(= Vector-Informatik, </p>
<p>according to HIS) </p>
<p><b>Module ID: </b></p>
<p>BswM_MODULE_ID   </p>
<p>042 decimal </p>
<p>(according to ref. [4]) </p>
<p>* For the precise AUTOSAR Release 3.x please see the release specific documentation.  </p>
<p> </p>
<p> </p>
<p>The  BSW  Mode  Manager  is  the  module  that  implements  the  part  of  the  Vehicle  Mode </p>
<p>Management and Application Mode Management concept that resides in the BSW. Its task </p>
<p>is  to  arbitrate  mode  requests  from  BSW  modules  or  application  layer  SWCs  based  on </p>
<p>simple rules, and perform actions based on the arbitration result.    </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>13 / 124 </p>
<p><b>2.1 </b></p>
<p><b>Architecture Overview </b></p>
<p>The following figure shows where the BswM is located in the AUTOSAR architecture. </p>
<p> </p>
<p>Figure 2-1 </p>
<p>AUTOSAR architecture </p>
<p>The next figure shows the interfaces to adjacent modules of the BswM. These interfaces </p>
<p>are described in chapter 5.  </p>
<p> </p>
<p> </p>
<p>Figure 2-2 </p>
<p>Interfaces to adjacent modules of the BswM </p>
<p><b> cmp BswM</b></p>
<p><b>BswM</b></p>
<p><b>ComM</b></p>
<p><b>LinSM</b></p>
<p><b>LinTp</b></p>
<p><b>Com</b></p>
<p><b>Dcm</b></p>
<p><b>Det</b></p>
<p><b>PduR</b></p>
<p><b>CanSM</b></p>
<p><b>FrSM</b></p>
<p><b>NM</b></p>
<p><b>Bsw M_LinTp_RequestMode</b></p>
<p><b>LinSM_ScheduleRequest</b></p>
<p><b>BswM_ComM_CurrentMode</b></p>
<p><b>BswM_Dcm_RequestCommunicationMode</b></p>
<p><b>Bsw M_FrSM_StateChangeNotification</b></p>
<p><b>Bsw M_LinSM_CurrentState</b></p>
<p><b>Bsw M_LinSM_CurrentSchedule</b></p>
<p><b>Bsw M_CanSM_CurrentState</b></p>
<p><b>BswM_RequestResetMode</b></p>
<p><b>SchM</b></p>
<p><b>Bsw M_Init</b></p>
<p><b>Bsw M_MainFunction</b></p>
<p><b>Nm_EnableCommunication</b></p>
<p><b>Nm_DisableCommunication</b></p>
<p><b>Com_IpduGroupStart</b></p>
<p><b>Com_IpduGroupStop</b></p>
<p><b>Com_EnableReceptionDM</b></p>
<p><b>Com_DisableReceptionDM</b></p>
<p><b>Det_ReportError</b></p>
<p><b>PduR_Enable/DisableRouting</b></p>
<p><b>Rte</b></p>
<p><b>Generic Mode Trigger Function Port</b></p>
<p><b>Enter/Leav e Exclusiv e Area</b></p>
<p><b>Bsw M_Dcm_ApplicationUpdated</b></p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<p>«use»</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>14 / 124 </p>
<p>If  a  RTE  is  used  applications  do  not  access  the  services  of  the  BSW  modules  directly. </p>
<p>They use the service ports provided by the BSW modules via the RTE. The service ports </p>
<p>provided by the BswM are listed in chapter 5.6 and are defined in [1]. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>15 / 124 </p>
<p><b>3 </b></p>
<p><b>Functional Description </b></p>
<p>This chapter describes the general function of the BswM. </p>
<p><b>3.1 </b></p>
<p><b>Features </b></p>
<p>The features listed in the following tables cover the complete functionality specified for the </p>
<p>BswM. </p>
<p>The AUTOSAR  standard  functionality  is  specified  in  [1],  the  corresponding  features  are </p>
<p>listed in the tables </p>
<p><b>&gt; </b></p>
<p>Table 3-1   Supported AUTOSAR standard conform features  </p>
<p><b>&gt; </b></p>
<p>Table 3-2   Not supported AUTOSAR standard conform features </p>
<p>For further information of not supported features see also chapter 7. </p>
<p>Vector Informatik provides further BswM functionality beyond the AUTOSAR standard. The </p>
<p>corresponding features are listed in the table </p>
<p><b>&gt; </b></p>
<p>Table 3-3   Features provided beyond the AUTOSAR standard </p>
<p> </p>
<p>The following features specified in [1] are supported: </p>
<p><b>Supported AUTOSAR Standard Conform Features </b></p>
<p>Mode arbitration and mode control </p>
<p>Configuration of rules, actions and conditions </p>
<p>Table 3-1  </p>
<p>Supported AUTOSAR standard conform features </p>
<p>The following features specified in [1] are not supported: </p>
<p><b>Not Supported AUTOSAR Standard Conform Features </b></p>
<p>Cascaded rule conditions </p>
<p>Table 3-2  </p>
<p>Not supported AUTOSAR standard conform features </p>
<p>The following features are provided beyond the AUTOSAR standard: </p>
<p><b>Features Provided Beyond The AUTOSAR Standard </b></p>
<p>- </p>
<p>Table 3-3  </p>
<p>Features provided beyond the AUTOSAR standard </p>
<p><b>3.2 </b></p>
<p><b>Initialization </b></p>
<p>The  BswM  is  initialized  via  the  service  function </p>
<p>BswM_Init</p>
<p>(refer  to  chapter  5.2.2). All </p>
<p>available modes are set to the configured initialization state, which can either be undefined </p>
<p>or set to a specific value. If the initialization state is undefined the mode is not arbitrated </p>
<p>until the mode request/indication function occurs for the first time. If multiple identities are </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>16 / 124 </p>
<p>used  the  BswM  must  be  initialized  with  the  current  active  identity  which  stored  into  the </p>
<p>configuration pointer. For further information refer to chapter 6. </p>
<p><b>3.3 </b></p>
<p><b>Mode Management </b></p>
<p>The BswM manages user defined modes. A mode consists of the following parts: </p>
<p><b>&gt; </b></p>
<p><b>Mode Source</b>: this is the trigger for the mode arbitration, a trigger can either be a SW-</p>
<p>C indication/request function or a BSW indication/request function or the </p>
<p>BswM_MainFunction()</p>
<p>. </p>
<p><b>&gt; </b></p>
<p><b>Mode Arbitration</b>: when the mode source trigger occurs the BswM will arbitrate a </p>
<p>mode specific rule either immediately or deferred within the </p>
<p>BswM_MainFunction()</p>
<p>. </p>
<p>The mode arbitration types are described in detail in chapters 3.3.1 and 3.3.2. </p>
<p><b>&gt; </b></p>
<p><b>Mode Rule</b>: a rule is a logical expression which consists of specific conditions which </p>
<p>use different operators. The rule is arbitrated by the BswM to be either true or false. </p>
<p>Dependent on the evaluation result the BswM executes the configured mode action(s) </p>
<p>(true-action(s) or false-action(s)). </p>
<p><b>&gt; </b></p>
<p><b>Mode Actions</b>: these are either BSW service function calls or user callout function </p>
<p>calls which are executed by the BswM after the Mode Arbitration. </p>
<p><b>3.3.1 </b></p>
<p><b>Immediate Mode Handling </b></p>
<p>The </p>
<p>immediate </p>
<p>mode </p>
<p>arbitration </p>
<p>is </p>
<p>done </p>
<p>directly </p>
<p>upon </p>
<p>the </p>
<p>mode </p>
<p>request/indication </p>
<p>function.  If  another  mode  request/indication  occurs  during  mode  arbitration  the  BswM </p>
<p>queues  this  mode  arbitration  request.  The  mode  request  queue  is  emptied  when  the </p>
<p>current </p>
<p>mode </p>
<p>arbitration </p>
<p>is </p>
<p>finished. </p>
<p>The </p>
<p>following </p>
<p>sequence </p>
<p>diagram </p>
<p>shows </p>
<p>this </p>
<p>procedure:  </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>17 / 124 </p>
<p> </p>
<p>Figure 3-1 </p>
<p>Sequence Immediate Mode </p>
<p><b>sd Immediate Mode</b></p>
<p>BswM</p>
<p>BSW</p>
<p><b>alt Mode Arbitration Result</b></p>
<p>[True]</p>
<p>[False]</p>
<p><b>alt Stored Mode Requests in Queue </b></p>
<p>[True]</p>
<p><b>loop iteration ov er all immediate requests in queue</b></p>
<p><b>alt Mode Arbitration Result</b></p>
<p>[True]</p>
<p>[False]</p>
<p>Mode Arbitration Request/Indication()</p>
<p>Mode Arbitration()</p>
<p>Another Mode Arbitration</p>
<p>Request/Indication()</p>
<p>Queue Immediate Mode Request()</p>
<p>execute True-Action(s)</p>
<p>execute False-Action(s)</p>
<p>Mode Arbitration()</p>
<p>execute True-Action(s)</p>
<p>execute False-Action(s)</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>18 / 124 </p>
<p><b>3.3.2 </b></p>
<p><b>Deferred Mode Handling </b></p>
<p>The </p>
<p>deferred </p>
<p>mode </p>
<p>arbitration </p>
<p>is </p>
<p>done </p>
<p>cyclically </p>
<p>within </p>
<p>the </p>
<p>execution </p>
<p>of </p>
<p>the </p>
<p>BswM_MainFunction()</p>
<p>. </p>
<p>If </p>
<p>another </p>
<p>mode </p>
<p>request/indication </p>
<p>occurs </p>
<p>during </p>
<p>mode </p>
<p>arbitration  the  BswM  queues  this mode  arbitration  request. The  mode  request  queue  is </p>
<p>emptied  at  the  end  of  the </p>
<p>BswM_MainFunction()</p>
<p>.  The  following  sequence  diagram </p>
<p>shows this procedure: </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>19 / 124 </p>
<p> </p>
<p>Figure 3-2 </p>
<p>Sequence Deferred Mode </p>
<p><b>sd Deferred Mode</b></p>
<p>BSW</p>
<p>BswM</p>
<p>OS</p>
<p><b>alt Mode Arbitration Result</b></p>
<p>[True]</p>
<p>[False]</p>
<p><b>loop iteration ov er all deferred modes</b></p>
<p><b>alt Stored Mode Requests in Queue </b></p>
<p>[True]</p>
<p><b>loop iteration ov er all immediate requests in queue</b></p>
<p><b>alt Mode Arbitration Result</b></p>
<p>[True]</p>
<p>[False]</p>
<p>BswM_MainFunction()</p>
<p>Immediate Mode Request/Indication()</p>
<p>Queue Immediate Mode Request()</p>
<p>Mode</p>
<p>Arbitration()</p>
<p>Execute True-Action(s)</p>
<p>Execute False-Actions()</p>
<p>Mode Arbitration()</p>
<p>Execute True-Action(s)</p>
<p>Execute False-Action(s)</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>20 / 124 </p>
<p><b>3.4 </b></p>
<p><b>Execution of action lists </b></p>
<p>The execution of actions is done after the rule arbitration dependent on the result (true or </p>
<p>false).  There  are  two  ways  that  an  action  list  may  be  executed  based  on  evaluation  of </p>
<p>rules. Either it is executed every time the rule is evaluated with the corresponding result, or </p>
<p>only when the evaluation result has changed from the previous evaluation. This is called </p>
<p>triggered and conditional execution. This execution type is defined via configuration, refer </p>
<p>to chapter 6.   </p>
<p><b>3.5 </b></p>
<p><b>States </b></p>
<p>The following diagram shows the general state handling of the BswM: </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>21 / 124 </p>
<p> </p>
<p>Figure 3-3 </p>
<p>States of the BswM </p>
<p><b>stm State_Machine</b></p>
<p>Ini ti al</p>
<p><b>BSWM_INIT</b></p>
<p>EntryPoint</p>
<p><b>BSWM_WAIT_IMMEDIATE_REQUEST</b></p>
<p><b>BSWM_DEINIT</b></p>
<p><b>BSWM_MAIN_FUNCTION</b></p>
<p><b>BSWM_MODE_ARBITRATION_AND_CONTROL</b></p>
<p><b>BSWM_EMPTY_QUEUE</b></p>
<p>[BswM_Deinit]</p>
<p>/stop any mode request arbitration</p>
<p>[Deferred Request]</p>
<p>[deferred finished]</p>
<p>[Immediate request]</p>
<p>/queue request</p>
<p>[immediate request]</p>
<p>[queue is empty]</p>
<p>[queued immediate request]</p>
<p>[BswM_MainFunction]</p>
<p>[immediate request] /ignore</p>
<p>[BswM_Init]</p>
<p>[Immediate Request]</p>
<p>/queue request</p>
<p>[immediate request]</p>
<p>/queue request</p>
<p>[MainFunctionEnd]</p>
<p>[Immediate finished]</p>
<p>[BswM_MainFunction]</p>
<p>/no deferred mode request arbitration</p>
<p>[queued main fct call]</p>
<p>[BswM_Init]</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>22 / 124 </p>
<p><b>&gt; </b></p>
<p><b>BSWM_INIT </b></p>
<p>The BswM is initialized and ready for immediate mode arbitration requests. Deferred mode </p>
<p>arbitration is done within the cyclic function </p>
<p>BswM_MainFunction()</p>
<p>.  </p>
<p><b>&gt; </b></p>
<p><b>BSWM_WAIT_IMMEDIATE_REQUEST </b></p>
<p>In this state the BswM waits for a mode arbitration request. The state is left if immediate </p>
<p>mode arbitration is requested or when </p>
<p>BswM_MainFunction()</p>
<p> is called. </p>
<p><b>&gt; </b></p>
<p><b>BSWM_MAIN_FUNCTION </b></p>
<p>This state is entered when the </p>
<p>BswM_MainFunction()</p>
<p> is called. Within </p>
<p>BswM_MainFunction()</p>
<p> the deferred mode arbitration is done. Immediate mode </p>
<p>arbitration requests which occur during the execution of </p>
<p>BswM_MainFunction()</p>
<p> are </p>
<p>queued and will be executed at the end of </p>
<p>BswM_MainFunction()</p>
<p> when all deferred </p>
<p>mode arbitration and control is finished. </p>
<p><b>&gt; </b></p>
<p><b>BSWM_MODE_ARBITRATION_AND_CONTROL </b></p>
<p>In this state the configured mode rule arbitration is done and the true-/false-action lists are </p>
<p>executed. New mode arbitration requests are queued. </p>
<p><b>&gt; </b></p>
<p><b>BSWM_EMPTY_QUEUE </b></p>
<p>In this state the queued mode arbitration requests are executed.  </p>
<p><b>&gt; </b></p>
<p><b>BSWM_DEINIT </b></p>
<p>This state is entered when the function </p>
<p>BswM_Deinit()</p>
<p> is called. No mode arbitration </p>
<p>requests are accepted and no mode processing is done. This state can only be left when </p>
<p>function </p>
<p>BswM_Init()</p>
<p> is called. </p>
<p><b>3.6 </b></p>
<p><b>Error Handling </b></p>
<p><b>3.6.1 </b></p>
<p><b>Development Error Reporting </b></p>
<p>By </p>
<p>default, </p>
<p>development </p>
<p>errors </p>
<p>are </p>
<p>reported </p>
<p>to </p>
<p>the </p>
<p>DET </p>
<p>using </p>
<p>the </p>
<p>service </p>
<p>Det_ReportError()</p>
<p>  as  specified  in  [2],  if development  error reporting  is  enabled  (i.e. </p>
<p>pre-compile parameter </p>
<p>BSWM_DEV_ERROR_DETECT==STD_ON</p>
<p>). </p>
<p>If  another  module  is  used  for  development  error  reporting,  the  function  prototype  for </p>
<p>reporting the error can be configured by the integrator, but must have the same signature </p>
<p>as the service </p>
<p>Det_ReportError()</p>
<p>. </p>
<p>The reported BswM ID is 042. </p>
<p>The  reported  service  IDs  identify  the  services  which  are  described  in  5.2. The following </p>
<p>table presents the service IDs and the related services: </p>
<p><b>Service ID </b></p>
<p><b>Service </b></p>
<p>BSWM_INIT_ID (0x00) </p>
<p>BswM_Init() </p>
<p>BSWM_GETVERSIONINFO_ID (0x01) </p>
<p>BswM_GetVersionInfo() </p>
<p>BSWM_REQUESTMODE_ID (0x02) </p>
<p>BswM_RequestMode() </p>
<p>BSWM_MAINFUNCTION_ID (0x03) </p>
<p>BswM_MainFunction() </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>23 / 124 </p>
<p><b>Service ID </b></p>
<p><b>Service </b></p>
<p>BSWM_DEINIT_ID (0x04) </p>
<p>BswM_Deinit() </p>
<p>BSWM_CANSM_CURRENTSTATE_ID (0x05) </p>
<p>BswM_CanSM_CurrentState() </p>
<p>BSWM_DCM_REQUESTCOMMUNICATIONMODE_ID (0x06) </p>
<p>BswM_Dcm_RequestCommunicationMode() </p>
<p>BSWM_DCM_REQUESTRESETMODE_ID (0x07) </p>
<p>BswM_Dcm_RequestResetMode() </p>
<p>BSWM_DCM_SET_PASSIVE_MODE_ID (0x10) </p>
<p>BswM_Dcm_SetPassiveMode() </p>
<p>BSWM_LINSM_CURRENTSTATE_ID (0x09) </p>
<p>BswM_LinSM_CurrentState() </p>
<p>BSWM_LINSM_CURRENTSCHEDULE_ID (0x0A) </p>
<p>BswM_LinSM_CurrentSchedule() </p>
<p>BSWM_LINTP_REQUESTMODE_ID (0x0B) </p>
<p>BswM_LinTp_RequestMode() </p>
<p>BSWM_FRSM_CURRENTSTATE_ID (0x0C) </p>
<p>BswM_FrSM_StateChangeNotification() </p>
<p>BSWM_COMM_CURRENTMODE_ID (0x0E) </p>
<p>BswM_ComM_CurrentMode() </p>
<p>BSWM_COMM_CURRENT_PNC_MODE_ID (0x15) </p>
<p>BswM_ComM_CurrentPNCMode() </p>
<p>BSWM_INITMEMORY_ID (0x80) </p>
<p>BswM_InitMemory() </p>
<p>BSWM_NM_STATE_CHANGE_ID (0x0F) </p>
<p>BswM_Nm_StateChangeNotification() </p>
<p>BSWM_DCM_APPLICATION_UPDATED_ID (0x14) </p>
<p>BswM_Dcm_ApplicationUpdated() </p>
<p>Table 3-4  </p>
<p>Service IDs </p>
<p>The errors reported to DET are described in the following table: </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p>0x01 </p>
<p>BSWM_E_NO_INIT </p>
<p>Service function is called while BswM is not initialized. </p>
<p>0x02 </p>
<p>BSWM_E_NULL_POINTER </p>
<p>Service function is called with a null pointer as an </p>
<p>argument. </p>
<p>0x04 </p>
<p>BSWM_E_REQ_USER_OUT_OF_RANGE </p>
<p>A requesting user is out of range. </p>
<p>0x05 </p>
<p>BSWM_E_REQ_MODE_OUT_OF_RANGE </p>
<p>A requested mode is out of range. </p>
<p>Table 3-5  </p>
<p>Errors reported to DET </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>24 / 124 </p>
<p><b>3.6.1.1 </b></p>
<p><b>Parameter Checking </b></p>
<p>AUTOSAR requires that API functions check the validity of their parameters. The checks in </p>
<p>Table  3-6  are  internal  parameter  checks  of  the  API  functions.  These  checks  are  for </p>
<p>development error reporting and can be en-/disabled separately. The configuration of en-</p>
<p>/disabling  the  checks  is  described  in  chapter  6.2.1.  En-/disabling  of  single  checks  is  an </p>
<p>addition to the AUTOSAR standard which requires to en-/disable the complete parameter </p>
<p>checking via the parameter </p>
<p>BSWM_DEV_ERROR_DETECT</p>
<p>. </p>
<p>The following table shows which parameter checks are performed on which services: </p>
<p><b>Check </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Service </b></p>
<p>BSWM_E_NO_INIT</p>
<p> </p>
<p>BSWM_E_NULL_POINTER</p>
<p> </p>
<p>BSWM_E_REQ_USER_OUT_OF_RANGE </p>
<p>BSWM_E_REQ_MODE_OUT_OF_RANGE </p>
<p>BswM_Init </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p>BswM_GetVersionInfo </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p>BswM_RequestMode </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>BswM_MainFunction </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>BswM_Deinit </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>BswM_CanSM_CurrentState </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>BswM_Dcm_RequestCommunicationMode </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>BswM_Dcm_RequestResetMode </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p>BswM_Dcm_SetPassiveMode </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p>BswM_LinSM_CurrentState </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>BswM_LinSM_CurrentSchedule </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>BswM_LinSM_ScheduleEnd_Notification </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>BswM_LinTp_RequestMode </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>BswM_FrSM_StateChangeNotification </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>BswM_ComM_CurrentMode </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>BswM_ComM_CurrentPNCMode </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p>BswM_Nm_StateChangeNotification </p>
<p></p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>BswM_Dcm_ApplicationUpdated </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>BswM_InitMemory </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>Table 3-6  </p>
<p>Development Error Reporting: Assignment of checks to services </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>25 / 124 </p>
<p><b>3.6.2 </b></p>
<p><b>Production Code Error Reporting </b></p>
<p>Currently the BswM does not support any production error detection and reporting. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>26 / 124 </p>
<p><b>4 </b></p>
<p><b>Integration </b></p>
<p>This chapter gives necessary information for the integration of the MICROSAR BswM into </p>
<p>an application environment of an ECU. </p>
<p><b>4.1 </b></p>
<p><b>Scope of Delivery </b></p>
<p>The delivery of the BswM contains the files which are described in the chapters 4.1.1 and </p>
<p>4.1.2: </p>
<p><b>4.1.1 </b></p>
<p><b>Static Files </b></p>
<p><b>File Name </b></p>
<p><b>Source </b></p>
<p><b>Code </b></p>
<p><b>Delivery </b></p>
<p><b>Object </b></p>
<p><b>Code </b></p>
<p><b>Delivery </b></p>
<p><b>Description </b></p>
<p>BswM.c </p>
<p></p>
<p> </p>
<p> </p>
<p>This is the source file of the BswM. It contains the </p>
<p>initialization function, the deinitialization function, the </p>
<p>cyclic main function and all the BSW mode indication </p>
<p>functions.</p>
<p> </p>
<p>BswM.h </p>
<p></p>
<p> </p>
<p> </p>
<p>This is the header file of the BswM. It contains the </p>
<p>interfaces to the BswM API functions. </p>
<p>BswM_CanSM.h </p>
<p></p>
<p> </p>
<p> </p>
<p>This header file contains the prototypes of the callback </p>
<p>functions of the CAN State Manager. </p>
<p>BswM_ComM.h </p>
<p></p>
<p> </p>
<p> </p>
<p>This header file contains the prototypes of the callback </p>
<p>functions of the Communication Manager. </p>
<p>BswM_Dcm.h </p>
<p></p>
<p> </p>
<p> </p>
<p>This header file contains the prototypes of the callback </p>
<p>functions of the Diagnostic Communication Manager. </p>
<p>BswM_FrSM.h </p>
<p></p>
<p> </p>
<p> </p>
<p>This header file contains the prototypes of the callback </p>
<p>functions of the FlexRay State Manager. </p>
<p>BswM_LinSM.h </p>
<p></p>
<p> </p>
<p> </p>
<p>This header file contains the prototypes of the callback </p>
<p>functions of the LIN State Manager. </p>
<p>BswM_Nm.h </p>
<p></p>
<p> </p>
<p> </p>
<p>This header file contains the prototypes of the callback </p>
<p>functions of the Network Management. </p>
<p>Table 4-1  </p>
<p>Static files </p>
<p> </p>
<p><b>4.1.2 </b></p>
<p><b>Dynamic Files </b></p>
<p>The dynamic files are generated by the configuration tool GENy. </p>
<p><b>File Name </b></p>
<p><b>Description </b></p>
<p>BswM_Lcfg.c </p>
<p>This file contains the link time configuration parameters.  </p>
<p>BswM_Cfg.h </p>
<p>This header file contains precompile time configuration parameters. </p>
<p>Table 4-2  </p>
<p>Generated files </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>27 / 124 </p>
<p><b>4.2 </b></p>
<p><b>Include Structure </b></p>
<p> </p>
<p>Figure 4-1 </p>
<p>Include structure </p>
<p><b>4.3 </b></p>
<p><b>Critical Sections </b></p>
<p>The BswM has code sections which must not be interrupted by incoming mode requests. </p>
<p>Therefore the BswM uses one exclusive area: </p>
<p>BSWM_EXCLUSIVE_AREA_0 </p>
<p>This area requires a global interrupt lock and it must be ensured that the main functions of </p>
<p>the BSW modules which mode indication functions are used cannot interrupt each other. </p>
<p><b>object Header File Structure</b></p>
<p><b>BswM.c</b></p>
<p><b>BswM.h</b></p>
<p><b>MemMap.h</b></p>
<p><b>SchM_BswM.h</b></p>
<p><b>Det.h</b></p>
<p><b>Bsw M_Cfg.h</b></p>
<p><b>ComStack_Types.</b></p>
<p><b>Std_Types.h</b></p>
<p><b>Compiler.h</b></p>
<p><b>Platform_Types.h</b></p>
<p><b>BswM_ComM.h</b></p>
<p><b>BswM_CanSM.h</b></p>
<p><b>BswM_LinSM.h</b></p>
<p><b>Bsw M_LinTp.h</b></p>
<p><b>BswM_Dcm.h</b></p>
<p><b>BswM_FrSM.h</b></p>
<p><b>BswM_Nm.h</b></p>
<p><b>ComM.h</b></p>
<p><b>CanSM_BswM.h</b></p>
<p><b>LinSM.h</b></p>
<p><b>LinTp_Types.h</b></p>
<p><b>Dcm.h</b></p>
<p><b>FrSM_Types.h</b></p>
<p><b>Nm.h</b></p>
<p><b>Rte_Types.h</b></p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>include</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>28 / 124 </p>
<p><b>4.4 </b></p>
<p><b>Cyclic Task </b></p>
<p>The BswM has one cyclic main function </p>
<p>BswM_MainFunction()</p>
<p> which must be called </p>
<p>cyclically.  The  cyclic  time  is  up  to  the  user  but  must  be  considered  for  deferred  mode </p>
<p>handling. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>29 / 124 </p>
<p><b>5 </b></p>
<p><b>API Description </b></p>
<p>For an interfaces overview please see Figure 2-2. </p>
<p><b>5.1 </b></p>
<p><b>Type Definitions </b></p>
<p>The types defined by the BswM are described in this chapter. </p>
<p><b>Type Name </b></p>
<p><b>C-Type </b></p>
<p><b>Description </b></p>
<p><b>Value Range </b></p>
<p>BswM_ModeType </p>
<p>uint8 </p>
<p>uint16 </p>
<p>The range of this type </p>
<p>depends on the </p>
<p>configured number of </p>
<p>modes. </p>
<p>0 … 255  </p>
<p>Used if the total number of modes </p>
<p>is less than or equal to 255.</p>
<p> </p>
<p> </p>
<p>0 … 65535  </p>
<p>Used if the total number of modes </p>
<p>is greater than 255. </p>
<p>BswM_UserType </p>
<p>uint8 </p>
<p>uint16 </p>
<p>The range of this type </p>
<p>depends on the number </p>
<p>of user. </p>
<p>0 … 255  </p>
<p>Used if the total number of users is </p>
<p>less than or equal to 255.</p>
<p> </p>
<p> </p>
<p>0 … 65535  </p>
<p>Used if the total number of users is </p>
<p>greater than 255. </p>
<p>BswM_ConfigType </p>
<p>uint8 </p>
<p>Type for the </p>
<p>configuration pointer </p>
<p>parameter for </p>
<p>BswM_Init()</p>
<p>. </p>
<p>Currently the configuration pointer </p>
<p>is only used for multiple identities </p>
<p>configurations.</p>
<p> </p>
<p>Table 5-1  </p>
<p>Type definitions </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>30 / 124 </p>
<p><b>5.2 </b></p>
<p><b>Services provided by BswM </b></p>
<p><b>5.2.1 </b></p>
<p><b>BswM_RequestMode </b></p>
<p><b>Prototype </b></p>
<p>Std_ReturnType BswM_RequestMode</p>
<p> (</p>
<p>BswM_UserType requesting_user, BswM_ModeType </p>
<p>requested_mode)</p>
<p> </p>
<p><b>Parameter </b></p>
<p>requesting_user </p>
<p>Index of the user that requests the mode. </p>
<p>requested_mode </p>
<p>Requested mode. </p>
<p><b>Return code </b></p>
<p>E_OK </p>
<p>Request is valid and accepted by the BswM. </p>
<p>E_NOT_OK </p>
<p>Request is invalid and not accepted by the BswM. </p>
<p><b>Functional Description </b></p>
<p>General function to request modes. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Service ID: see table 'Service IDs'  </p>
<p><b>&gt; </b></p>
<p>This function is reentrant. </p>
<p><b>&gt; </b></p>
<p>This function is only allowed to be used by the BswM itself, applications or SWCs must not use </p>
<p>this function.  </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>This function must not be called from interrupt context. </p>
<p>Table 5-2  </p>
<p>BswM_RequestMode </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>31 / 124 </p>
<p><b>5.2.2 </b></p>
<p><b>BswM_Init </b></p>
<p><b>Prototype </b></p>
<p>void BswM_Init(BswM_ConfigType ConfigPtr) </p>
<p><b>Parameter </b></p>
<p>ConfigPtr </p>
<p>Pointer is only used in multiple identities configurations: ConfigPtr must </p>
<p>contain the identity information, refer to the example below. </p>
<p><b>Return code </b></p>
<p>- </p>
<p> </p>
<p><b>Functional Description </b></p>
<p>This function initializes the BswM. All configured modes are set to the configured initial value. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Service ID: see table 'Service IDs'. </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is non-reentrant. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>This function must not be called from interrupt context. </p>
<p>Table 5-3  </p>
<p>BswM_Init </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Example </b></p>
<p>Here is an example which describes the usage of BswM_Init() in a multiple identities </p>
<p>use-case: </p>
<p>The include of BswM.h contains the indexes of the available identities which have the </p>
<p>naming convention BswM_&lt;identity-name&gt; and are of type uint8, example: </p>
<p>CONST(uint8, BSWM_CONST) BswM_ID_1; </p>
<p>CONST(uint8, BSWM_CONST) BswM_ID_2; </p>
<p>Example code: </p>
<p>… </p>
<p>#include “BswM.h”</p>
<p> </p>
<p>… </p>
<p>#if (BSWM_IDENTITY_MANAGER_CONFIG == STD_ON) </p>
<p>  BswM_Init(&amp;BswM_ID_1); </p>
<p>#else </p>
<p>  BswM_Init(((void*)0)); </p>
<p>#endif</p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>32 / 124 </p>
<p><b>5.2.3 </b></p>
<p><b>BswM_InitMemory </b></p>
<p><b>Prototype </b></p>
<p>void BswM_InitMemory(void)</p>
<p> </p>
<p><b>Parameter </b></p>
<p>- </p>
<p> </p>
<p><b>Return code </b></p>
<p>- </p>
<p> </p>
<p><b>Functional Description </b></p>
<p>This function sets the BswM into an uninitialized state. This function must only be called if INIT variables </p>
<p>are not initialized by the startup code. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Service ID: see table 'Service IDs' . </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>This function must not be called in interrupt context. </p>
<p>Table 5-4  </p>
<p>BswM_InitMemory </p>
<p> </p>
<p><b>5.2.4 </b></p>
<p><b>BswM_Deinit </b></p>
<p><b>Prototype </b></p>
<p>void BswM_Deinit (void)</p>
<p> </p>
<p><b>Parameter </b></p>
<p>- </p>
<p> </p>
<p><b>Return code </b></p>
<p>- </p>
<p> </p>
<p><b>Functional Description </b></p>
<p>This function sets the BswM into the BSWM_DEINIT state. All pending requests are cleared and no further </p>
<p>mode requests are accepted by the BswM. This state can only be left by calling the function </p>
<p>BswM_Init()</p>
<p>. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Service ID: see table 'Service IDs'  </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is non-reentrant. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>This function must not be called in interrupt context. </p>
<p>Table 5-5  </p>
<p>BswM_Deinit </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>33 / 124 </p>
<p><b>5.2.5 </b></p>
<p><b>BswM_GetVersionInfo </b></p>
<p><b>Prototype </b></p>
<p>void BswM_GetVersionInfo(Std_VersionInfoType* VersionInfo) </p>
<p><b>Parameter </b></p>
<p>VersionInfo </p>
<p>Pointer to the address where the BswM version info shall be copied to. </p>
<p><b>Return code </b></p>
<p>- </p>
<p> </p>
<p><b>Functional Description </b></p>
<p>This function returns the version information of the BswM. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Service ID: see table 'Service IDs'  </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>This function may be called from task and interrupt context. </p>
<p>Table 5-6  </p>
<p>BswM_GetVersionInfo </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>34 / 124 </p>
<p><b>5.2.6 </b></p>
<p><b>BswM_ComM_CurrentMode </b></p>
<p><b>Prototype </b></p>
<p>void BswM_ComM_CurrentMode(  </p>
<p>    NetworkHandleType Network,  </p>
<p>    ComM_ModeType RequestedMode  </p>
<p>) </p>
<p><b>Parameter </b></p>
<p>Network </p>
<p>Index of the network. </p>
<p>RequestedMode </p>
<p>Current communication mode of the ComM. </p>
<p><b>Return code </b></p>
<p>- </p>
<p> </p>
<p><b>Functional Description </b></p>
<p>This function is called by the ComM to notify the BswM about the current communication mode of a </p>
<p>network. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Service ID: see table 'Service IDs'  </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant. </p>
<p><b>&gt; </b></p>
<p>Must only be called by the ComM. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>This function may be called from task and interrupt context. </p>
<p>Table 5-7  </p>
<p>BswM_ComM_CurrentMode </p>
<p><b>5.2.7 </b></p>
<p><b>BswM_ComM_CurrentPNCMode </b></p>
<p><b>Prototype </b></p>
<p>void BswM_ComM_CurrentPNCMode(  </p>
<p>    PNCHandleType Pnc,  </p>
<p>    ComM_PncModeType RequestedMode  </p>
<p>) </p>
<p><b>Parameter </b></p>
<p>Pnc </p>
<p>Global index of the Pnc. </p>
<p>RequestedMode </p>
<p>Current mode of the Pnc. </p>
<p><b>Return code </b></p>
<p>- </p>
<p> </p>
<p><b>Functional Description </b></p>
<p>This function is called by the ComM to notify the BswM about the current mode of a PNC. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>35 / 124 </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Service ID: see table 'Service IDs'  </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant. </p>
<p><b>&gt; </b></p>
<p>Must only be called by the ComM. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>This function may be called from task and interrupt context. </p>
<p>Table 5-8  </p>
<p>BswM_ComM_CurrentPNCMode </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>36 / 124 </p>
<p><b>5.2.8 </b></p>
<p><b>BswM_CanSM_CurrentState </b></p>
<p><b>Prototype </b></p>
<p>void BswM_CanSM_CurrentState(  </p>
<p>    NetworkHandleType Network,  </p>
<p>    CanSM_BswMCurrentStateType CurrentState  </p>
<p>) </p>
<p><b>Parameter </b></p>
<p>Network </p>
<p>Index of the network. </p>
<p>CurrentState </p>
<p>Current state of the CanSM. </p>
<p><b>Return code </b></p>
<p>- </p>
<p> </p>
<p><b>Functional Description </b></p>
<p>This function is called by the CanSM to notify the BswM about the current state of a specific CanSM </p>
<p>network. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Service ID: see table 'Service IDs'  </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant. </p>
<p><b>&gt; </b></p>
<p>Must only be called by the CanSM. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>This function may be called from task and interrupt context. </p>
<p>Table 5-9  </p>
<p>BswM_CanSM_CurrentState </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>37 / 124 </p>
<p><b>5.2.9 </b></p>
<p><b>BswM_FrSM_StateChangeNotification </b></p>
<p><b>Prototype </b></p>
<p>void BswM_FrSM_StateChangeNotification (  </p>
<p>    NetworkHandleType Network,  </p>
<p>    FrSM_BswM_StateType PreviousState,  </p>
<p>    FrSM_BswM_StateType CurrentState  </p>
<p>) </p>
<p><b>Parameter </b></p>
<p>Network </p>
<p>Index of the network. </p>
<p>PreviousState </p>
<p>Previous state of the FrSM </p>
<p>CurrentState </p>
<p>Current state of the FrSM. </p>
<p><b>Return code </b></p>
<p>- </p>
<p> </p>
<p><b>Functional Description </b></p>
<p>This function is called by the FrSM to notify the BswM about the current state of a specific FrSM network. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Service ID: see table 'Service IDs'  </p>
<p><b>&gt; </b></p>
<p>This function is synchronous.  </p>
<p><b>&gt; </b></p>
<p>This function is reentrant. </p>
<p><b>&gt; </b></p>
<p>Must only be called by the FrSM. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>This function may be called from task and interrupt context. </p>
<p>Table 5-10  </p>
<p>BswM_FrSM_StateChangeNotification </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>38 / 124 </p>
<p><b>5.2.10 </b></p>
<p><b>BswM_LinSM_CurrentState </b></p>
<p><b>Prototype </b></p>
<p>void BswM_LinSM_CurrentState(  </p>
<p>    NetworkHandleType Network,  </p>
<p>    LinSM_ModeType CurrentState  </p>
<p>) </p>
<p><b>Parameter </b></p>
<p>Network </p>
<p>Index of the network. </p>
<p>CurrentState </p>
<p>Current state of the LinSM. </p>
<p><b>Return code </b></p>
<p>- </p>
<p> </p>
<p><b>Functional Description </b></p>
<p>This function is called by the LinSM to notify the BswM about the current state of a specific LinSM network. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Service ID: see table 'Service IDs'  </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant. </p>
<p><b>&gt; </b></p>
<p>Must only be called by the LinSM. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>This function may be called from task and interrupt context. </p>
<p>Table 5-11  </p>
<p>BswM_LinSM_CurrentState </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>39 / 124 </p>
<p><b>5.2.11 </b></p>
<p><b>BswM_LinSM_CurrentSchedule </b></p>
<p><b>Prototype </b></p>
<p>void BswM_LinSM_CurrentSchedule(  </p>
<p>    NetworkHandleType Network,  </p>
<p>    LinIf_SchHandleType CurrentSchedule  </p>
<p>) </p>
<p><b>Parameter </b></p>
<p>Network </p>
<p>Index of the network where the LIN schedule was changed. </p>
<p>CurrentSchedule </p>
<p>Index of the current active schedule table. </p>
<p><b>Return code </b></p>
<p>- </p>
<p> </p>
<p><b>Functional Description </b></p>
<p>This function is used by the LinSM to notify the BswM about a schedule change on a specific LIN network. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Service ID: see table 'Service IDs'  </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant. </p>
<p><b>&gt; </b></p>
<p>This function must only be called by the LinSM. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>This function may be called from task and interrupt context. </p>
<p>Table 5-12  </p>
<p>BswM_LinSM_CurrentSchedule </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>40 / 124 </p>
<p><b>5.2.12 </b></p>
<p><b>BswM_LinSM_ScheduleEnd_Notification </b></p>
<p><b>Prototype </b></p>
<p>void BswM_LinSM_SchedulEnd_Notification(  </p>
<p>    NetworkHandleType Network,  </p>
<p>    LinIf_SchHandleType Schedule  </p>
<p>) </p>
<p><b>Parameter </b></p>
<p>Network </p>
<p>Index of the network. </p>
<p>Schedule </p>
<p>Index of the schedule table. </p>
<p><b>Return code </b></p>
<p>- </p>
<p> </p>
<p><b>Functional Description </b></p>
<p>This function is used by the LinSM to notify the BswM when the last frame of a schedule table was </p>
<p>transmitted. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Service ID: see table 'Service IDs'  </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant. </p>
<p><b>&gt; </b></p>
<p>This function must only be called by the LinSM. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>This function may be called from task and interrupt context. </p>
<p>Table 5-13  </p>
<p>BswM_LinSM_ScheduleEnd_Notification </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>41 / 124 </p>
<p><b>5.2.13 </b></p>
<p><b>BswM_LinTp_RequestMode </b></p>
<p><b>Prototype </b></p>
<p>void BswM_LinTp_RequestMode(  </p>
<p>    NetworkHandleType Network,  </p>
<p>    LinTp_Mode LinTpRequestedMode  </p>
<p>) </p>
<p><b>Parameter </b></p>
<p>Network </p>
<p>Index of the network the LinTp request is related to. </p>
<p>LinTpRequestedMode </p>
<p>Requested LinTp Mode. </p>
<p><b>Return code </b></p>
<p>- </p>
<p> </p>
<p><b>Functional Description </b></p>
<p>Function called by LinTP to request a mode for the corresponding LIN channel. The LinTp_Mode mainly </p>
<p>correlates to the LIN schedule table that should be used. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Service ID: see table 'Service IDs'  </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant. </p>
<p><b>&gt; </b></p>
<p>This function must only be called by the LinTp. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>This function may be called from task and interrupt context. </p>
<p>Table 5-14  </p>
<p>BswM_LinTp_RequestMode </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>42 / 124 </p>
<p><b>5.2.14 </b></p>
<p><b>BswM_Nm_StateChangeNotification </b></p>
<p><b>Prototype </b></p>
<p>void BswM_Nm_StateChangeNotification(  </p>
<p>    NetworkHandleType nmChannelHandle, </p>
<p>    Nm_StateType nmPreviousState,  </p>
<p>    Nm_StateType nmCurrentState  </p>
<p>) </p>
<p><b>Parameter </b></p>
<p>nmChannelHandle </p>
<p>Index of the network. </p>
<p>nmPreviousState </p>
<p>Contains the previous state of the Nm. </p>
<p>nmCurrentState </p>
<p>Contains the current state of the Nm. </p>
<p><b>Return code </b></p>
<p>- </p>
<p> </p>
<p><b>Functional Description </b></p>
<p>Function called by the Nm to notify the BswM about a state change. A detailed description of the NM states </p>
<p>can be found in [14]. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Service ID: see table 'Service IDs'  </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant. </p>
<p><b>&gt; </b></p>
<p>This function must only be called by the Nm. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>This function may be called from task and interrupt context. </p>
<p>Table 5-15  </p>
<p>BswM_Nm_StateChangeNotification </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>43 / 124 </p>
<p><b>5.2.15 </b></p>
<p><b>BswM_Dcm_RequestCommunicationMode </b></p>
<p><b>Prototype </b></p>
<p>void BswM_Dcm_RequestCommunicationMode(  </p>
<p>    NetworkHandleType Network,  </p>
<p>    Dcm_CommunicationModeType RequestedMode  </p>
<p>) </p>
<p><b>Parameter </b></p>
<p>Network </p>
<p>Index of the network. </p>
<p>RequestedMode </p>
<p>Contains the requested communication mode. </p>
<p><b>Return code </b></p>
<p>- </p>
<p> </p>
<p><b>Functional Description </b></p>
<p>Function called by the Dcm to notify the BswM about a specific communication mode. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Service ID: see table 'Service IDs'  </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant. </p>
<p><b>&gt; </b></p>
<p>This function must only be called by the Dcm. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>This function may be called from task and interrupt context. </p>
<p>Table 5-16  </p>
<p>BswM_Dcm_RequestCommunicationMode </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>44 / 124 </p>
<p><b>5.2.16 </b></p>
<p><b>BswM_Dcm_RequestResetMode </b></p>
<p><b>Prototype </b></p>
<p>void BswM_Dcm_RequestResetMode(  </p>
<p>    Dcm_ResetModeType RequestedMode  </p>
<p>) </p>
<p><b>Parameter </b></p>
<p>RequestedMode </p>
<p>Contains the requested communication mode. </p>
<p><b>Return code </b></p>
<p>- </p>
<p> </p>
<p><b>Functional Description </b></p>
<p>Function called by the Dcm to notify the BswM about a specific reset mode. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Service ID: see table 'Service IDs'  </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant. </p>
<p><b>&gt; </b></p>
<p>This function must only be called by the Dcm. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>This function may be called from task and interrupt context. </p>
<p>Table 5-17  </p>
<p>BswM_Dcm_RequestCommunicationMode </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>45 / 124 </p>
<p><b>5.2.17 </b></p>
<p><b>BswM_Dcm_SetPassiveMode </b></p>
<p><b>Prototype </b></p>
<p>void BswM_Dcm_SetPassiveMode(  </p>
<p>    boolean mode  </p>
<p>) </p>
<p><b>Parameter </b></p>
<p>mode </p>
<p>Contains the state of the passive mode (on/off). </p>
<p><b>Return code </b></p>
<p>- </p>
<p> </p>
<p><b>Functional Description </b></p>
<p>Function called by the Dcm to notify the BswM about the state of the passive mode. The BswM routes this </p>
<p>request directly to the CAN state manager (CanSM) and/or to the FlexRay state manager (FrSM). </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Service ID: see table 'Service IDs'  </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant. </p>
<p><b>&gt; </b></p>
<p>This function must only be called by the Dcm. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>This function may be called from task and interrupt context. </p>
<p>Table 5-18  </p>
<p>BswM_Dcm_RequestCommunicationMode </p>
<p><b>5.2.18 </b></p>
<p><b>BswM_Dcm_ApplicationUpdated </b></p>
<p><b>Prototype </b></p>
<p>void BswM_Dcm_ApplicationUpdated ( ) </p>
<p><b>Parameter </b></p>
<p>- </p>
<p> </p>
<p><b>Return code </b></p>
<p>- </p>
<p> </p>
<p><b>Functional Description </b></p>
<p>Function called by the Dcm to notify the BswM about an application is updated after flash process. The </p>
<p>BswM stores this event and informs the application about the update by calling </p>
<p>Appl_BswM_ApplicationUpdated() or by using the application update SWC service in the next </p>
<p>BswM_MainFunction() call. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Service ID: see table 'Service IDs'  </p>
<p><b>&gt; </b></p>
<p>This function is asynchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant. </p>
<p><b>&gt; </b></p>
<p>The functionality must be enabled inside the BswM (“Dcm Application Updated” = TRUE) </p>
<p><b>&gt; </b></p>
<p>This function must only be called by the Dcm. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>46 / 124 </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>This function may be called from task and interrupt context. </p>
<p>Table 5-19  </p>
<p>BswM_Dcm_ApplicationUpdated </p>
<p><b>5.3 </b></p>
<p><b>Services used by BswM </b></p>
<p>In the following table services provided by other components, which are used by the BswM </p>
<p>are listed. For details about prototype and functionality refer to the documentation of the </p>
<p>providing component. </p>
<p><b>Component </b></p>
<p><b>API </b></p>
<p>DET </p>
<p>Det_ReportError </p>
<p>LinSM </p>
<p>LinSM_ScheduleRequest </p>
<p>CanSM </p>
<p>CanSM_SetEcuPassive </p>
<p>FrSM </p>
<p>FrSM_SetEcuPassive </p>
<p>Nm </p>
<p>Nm_EnableCommunication </p>
<p>Nm </p>
<p>Nm_DisableCommunication </p>
<p>Com </p>
<p>Com_IpduGroupStart </p>
<p>Com </p>
<p>Com_IpduGroupStop </p>
<p>Com </p>
<p>Com_EnableReceptionDM </p>
<p>Com </p>
<p>Com_DisableReceptionDM </p>
<p>PduR </p>
<p>PduR_EnableRouting </p>
<p>PduR </p>
<p>PduR_DisableRouting </p>
<p>Table 5-20  </p>
<p>Services used by the BswM </p>
<p><b>5.4 </b></p>
<p><b>Callback Functions </b></p>
<p><b>5.4.1 </b></p>
<p><b>Appl_BswM_ApplicationUpdated </b></p>
<p><b>Prototype </b></p>
<p>void Appl_BswM_ApplicationUpdated ( ) </p>
<p><b>Parameter </b></p>
<p>- </p>
<p> </p>
<p><b>Return code </b></p>
<p>- </p>
<p> </p>
<p><b>Functional Description </b></p>
<p>Function called by the BswM to notify the application software about an application updated after flash </p>
<p>process.  </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>47 / 124 </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>Service ID: see table 'Service IDs'  </p>
<p><b>&gt; </b></p>
<p>This function is synchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant. </p>
<p><b>&gt; </b></p>
<p>This function must only be called by the BswM. </p>
<p><b>&gt; </b></p>
<p>This function is only available it is enabled in the BswM configuration and the configuration </p>
<p>item “Provide as RteMode Switch Notification” is disabled </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>This function is called from task (BswM_MainFunction()). </p>
<p>Table 5-21  </p>
<p>Appl_BswM_ApplicationUpdated </p>
<p><b>5.5 </b></p>
<p><b>Configurable Interfaces </b></p>
<p><b>5.5.1 </b></p>
<p><b>Callout Functions </b></p>
<p>A User Callout Function can be used as an item of an Action List (refer to chapter 6.2.5.2). </p>
<p>The integrator must provide an extern declaration of the function via an application header </p>
<p>file  (refer  to  chapter  6.2.1).  The  BswM  callout  function  declaration  is  described  in  the </p>
<p>following table: </p>
<p><b>Prototype </b></p>
<p>void</p>
<p> </p>
<p><b>[Callout Function Name]</b></p>
<p> </p>
<p>( void )</p>
<p> </p>
<p><b>Parameter </b></p>
<p>- </p>
<p>- </p>
<p><b>Return code </b></p>
<p>- </p>
<p>- </p>
<p><b>Functional Description </b></p>
<p>If a User Callout is configured as an item of an Action List the BswM calls this function in the context of the </p>
<p>appropriate rule. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>- </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>Interrupt or task context, depends on the mode/rule configuration in which the callout is used. </p>
<p>Table 5-22  </p>
<p>User Callout </p>
<p><b>5.5.2 </b></p>
<p><b>Mode Trigger Functions </b></p>
<p>If Generic Modes are used the BswM provides a function which allows the application to </p>
<p>indicate a specific mode state. The following table describes the mode trigger function: </p>
<p><b> Prototype </b></p>
<p>void</p>
<p> </p>
<p><b>[Generic Mode Trigger Function Name]</b></p>
<p> </p>
<p>( uint8 reqMode )</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>48 / 124 </p>
<p><b>Parameter </b></p>
<p>reqMode </p>
<p>Contains the requested Mode State. Possible values are the configured Mode </p>
<p>State Values. </p>
<p><b>Return code </b></p>
<p>- </p>
<p>- </p>
<p><b>Functional Description </b></p>
<p>If a User Callout is configured as an item of an Action List the BswM calls this function in the context of the </p>
<p>appropriate rule. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>This function is synchronous.  </p>
<p><b>&gt; </b></p>
<p>This function is reentrant. </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>Interrupt or task context. </p>
<p>Table 5-23  </p>
<p>Mode Trigger Function Prototype </p>
<p><b>5.5.3 </b></p>
<p><b>User Condition Functions </b></p>
<p>A User Condition Function can be used in a Rule Condition (refer to chapter 6.2.5.1). The </p>
<p>integrator must provide an extern declaration of the function via an application header file </p>
<p>(refer to chapter 6.2.1). The BswM User Condition Function declaration is described in the </p>
<p>following table: </p>
<p><b>Prototype </b></p>
<p>boolean</p>
<p> </p>
<p><b>[User Condition Function Name]</b></p>
<p> </p>
<p>( void )</p>
<p> </p>
<p><b>Parameter </b></p>
<p>- </p>
<p>- </p>
<p><b>Return code </b></p>
<p>boolean </p>
<p>The return value must be boolean true or false. </p>
<p><b>Functional Description </b></p>
<p>If a User Condition is configured as a condition in a Rule the BswM calls this function during the Rule </p>
<p>Arbitration. The function returns true or false which then has effect on the Rule Arbitration result. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>- </p>
<p>Call context </p>
<p><b>&gt; </b></p>
<p>Interrupt or task context, depends on the mode/rule configuration in which the User Condition </p>
<p>is used. </p>
<p>Table 5-24  </p>
<p>User Condition </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>49 / 124 </p>
<p><b>5.6 </b></p>
<p><b>Service Ports </b></p>
<p><b>5.6.1 </b></p>
<p><b>Client Server Interface </b></p>
<p>A client server interface is related to a Provide Port at the server side and a Require Port </p>
<p>at client side.  </p>
<p><b>5.6.1.1 </b></p>
<p><b>Provide Ports on BswM Side </b></p>
<p>At  the  Provide  Ports  of  the  BswM  the  API  functions  described  in  5.2  are  available  as </p>
<p>Runnable Entities. The Runnable Entities are invoked via Operations. The mapping from a </p>
<p>SWC client call to an Operation is performed by the RTE. In this mapping the RTE adds </p>
<p>Port Defined Argument Values to the client call of the SWC, if configured. </p>
<p>The  following  sub-chapters  present  the  Provide  Ports  defined  for  the  BswM  and  the </p>
<p>Operations defined for the Provide Ports, the API functions related to the Operations and </p>
<p>the Port Defined Argument Values to be added by the RTE. </p>
<p><b>5.6.1.1.1 </b></p>
<p><b>BswM_ModeIndication_&lt;GenericModeName&gt; </b></p>
<p> </p>
<p><b>Operation </b></p>
<p><b>API Function </b></p>
<p><b>Port Defined Argument Values </b></p>
<p>&lt;GenericModeName&gt;_&lt;Generic</p>
<p>ModeTriggerFunctionName&gt;  </p>
<p>(name depends on the </p>
<p>configuration, see chapter 6.2.3) </p>
<p>&lt;Generic Mode Trigger </p>
<p>Function&gt; </p>
<p>- </p>
<p>Table 5-25  </p>
<p>Provide Port </p>
<p><b>5.6.1.1.2 </b></p>
<p><b>BswM_DcmAppUpdate </b></p>
<p><b>Operation </b></p>
<p><b>API Function </b></p>
<p><b>Port Defined Argument Values </b></p>
<p>BswM_DcmAppUpdate </p>
<p>BswM_ApplicationUpda</p>
<p>ted </p>
<p>- </p>
<p>Table 5-26  </p>
<p>BswM_DcmAppUpdate </p>
<p><b>5.6.1.2 </b></p>
<p><b>Require Ports </b></p>
<p>At its Require Ports the BswM calls Operations. These Operations have to be provided by </p>
<p>the SWCs by means of Runnable Entities.  These Runnable Entities implement the </p>
<p>callback functions expected by the BswM. </p>
<p> </p>
<p><b>5.6.1.2.1 </b></p>
<p><b>Mode Switch Port </b></p>
<p><b>Operation </b></p>
<p><b>Rte Interface </b></p>
<p><b>Mode Declaration Group </b></p>
<p>currentMode </p>
<p>Rte_Switch_BswM_ModeNotification_</p>
<p>&lt;GenericModeName&gt;_currentMode </p>
<p></p>
<p> </p>
<p>RTE_MODE_BSWM_&lt;GenericModeNam</p>
<p>e&gt;_Mode_BSWM_&lt;ModeStateName&gt; </p>
<p> </p>
<p>Table 5-27  </p>
<p>Mode Switch Port </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>50 / 124 </p>
<p><b>6 </b></p>
<p><b>Configuration </b></p>
<p>This chapter describes the configuration of the BswM in GENy. </p>
<p><b>6.1 </b></p>
<p><b>Configuration Variants </b></p>
<p>The BswM supports only the configuration variant </p>
<p>VARIANT-PRE-COMPILE.  </p>
<p>The configuration classes of the BswM parameters depend on the supported configuration </p>
<p>variants. For their definitions please see the </p>
<p>BswM_bswmd.arxml</p>
<p> file. </p>
<p><b>6.2 </b></p>
<p><b>Configuration with GENy </b></p>
<p>The  BswM  is  configured  with  the  help  of  the  configuration  tool  GENy.  To  activate  the </p>
<p>configuration view the BswM has to be enabled in the component selection: </p>
<p> </p>
<p> </p>
<p>Figure 6-1 </p>
<p>GENy Component Selection: enable BswM </p>
<p>The BswM is automatically enabled on all ECU channels. </p>
<p><b>6.2.1 </b></p>
<p><b>General Configuration Options </b></p>
<p>This chapter describes the general configuration options of the BswM: </p>
<p> </p>
<p>Figure 6-2 </p>
<p>General Configuration Options </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>51 / 124 </p>
<p>The following table describes the configuration options: </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed </p>
<p>bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>Configuration Variant </p>
<p>Enum </p>
<p><b>Variant 1 </b></p>
<p><b>(Pre-compile </b></p>
<p><b>Configuration) </b></p>
<p>Currently only the pre-compile configuration </p>
<p>variant is supported. </p>
<p>Version Info Api </p>
<p>Boolean </p>
<p>True </p>
<p><b>False </b></p>
<p>En-/ disables the function </p>
<p>BswM_GetVersionInfo()</p>
<p> to get the major, </p>
<p>minor and patch version information. </p>
<p>Dev Error Detect </p>
<p>Boolean </p>
<p>True </p>
<p><b>False </b></p>
<p>If <b>Dev Error Detect </b>is enabled, all </p>
<p>development errors are reported to the </p>
<p>Development Error Tracer (DET), refer to </p>
<p>chapter 3.6. </p>
<p>Software Component </p>
<p>Name </p>
<p>String </p>
<p><b>BswM </b></p>
<p>This name is used as component name </p>
<p>(ShortName) in the generated software </p>
<p>component template. Change this name if you </p>
<p>try to import the BswM components of several </p>
<p>ECUs and have problems with name clashes.</p>
<p><b> </b></p>
<p>Additional application </p>
<p>header file </p>
<p>String </p>
<p>- </p>
<p>Specify the path to a header file which </p>
<p>contains the prototypes for the user condition </p>
<p>functions and user callout functions, if </p>
<p>required. </p>
<p>Main Function Period </p>
<p>Float </p>
<p><b>0.02 </b></p>
<p>This parameter configures the cycle time of </p>
<p>the Communication Manger main function </p>
<p>BswM_MainFunction (in seconds)</p>
<p>. </p>
<p>Dcm Com Control </p>
<p>Boolean </p>
<p>True </p>
<p><b>False </b></p>
<p>En-/ disables the Dcm communication control </p>
<p>modes of the BswM. If enabled it must be </p>
<p>ensured that the Dcm component is available </p>
<p>and enabled and that the Dcm supports the </p>
<p>BswM communication control modes, refer to </p>
<p>[11] and Table 6-2. </p>
<p>Dcm Reset Mode </p>
<p>Booelan </p>
<p>True </p>
<p><b>False </b></p>
<p>En-/ disables the Dcm reset modes of the </p>
<p>BswM. If enabled it must be ensured that the </p>
<p>Dcm component is available and enabled and </p>
<p>that the Dcm supports the BswM reset modes, </p>
<p>refer to [11] and Table 6-2. </p>
<p>Dcm Passive Mode </p>
<p>Boolean </p>
<p>True </p>
<p><b>False </b></p>
<p>En-/ disables the Dcm passive modes of the </p>
<p>BswM. If enabled it must be ensured that the </p>
<p>Dcm component is available and enabled and </p>
<p>that the Dcm supports the BswM passive </p>
<p>modes, refer to [11] and Table 6-2. </p>
<p>Dcm Application Updated </p>
<p>Boolean </p>
<p>True </p>
<p><b>False </b></p>
<p>En-/ disables the Dcm Application Updated </p>
<p>functionality of the BswM. If enabled it must </p>
<p>be ensured that the Dcm component is </p>
<p>available and enabled and that the Dcm </p>
<p>supports the Application Updated Service, </p>
<p>refer to [11]. </p>
<p>Provide as Rte Mode </p>
<p>Switch Notification </p>
<p>Boolean </p>
<p>True </p>
<p><b>False </b></p>
<p>The Dcm Application Updated notification to of </p>
<p>the BswM is provided as Mode Port and can </p>
<p>be used in software components. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>52 / 124 </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed </p>
<p>bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>Create BswM Standard </p>
<p>Rules </p>
<p>- </p>
<p>- </p>
<p>Creates automatically the following </p>
<p>recommended BswM Standard Rules: </p>
<p>- CAN Communication Modes </p>
<p>- Dcm Communication Control Modes </p>
<p>- FlexRay Communication Modes </p>
<p>- NmFiatB and NmFiatC Communication </p>
<p>Modes </p>
<p>- NmFiatB and NmFiatC Communication </p>
<p>Modes </p>
<p>Table 6-1  </p>
<p>General Configuration Options </p>
<p><b>6.2.2 </b></p>
<p><b>BSW Mode Configuration </b></p>
<p>The following figure shows an example view of BSW Modes: </p>
<p> </p>
<p>Figure 6-3 </p>
<p>Example view of BSW Modes and their Mode Request Processing Type </p>
<p>Table 6-2 gives an overview of the available BSW mode indications/requests which can be </p>
<p>used as source mode in the rule configuration: </p>
<p><b>BSW Mode Indication </b></p>
<p><b>Possible Modes </b></p>
<p><b>Description </b></p>
<p>COMM_MODE_INDICATION_ </p>
<p>&lt;channelName&gt; </p>
<p><b>&gt; </b></p>
<p>COMM_NO_COMMUNICATION </p>
<p><b>&gt; </b></p>
<p>COMM_SILENT_COMMUNICATION </p>
<p><b>&gt; </b></p>
<p>COMM_FULL_COMMUNICATION </p>
<p>The ComM notifies the BswM </p>
<p>about a change of its </p>
<p>communication mode. Refer to </p>
<p>[8] for further information about </p>
<p>the ComM modes. </p>
<p>COMM_MODE_PNC&lt;Pnc-index&gt; </p>
<p><b>&gt; </b></p>
<p>COMM_PNC_NO_COMMUNICATION </p>
<p><b>&gt; </b></p>
<p>COMM_PNC_PREPARE_SLEEP </p>
<p><b>&gt; </b></p>
<p>COMM_PNC_READY_SLEEP </p>
<p><b>&gt; </b></p>
<p>COMM_PNC_REQUESTED </p>
<p>The ComM notifies the BswM </p>
<p>about a change of a PNC </p>
<p>mode. Refer to [8] for further </p>
<p>information about the ComM </p>
<p>PNC modes. </p>
<p>CANSM_MODE_INDICATION_ </p>
<p>&lt;channelName&gt; </p>
<p><b>&gt; </b></p>
<p>CANSM_BSWM_BUS_OFF </p>
<p><b>&gt; </b></p>
<p>CANSM_BSWM_NO_ </p>
<p>The CanSM notifies the BswM </p>
<p>about a change of its </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>53 / 124 </p>
<p><b>BSW Mode Indication </b></p>
<p><b>Possible Modes </b></p>
<p><b>Description </b></p>
<p>COMMUNICATION </p>
<p><b>&gt; </b></p>
<p>CANSM_BSWM_FULL_ </p>
<p>COMMUNICATION </p>
<p><b>&gt; </b></p>
<p>CANSM_BSWM_SILENT_ </p>
<p>COMMUNICATION </p>
<p>communication mode. Refer to </p>
<p>[6] for further information about </p>
<p>the CanSM modes. </p>
<p>LINSM_MODE_INDICATION_ </p>
<p>&lt;channelName&gt; </p>
<p> </p>
<p><b>&gt; </b></p>
<p>LINSM_BSWM_NO_COM </p>
<p><b>&gt; </b></p>
<p>LINSM_BSWM_FULL_COM </p>
<p><b>&gt; </b></p>
<p>LINSM_BSWM_RUN_SCHEDULE </p>
<p><b>&gt; </b></p>
<p>LINSM_BSWM_GOTO_SLEEP </p>
<p>The LinSM notifies the BswM </p>
<p>about a change of its </p>
<p>communication mode. Refer to </p>
<p>[5] for further information about </p>
<p>the LinSM modes. </p>
<p>LINSM_CURRENT_SCHEDULE_ </p>
<p>&lt;channelName&gt; </p>
<p><b>&gt; </b></p>
<p>Null_Schedule </p>
<p><b>&gt; </b></p>
<p>&lt;Schedule Table Name&gt; </p>
<p>The LinSM notifies the BswM </p>
<p>about the current active LIN </p>
<p>Schedule Table. The possible </p>
<p>Modes depend on the available </p>
<p>Schedule Tables in the current </p>
<p>configuration. </p>
<p>LINTP_MODE_REQUEST_ </p>
<p>&lt;channelName&gt; </p>
<p><b>&gt; </b></p>
<p>LINTP_MODE_RELEASE </p>
<p><b>&gt; </b></p>
<p>LINTP_MODE_REQUEST </p>
<p><b>&gt; </b></p>
<p>LINTP_MODE_RESPONSE </p>
<p>The LinTp notifies the BswM </p>
<p>about a change of its mode. </p>
<p>Refer to [9] for further </p>
<p>information about the LinTp </p>
<p>modes. </p>
<p>DCM_RESET_MODE_REQUEST </p>
<p><b>&gt; </b></p>
<p>DCM_BOOTLOADER_RESET </p>
<p><b>&gt; </b></p>
<p>DCM_HARD_RESET </p>
<p><b>&gt; </b></p>
<p>DCM_KEY_ON_OFF_RESET </p>
<p><b>&gt; </b></p>
<p>DCM_SOFT_RESET </p>
<p>The Dcm notifies the BswM </p>
<p>about a change of its reset </p>
<p>mode. Refer to [11] for further </p>
<p>information about the Dcm </p>
<p>reset modes. </p>
<p>DCM_COM_MODE_REQUEST_ </p>
<p>&lt;channelName&gt; </p>
<p><b>&gt; </b></p>
<p>DCM_DISABLE_RX_ENABLE_TX_NM </p>
<p><b>&gt; </b></p>
<p>DCM_DISABLE_RX_ENABLE_ </p>
<p>TX_NORM </p>
<p><b>&gt; </b></p>
<p>DCM_DISABLE_RX_ENABLE_ </p>
<p>TX_NORM_NM </p>
<p><b>&gt; </b></p>
<p>DCM_DISABLE_RX_TX_NM </p>
<p><b>&gt; </b></p>
<p>DCM_DISABLE_RX_TX_NORM_NM </p>
<p><b>&gt; </b></p>
<p>DCM_DISABLE_RX_TX_NORMAL </p>
<p><b>&gt; </b></p>
<p>DCM_ENABLE_RX_DISABLE_TX_NM </p>
<p><b>&gt; </b></p>
<p>DCM_ENABLE_RX_DISABLE_ </p>
<p>TX_NORM </p>
<p><b>&gt; </b></p>
<p>DCM_ENABLE_RX_TX_NM </p>
<p><b>&gt; </b></p>
<p>DCM_ENABLE_RX_TX_NORM </p>
<p><b>&gt; </b></p>
<p>DCM_ENABLE_RX_TX_NORM_NM </p>
<p>The Dcm notifies the BswM </p>
<p>about a change of its </p>
<p>communication mode. Refer to </p>
<p>[11] for further information </p>
<p>about the Dcm communication </p>
<p>modes. </p>
<p>FRSM_MODE_INDICATION_ </p>
<p>&lt;channelName&gt; </p>
<p><b>&gt; </b></p>
<p>FRSM_BSWM_HALT_REQ </p>
<p><b>&gt; </b></p>
<p>FRSM_BSWM_HALT_REQ_ </p>
<p>ECU_PASSIVE </p>
<p><b>&gt; </b></p>
<p>FRSM_BSWM_KEYSLOT_ONLY </p>
<p><b>&gt; </b></p>
<p>FRSM_BSWM_KEYSLOT_ONLY_ </p>
<p>ECU_PASSIVE </p>
<p><b>&gt; </b></p>
<p>FRSM_BSWM_ONLINE </p>
<p>The FrSM notifies the BswM </p>
<p>about a change of its mode.  </p>
<p>Refer to [7] for further </p>
<p>information about the FrSM </p>
<p>modes. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>54 / 124 </p>
<p><b>BSW Mode Indication </b></p>
<p><b>Possible Modes </b></p>
<p><b>Description </b></p>
<p><b>&gt; </b></p>
<p>FRSM_BSWM_ONLINE_ECU_ </p>
<p>PASSIVE </p>
<p><b>&gt; </b></p>
<p>FRSM_BSWM_ONLINE_PASSIVE </p>
<p><b>&gt; </b></p>
<p>FRSM_BSWM_ONLINE_PASSIVE </p>
<p>_ECU_PASSIVE </p>
<p><b>&gt; </b></p>
<p>FRSM_BSWM_READY </p>
<p><b>&gt; </b></p>
<p>FRSM_BSWM_READY_ECU_PASSIVE </p>
<p><b>&gt; </b></p>
<p>FRSM_BSWM_STARTUP </p>
<p><b>&gt; </b></p>
<p>FRSM_BSWM_STARTUP_ECU_ </p>
<p>PASSIVE </p>
<p><b>&gt; </b></p>
<p>FRSM_BSWM_WAKEUP </p>
<p><b>&gt; </b></p>
<p>FRSM_BSWM_WAKEUP_ECU_ </p>
<p>PASSIVE </p>
<p>NM_MODE_INDICATION_ </p>
<p>&lt;channelName&gt; </p>
<p><b>&gt; </b></p>
<p>NM_STATE_BUS_SLEEP </p>
<p><b>&gt; </b></p>
<p>NM_STATE_NORMAL_OPERATION </p>
<p><b>&gt; </b></p>
<p>NM_STATE_PREPARE_BUS_SLEEP </p>
<p><b>&gt; </b></p>
<p>NM_STATE_READY_SLEEP </p>
<p><b>&gt; </b></p>
<p>NM_STATE_WAIT_CHECK_ACTIVATION </p>
<p><b>&gt; </b></p>
<p>NM_STATE_WAIT_NETWORK_STARTUP </p>
<p><b>&gt; </b></p>
<p>NM_STATE_REPEAT_MESSAGE </p>
<p><b>&gt; </b></p>
<p>NM_STATE_SYNCHRONIZE </p>
<p><b>&gt; </b></p>
<p>NM_STATE_BUS_OFF </p>
<p>The NmOsek, NmFiatB or </p>
<p>NmFiatC notifies the BswM </p>
<p>about a change of its mode.  </p>
<p>Refer to [14] for further </p>
<p>information about the NmFiatB </p>
<p>modes. </p>
<p>Refer to [15] for further </p>
<p>information about the NmFiatC </p>
<p>modes. </p>
<p> </p>
<p>LINSM_SCHEDULE_END_&lt;chann</p>
<p>elName&gt; </p>
<p><b>&gt; </b></p>
<p>schedule table identifier </p>
<p>The LinSM notifies the BswM </p>
<p>about the end of the schedule </p>
<p>table. </p>
<p> </p>
<p>Table 6-2  </p>
<p>Overview BSW Mode Indications </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>The LinSM_SCHEDULE_END_&lt;channelName&gt; notifications can only be used if the </p>
<p>schedule table end notification is enabled inside the LinIf module configuration and the </p>
<p>LinSM schedule table configuration. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>Mode Request </p>
<p>Processing Type </p>
<p>Enum </p>
<p><b>BSWM_IMMEDIATE </b></p>
<p>BSWM_DEFERRED </p>
<p>Specify Mode Request Processing Type: </p>
<p>BSWM_IMMEDIATE: all rules which contain </p>
<p>this BSW Mode in at least one condition will </p>
<p>be arbitrated immediately upon the </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>55 / 124 </p>
<p><b>Attribute Name </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>occurrence of the appropriate Generic Mode </p>
<p>Trigger Function. The requested Mode State </p>
<p>will be considered immediately. </p>
<p>BSWM_DEFERRED: all rules which contain </p>
<p>this mode in at least one condition will be </p>
<p>arbitrated during cyclically during the </p>
<p>execution of the </p>
<p>BswM_MainFunction()</p>
<p>. </p>
<p>Table 6-3  </p>
<p>Configuration parameter for BSW Modes </p>
<p><b>6.2.3 </b></p>
<p><b>Generic Mode Configuration </b></p>
<p>A Generic Mode will be created by right mouse click on and <b>Add Generic Mode</b>: </p>
<p> </p>
<p>Figure 6-4 </p>
<p>Addition of a Generic Mode </p>
<p>A Generic Mode has the following general configuration parameter: </p>
<p> </p>
<p>Figure 6-5 </p>
<p>Generic Mode Configuration Parameter </p>
<p><b>Attribute Name </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>String </p>
<p><b>GenMode__&lt;index&gt; </b></p>
<p>Optional: specify a name for the mode.</p>
<p><b> </b></p>
<p>Generic Mode Initial </p>
<p>State </p>
<p>Integer </p>
<p><b>0 </b></p>
<p>Specify the Initial State. </p>
<p>Generic Mode Request </p>
<p>Processing Type </p>
<p>Enum </p>
<p><b>BSWM_IMMEDIATE </b></p>
<p>BSWM_DEFERRED </p>
<p>Specify Mode Request Processing Type: </p>
<p>BSWM_IMMEDIATE: all rules which contain </p>
<p>this Generic Mode in at least one condition </p>
<p>will be arbitrated immediately upon the </p>
<p>occurrence of the appropriate Generic Mode </p>
<p>Trigger Function. The requested Mode State </p>
<p>will be considered immediately. </p>
<p>BSWM_DEFERRED: all rules which contain </p>
<p>this mode in at least one condition will be </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>56 / 124 </p>
<p><b>Attribute Name </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>arbitrated during cyclically during the </p>
<p>execution of the </p>
<p>BswM_MainFunction()</p>
<p>. </p>
<p>Generic Mode Trigger </p>
<p>Function </p>
<p>String </p>
<p><b>* </b></p>
<p>Specify the Generic Mode Trigger Function </p>
<p>Name: </p>
<p>Rte is used: the appropriate interfaces are </p>
<p>provided by the Rte. </p>
<p>Rte is not used: the file </p>
<p>BswM_Cfg.h</p>
<p> </p>
<p>contains the appropriate extern declaration of </p>
<p>this function. </p>
<p>Use Rte </p>
<p>Boolean </p>
<p><b>FALSE </b></p>
<p>TRUE </p>
<p>If <b>Use Rte </b>is enabled the BswM generates a </p>
<p>SWC template file which contains the </p>
<p>provided C/S Port interface description to </p>
<p>change the Generic Mode State. </p>
<p>Table 6-4  </p>
<p>Generic Mode general configuration parameter </p>
<p><b>6.2.4 </b></p>
<p><b>Timer Configuration </b></p>
<p>The  BswM  provides  the  possibility  to  configure  timers  as  AUTOSAR  extension.  These </p>
<p>timers  may  be  used  within  the  rules  as  conditions  (see  chapter  6.2.5.1)  and  as  actions </p>
<p>(see chapter 6.2.5.2). </p>
<p>An  action  that  a  timer  shall  be  started  or  stopped  can  be  added  to  a  rule  (see  chapter </p>
<p>6.2.5.2.2 “Action Timer Control” for further details). </p>
<p>A rule can have conditions that may evaluate the state (expired, started or stopped) of the </p>
<p>timer. A timer has three possible states: </p>
<p><b>&gt; </b></p>
<p>BSWM_TMR_EXPIRED </p>
<p><b>&gt; </b></p>
<p>BSWM_TMR_STARTED </p>
<p><b>&gt; </b></p>
<p>BSWM_TMR_STOPPED </p>
<p>A  timer  is added  to  the  configuration  of  the  BswM  by  right  mouse  click  on Timer  in  the </p>
<p>BswM configuration view: </p>
<p> </p>
<p>Figure 6-6  </p>
<p> Adding a Timer to the configuration of the BswM </p>
<p>Figure  6-6  shows  the  general  configuration  options  of  the  BswM  timers. A  timer  has  a </p>
<p>unique name which either is the default name <b>Timer_&lt;number&gt; </b>or the name the user has </p>
<p>configured.  </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>57 / 124 </p>
<p>Furthermore,  the  timer  value  in  milliseconds  can  be  defined.  This  parameter  specifies </p>
<p>when does a timer expires changing its state to “BSWM_TMR_EXPIRED” and has thus </p>
<p>influence in the actions that are executed.  </p>
<p> </p>
<p> </p>
<p> </p>
<p>Figure 6-7  </p>
<p>Configuration of a Timer </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>58 / 124 </p>
<p><b>6.2.5 </b></p>
<p><b>Rule Configuration </b></p>
<p>For a proper BswM configuration at least one rule must be created. A rule is added to the </p>
<p>BswM configuration by right mouse click on <b>Rules </b>in the BswM configuration view: </p>
<p> </p>
<p>Figure 6-8 </p>
<p>Adding a rule to the BswM configuration </p>
<p>Figure 6-9 shows the general configuration options of the BswM rules. A rule has a unique </p>
<p>name  which  either  is  the  default  name <b> Rule_&lt;number&gt; </b> or  the  name  the  user  has </p>
<p>configured.  </p>
<p>Furthermore it can be defined which state a rule has after (re-)initialization. This parameter </p>
<p>specifies how a rule is treated when it is evaluated the first time after (re-)initialization and </p>
<p>has thus influence on which actions are executed.  </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>59 / 124 </p>
<p> </p>
<p>Figure 6-9 </p>
<p>Rule Naming and initial state </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>The <b>Rule Initialization State </b>parameter has only influence if an action list of this rule </p>
<p>uses <b>ActionListExecution </b>type <b>BSWM_TRIGGER</b>, please refer to chapter Action List </p>
<p>Execution Type for details. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>String </p>
<p><b>Rule&lt;number&gt; </b></p>
<p>user defined string </p>
<p>The user can define a meaningful name </p>
<p>for each rule.  </p>
<p>The name must be unique for each rule </p>
<p>and must not contain spaces or </p>
<p>characters which do not belong to the </p>
<p>ANSI C Standard.  </p>
<p>Rule Initialization State </p>
<p>Enum </p>
<p><b>BSWM_UNDEFINED </b></p>
<p>BSWM_TRUE </p>
<p>BSWM_FALSE </p>
<p>Specifies the rule state after (re-) </p>
<p>initialization. </p>
<p>Table 6-5  </p>
<p>General Rule Configuration Options </p>
<p><b>6.2.5.1 </b></p>
<p><b>Configuration of Rule Conditions </b></p>
<p>A rule needs at least one condition which is added to the rule configuration by right mouse </p>
<p>click on the rule: </p>
<p> </p>
<p>Figure 6-10 </p>
<p>Adding a condition to a rule </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>60 / 124 </p>
<p>Figure 6-11 shows the configuration view of a condition which consists of the source mode </p>
<p>and the requested mode and the operator of this condition: </p>
<p> </p>
<p>Figure 6-11 </p>
<p>Configuration view of a rule condition </p>
<p>Description of the condition configuration parameter: </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>Mode </p>
<p>Enum </p>
<p><b>* </b></p>
<p>&lt; BSW Mode name &gt; </p>
<p>&lt; Generic Mode name &gt; </p>
<p>&lt; Previous Mode name &gt; </p>
<p>Specifies the BSW Mode, the Generic </p>
<p>Mode or the Previous Mode which </p>
<p>shall be used for comparison in this </p>
<p>condition. </p>
<p>Relational Operator </p>
<p>Enum </p>
<p><b>EQUAL </b></p>
<p>NOT_EQUAL </p>
<p>Specifies the operator which is used </p>
<p>for comparison of SourceMode to </p>
<p>RequestedMode. </p>
<p>Mode State </p>
<p>Enum </p>
<p><b>* </b></p>
<p><b>&lt; Possible Mode States </b></p>
<p><b>the Mode can have  &gt; </b></p>
<p>Specifies the Mode State which shall </p>
<p>be used for comparison in this </p>
<p>condition. </p>
<p>Table 6-6  </p>
<p>Condition Configuration Parameter </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>A Rule must contain at least one condition which uses either a BSW Mode or a Generic </p>
<p>Mode. A Rule which has only one condition which uses a previous Mode (e.g. </p>
<p>FRSM_PREVIOUS_MODE) is not allowed.  </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>61 / 124 </p>
<p>Additionally a user condition can be added: </p>
<p> </p>
<p> </p>
<p>Figure 6-12 </p>
<p>Adding a User Condition </p>
<p>The user condition configuration view looks like as follows: </p>
<p> </p>
<p>Figure 6-13 </p>
<p>Configuration view of a user condition </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>User Condition </p>
<p>String </p>
<p><b>* </b></p>
<p> </p>
<p>Specify the string of the function or </p>
<p>variable which shall be used in this </p>
<p>condition. </p>
<p>The extern declaration of the used </p>
<p>function/variable must be provided via </p>
<p>an Application Header File, refer to </p>
<p>chapter 6.2.1. </p>
<p>Table 6-7  </p>
<p>User Condition Configuration Parameter </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>62 / 124 </p>
<p>If a rule has multiple conditions the operator can be configured for the operation of these </p>
<p>conditions: </p>
<p> </p>
<p>Figure 6-14 </p>
<p>Configuration of the Operator of multiple conditions </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>Operator </p>
<p>Enum </p>
<p><b>AND </b></p>
<p>OR </p>
<p>Specifies the operator which shall be </p>
<p>used for evaluation of the rule </p>
<p>conditions. </p>
<p>Table 6-8  </p>
<p>Condition Operation Parameter  </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>63 / 124 </p>
<p><b>6.2.5.2 </b></p>
<p><b>Configuration of Rule Action Lists </b></p>
<p>A  rule  has  either  the  evaluation  result <b> true </b> or <b> false</b>,  for  each  possible  result  value  an </p>
<p>action list can created by right mouse click on the rule, the so called <b>Action List True </b>or </p>
<p><b>Action List False</b>: </p>
<p> </p>
<p> </p>
<p>Figure 6-15 </p>
<p>Adding Action Lists to a Rule </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>64 / 124 </p>
<p><b>6.2.5.2.1 </b></p>
<p><b>Action List Execution Type </b></p>
<p>An Action List has the configuration parameter <b>ActionListExecution </b>which specifies if the </p>
<p>action list will be executed every time when the rule arbitration has the appropriate result </p>
<p>or only when the arbitration result is not equal to the result of the last rule arbitration:   </p>
<p> </p>
<p> </p>
<p>Figure 6-16 </p>
<p>Action List Execution Type </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>Action List Execution </p>
<p>Type </p>
<p>Enum </p>
<p><b>BSWM_TRIGGER </b></p>
<p>BSWM_CONDITION </p>
<p>Specifies the execution of an action </p>
<p>list: </p>
<p>BSWM_TRIGGER: </p>
<p>action list will only be executed if the </p>
<p>rule arbitration result changes. </p>
<p>BSWM_CONDITION: </p>
<p>action list will be executed every time </p>
<p>the rule arbitration has the appropriate </p>
<p>result. </p>
<p>Table 6-9  </p>
<p>Action List Execution Type Configuration Parameter </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>65 / 124 </p>
<p><b>6.2.5.2.2 </b></p>
<p><b>Adding Actions to an Action List </b></p>
<p>By right mouse click on an action list an action can be added: </p>
<p> </p>
<p>Figure 6-17 </p>
<p>Adding Actions to an Action List </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>66 / 124 </p>
<p><b>&gt; </b></p>
<p>Action Pdu Router Control </p>
<p> </p>
<p>Figure 6-18 </p>
<p>Action Pdu Router Control </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>Pdu Routing Path Control </p>
<p>Type </p>
<p>Enum </p>
<p><b>DISABLE_PDU_ </b></p>
<p><b>ROUTING_PATH </b></p>
<p>ENABLE_PDU_ </p>
<p>ROUTING_PATH </p>
<p>This action enables/disables a PduR </p>
<p>Routing Path. </p>
<p>Used API:  </p>
<p>PduR_EnableRouting() </p>
<p>PduR_DisableRouting() </p>
<p>For further information refer to [10]. </p>
<p>Handle Name of the Pdu </p>
<p>Routing Path </p>
<p>String </p>
<p><b>* </b></p>
<p>Specify the Handle for the Pdu </p>
<p>Routing Path which shall be </p>
<p>enabled/disabled.  </p>
<p>Table 6-10  </p>
<p>Action Pdu Router Control Configuration Parameter </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>67 / 124 </p>
<p><b>&gt; </b></p>
<p>Action Nm Communication Control </p>
<p> </p>
<p>Figure 6-19 </p>
<p>Action Nm Communication Control </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>Nm Control Type </p>
<p>Enum </p>
<p><b>DISABLE_NM_COM </b></p>
<p>ENABLE_NM_COM </p>
<p>This action enables/disables Nm </p>
<p>Communication. </p>
<p>Used API:  </p>
<p>Nm_EnableCommunication() </p>
<p>Nm_DisableCommunication() </p>
<p>For further information refer to [12]. </p>
<p>Channel </p>
<p>Object </p>
<p><b>* </b></p>
<p>&lt; Channel Name &gt; </p>
<p>Specify the channel where the Nm </p>
<p>communication shall be </p>
<p>enabled/disabled.  </p>
<p>Table 6-11  </p>
<p>Action Nm Communication Control Configuration Parameter </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>68 / 124 </p>
<p><b>&gt; </b></p>
<p>Action Pdu Group Switch </p>
<p> </p>
<p>Figure 6-20 </p>
<p>Action Pdu Group Switch </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>Pdu Group Control Type </p>
<p>Enum </p>
<p><b>BSWM_PDU_ </b></p>
<p><b>GROUP_START </b></p>
<p>BSWM_PDU_ </p>
<p>GROUP_STOP </p>
<p>Specify if the Pdu Group shall be </p>
<p>started/stopped. </p>
<p>Used API:  </p>
<p>Com_IpduGroupStart () </p>
<p>Com_IpduGroupStop () </p>
<p>For further information refer to [13]. </p>
<p>Pdu Group Handle </p>
<p>Object </p>
<p><b>* </b></p>
<p>&lt; Pdu Group Handle </p>
<p>Name &gt; </p>
<p>Specify the Pdu Group which shall be </p>
<p>started/stopped.  </p>
<p>Pdu Group </p>
<p>Reinitialization </p>
<p>Boolean </p>
<p>Enabled </p>
<p><b>Disabled </b></p>
<p>If enabled the Pdu Group signal </p>
<p>values are initialized upon start. </p>
<p>This parameter has only influence if </p>
<p>BswMPduGroupType is </p>
<p><b>BSWM_PDU_GROUP_START</b>. </p>
<p>Table 6-12  </p>
<p>Action Pdu Group Switch Configuration Parameter </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>This Action shall only be used for the bus types CAN and FlexRay, furthermore it must </p>
<p>be ensured that the Tx and Rx Pdu Group are disabled in the CanSM and FrSM </p>
<p>configuration. </p>
<p>For bus type LIN the LinSM still handles the Pdu Groups.   </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>69 / 124 </p>
<p><b>&gt; </b></p>
<p>Action Deadline Monitoring </p>
<p> </p>
<p>Figure 6-21 </p>
<p>Action Deadline Monitoring </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>Pdu Group Handle </p>
<p>Object </p>
<p><b>* </b></p>
<p>&lt; Pdu Group Handle </p>
<p>Name &gt; </p>
<p>Specify the Pdu Group for which the </p>
<p>deadline monitoring shall be </p>
<p>enabled/disabled. </p>
<p>Deadline Monitoring </p>
<p>Control Type </p>
<p>Boolean </p>
<p><b>ENABLE_RX_DM </b></p>
<p>DISABLE_RX_DM </p>
<p>Specify if the deadline monitoring </p>
<p>shall be enabled/disabled. </p>
<p>Used API: </p>
<p>Com_EnableReceptionDM () </p>
<p>Com_DisableReceptionDM () </p>
<p>For further information refer to [13]. </p>
<p>Table 6-13  </p>
<p>Action Deadline Monitoring Configuration Parameter </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>70 / 124 </p>
<p><b>&gt; </b></p>
<p>Action Schedule Table Switch </p>
<p> </p>
<p>Figure 6-22 </p>
<p>Action Schedule Table Switch </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>Channel </p>
<p>Object </p>
<p><b>* </b></p>
<p>&lt; Channel Name &gt; </p>
<p>Specify the channel where the </p>
<p>schedule table shall be changed.  </p>
<p>Schedule Table Handle </p>
<p>Object </p>
<p><b>* </b></p>
<p>&lt; Schedule Handle </p>
<p>Name &gt; </p>
<p>Specify the schedule table which shall </p>
<p>be requested. </p>
<p>Used API: </p>
<p>LinSM_ScheduleRequest() </p>
<p>For further information refer to [5].  </p>
<p>Abort Action List On Fail </p>
<p>Boolean </p>
<p><b>false </b></p>
<p>true </p>
<p>This parameter specifies if the Action </p>
<p>List Execution shall be abort or not if </p>
<p>LinSM_ScheduleRequest() </p>
<p>returns E_NOT_OK. </p>
<p>Table 6-14  </p>
<p>Action Schedule Table Switch Configuration Parameter </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>71 / 124 </p>
<p><b>&gt; </b></p>
<p>Action User Callout </p>
<p> </p>
<p>Figure 6-23 </p>
<p>Action User Callout </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>ActionUserCallout </p>
<p>String </p>
<p><b>* </b></p>
<p>Specify the name of the user callout </p>
<p>function. </p>
<p>An external declaration of this function </p>
<p>must be provided via the application </p>
<p>header file on the main configuration </p>
<p>page (refer to chapter 6.2.1). </p>
<p>Table 6-15  </p>
<p>Action Schedule Table Switch Configuration Parameter </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>72 / 124 </p>
<p><b>&gt; </b></p>
<p>Action Rule </p>
<p> </p>
<p>Figure 6-24 </p>
<p>Action Rule </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>Rule </p>
<p>Object </p>
<p><b>* </b></p>
<p>&lt; Rule Name &gt; </p>
<p>Specify the reference to the Rule </p>
<p>which shall be arbitrated within this </p>
<p>Action List.  </p>
<p>Abort Action List On Fail </p>
<p>Boolean </p>
<p><b>false </b></p>
<p>true </p>
<p>If the configured Rule fails (means an </p>
<p>Action List of this Rule is aborted </p>
<p>because an Action failed) the Action </p>
<p>List execution is aborted.  </p>
<p>Table 6-16  </p>
<p>Action Schedule Table Switch Configuration Parameter </p>
<p><b>&gt; </b></p>
<p>Action Timer Control </p>
<p> </p>
<p>Figure 6-25 </p>
<p>Action Timer Control </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>Timer </p>
<p>Object </p>
<p><b>* </b></p>
<p>&lt; Timer Name &gt; </p>
<p>Specify the Timer for which the timer </p>
<p>action shall be performed. </p>
<p>Timer Action </p>
<p>Enum </p>
<p><b>BSWM_TIMER_STARTED </b></p>
<p>BSWM_TIMER_STOPPED</p>
<p> </p>
<p>Specify if the timer shall be started or </p>
<p>stopped.  </p>
<p>Table 6-17  </p>
<p>Action Timer Control Configuration Parameter </p>
<p><b>&gt; </b></p>
<p>Action Mode Notification </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>73 / 124 </p>
<p> </p>
<p>Figure 6-26 </p>
<p>Action Mode Notification </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>Default value is typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>Generic Mode </p>
<p>Object </p>
<p><b>* </b></p>
<p>&lt; Generic Mode </p>
<p>Name &gt; </p>
<p>Specify the Generic Mode for which </p>
<p>the notification shall be called. </p>
<p>Mode State </p>
<p>Object </p>
<p><b>* </b></p>
<p>&lt; Mode Sate Name &gt; </p>
<p>Specify if the Mode State which shall </p>
<p>be notified.  </p>
<p>Table 6-18  </p>
<p>Action Mode Notification Configuration Parameter </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>Mode Notifications are only supported for Generic Modes which handled via the Rte </p>
<p>API. (Refer to 6.2.3 Generic Mode Configuration for details) </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p> </p>
<p><b>6.2.5.3 </b></p>
<p><b>Configuration of the Identity Assignment </b></p>
<p>For  multiple  identities  use-cases  the  BswM  allows  the  user  to  configure  relevance  of  a </p>
<p>Rule for the available identities: </p>
<p> </p>
<p>Figure 6-27 </p>
<p>Configuration of the Identity Assignment </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>74 / 124 </p>
<p>The BswM automatically detects all available identities and displays them for each Rule in </p>
<p>the Identity Assignment view. If a Rule is created it is assigned to all identities per default. </p>
<p>If  a  Rule  is  only  relevant  for  specific  identities  the  user  can  uncheck  the  appropriate </p>
<p>checkbox. </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Example </b></p>
<p>Here is an example to show the usage of the Identity Assignment: </p>
<p>Configuration: </p>
<p><b>&gt; </b></p>
<p>Two channels </p>
<p><b>&gt; </b></p>
<p>A BswM Rule “Rule_Example” which uses BSW Source Modes of both </p>
<p>channels in its conditions </p>
<p><b>&gt; </b></p>
<p>Two identities which have the following channel assignment: </p>
<p><b> </b></p>
<p><b>Identity 0 </b></p>
<p><b>Identity 1 </b></p>
<p>Channel 0 </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>Channel 1 </p>
<p></p>
<p> </p>
<p> </p>
<p>Table 6-19  </p>
<p>Example Identity-Channel Assignment </p>
<p>If “Identity 0” is active there is no problem to arbitrate “Rule_Example” because </p>
<p>both channels are active and therefore the used BSW Source Modes in the </p>
<p>Rule conditions have correct values. </p>
<p>If “Identity 1” is active it makes no sense to arbitrate “Rule_Example” because </p>
<p>only Channel 0 is active and the used Source Modes of Channel 1 don’t have </p>
<p>correct values because this channel is not active. So the arbitration result will </p>
<p>never be correct. </p>
<p>To prevent the arbitration of “Rule_Example” when “Identity 1” is active the user </p>
<p>must uncheck the checkbox for this Identity in the Rule Configuration Identity </p>
<p>Assignment.    </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p>   </p>
<p>  </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>75 / 124 </p>
<p><b>7 </b></p>
<p><b>Use Cases of BSWM </b></p>
<p>This chapter describes use cases of the BswM.  </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>The configuration of the BSWM use cases often depends on your system and </p>
<p>application. Therefore the following descriptions are rather a guide. Consider that most </p>
<p>of the recommended Use Cases can be configured automatically via the “Create BswM </p>
<p>Standard Rules” Button, refer to Table 6-1. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p>The following Use Cases are described in this chapter </p>
<p><b>&gt; </b></p>
<p><b>CAN Communication Modes </b>more </p>
<p>(mandatory, can be created automatically via the “Create BswM Standard Rules” </p>
<p>Button, refer to Table 6-1) </p>
<p><b>&gt; </b></p>
<p><b>DCM Communication Control Modes </b>more </p>
<p>(mandatory if you have to support Communication Control service, can be created </p>
<p>automatically via the “Create BswM Standard Rules” Button, refer to Table 6-1) </p>
<p><b>&gt; </b></p>
<p><b>DCM Reset Modes </b>more </p>
<p>(mandatory if you have to support DCM Reset service) </p>
<p><b>&gt; </b></p>
<p><b>LIN Communication Modes </b>more </p>
<p>(depends on your application) </p>
<p><b>&gt; </b></p>
<p><b>LIN TP Modes </b>more </p>
<p>(depends on your application) </p>
<p><b>&gt; </b></p>
<p><b>FlexRay Communication Modes </b>more </p>
<p>(mandatory if you use FlexRay, can be created automatically via the “Create BswM </p>
<p>Standard Rules” Button, refer to Table 6-1) </p>
<p><b>&gt; </b></p>
<p><b>NmFiatB Communication Modes </b>more </p>
<p>(mandatory if you use NmFiatB, can be created automatically via the “Create BswM </p>
<p>Standard Rules” Button, refer to Table 6-1). </p>
<p><b>&gt; </b></p>
<p><b>NmFiatC Communication Modes </b>more </p>
<p>(mandatory if you use NmFiatC, can be created automatically via the “Create BswM </p>
<p>Standard Rules” Button, refer to Table 6-1). </p>
<p><b>&gt; </b></p>
<p><b>Partial Network Cluster Modes </b>more </p>
<p>(depends on the availability of the Partial Network Feature). </p>
<p><b>7.1 </b></p>
<p><b>CAN Communication Modes </b></p>
<p>The  CanSM  notifies  the  BswM  about  its  current  state  via  the  mode  indication  function </p>
<p><b>CANSM_MODE_INDICATION_&lt;channel-name&gt; </b>which can be used as a trigger for mode </p>
<p>arbitration  and  mode  control. Additionally  the  BswM  provides  the  value  of  the  previous </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>76 / 124 </p>
<p>CanSM state which helps to design rules for specific state transitions.  Figure 7-1 shows </p>
<p>the possible CanSM states: </p>
<p> </p>
<p> </p>
<p>Figure 7-1 </p>
<p>CanSM communication modes </p>
<p>The arrows in Figure 7-1 mark the possible CanSM mode indications which can be used </p>
<p>as a condition for a specific rule. So it is possible to design rules for any state transition by </p>
<p>using the condition <b>CANSM_MODE_INDICATION_&lt;channel-name&gt; </b>as source mode and </p>
<p>the appropriate CanSM state as requested mode. Furthermore another condition can be </p>
<p>added </p>
<p>which </p>
<p>checks </p>
<p>the </p>
<p>previous </p>
<p>CanSM </p>
<p>state, </p>
<p>the </p>
<p>source </p>
<p>mode </p>
<p>parameter </p>
<p>is </p>
<p><b>CANSM_PREVIOUS_MODE_&lt;channel-name&gt;</b>. </p>
<p>Figure </p>
<p>7-1 </p>
<p>contains </p>
<p>the </p>
<p>proposed </p>
<p><b>stm CAN states</b></p>
<p><b>CANSM_BSWM_FULL_COMMUNICATION</b></p>
<p><b>CANSM_BSWM_BUS_OFF</b></p>
<p><b>CANSM_BSWM_SILENT_COMMUNICATION</b></p>
<p><b>CANSM_BSWM_NO_COMMUNICATION</b></p>
<p>Rx on, Tx on, DM on</p>
<p>Rx on, Tx off, DM off</p>
<p>Rx on, Tx off, DM off</p>
<p>Rx off, Tx off, DM off</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>77 / 124 </p>
<p>communication states (Rx on/off, Tx on/off, DM on/off) for each CanSM state, according to </p>
<p>this proposal the specific action lists for each transition rule can be created.  </p>
<p>As Figure 7-1 shows Tx and DM are in the same state synchronously: the state is <b>on </b>in </p>
<p>CanSM  mode  CANSM_BSWM_FULL_COMMUNICATION  and <b> off </b> in  all  other  CanSM </p>
<p>modes. So the following rule can be defined for Tx and DM: </p>
<p><b>&gt; </b></p>
<p><b>STEP 1</b>: Chose the mode request processing type <b>BSWM_IMMEDIATE </b>for the </p>
<p>CanSM mode indication, this ensures that the appropriate actions are executed </p>
<p>immediately upon change of the CanSM mode: </p>
<p> </p>
<p>Figure 7-2 </p>
<p>Example mode request processing type “BSWM_IMMEDIATE” </p>
<p><b>&gt; </b></p>
<p><b>STEP 2</b>: Create the rules <b>Switch_Tx_DM </b>and <b>Switch_Rx </b>and chose the value </p>
<p><b>BSWM_FALSE </b>for the <b>Rule Initialization State </b>parameter. This ensures that the rule </p>
<p>actions are only executed when the rule is evaluated the first time to result true: </p>
<p> </p>
<p>Figure 7-3 </p>
<p>Example rule initial state </p>
<p><b>&gt; </b></p>
<p><b>STEP 3</b>: Configure the rule conditions: </p>
<p> </p>
<p>Figure 7-4 </p>
<p>Example rule conditions for Tx and DM </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>78 / 124 </p>
<p> </p>
<p>Figure 7-5 </p>
<p>Example rule conditions for Rx </p>
<p>The conditions of rule <b>Switch_Tx_DM </b>shown in Figure 7-4 shall have the following effect: </p>
<p><b>&gt; </b></p>
<p>Tx and DM are only allowed to be switched on if the CanSM is in state </p>
<p><b>CANSM_BSWM_FULL_COMMUNICATION </b></p>
<p><b>&gt; </b></p>
<p>If the evaluation result of this rule is true Tx and DM are switched on, if it is false Tx </p>
<p>and DM are switched off </p>
<p>The conditions of rule <b>Switch_Rx </b>shown in Figure 7-5 shall have the following effect: </p>
<p><b>&gt; </b></p>
<p>Rx is only allowed to be switched on if the CanSM is not in state </p>
<p><b>CANSM_BSWM_NO_COMMUNICATION </b></p>
<p><b>&gt; </b></p>
<p>If the evaluation result of this rule is true Rx is switched on, if it is false Rx is switched </p>
<p>off </p>
<p><b>&gt; </b></p>
<p><b>STEP 4</b>: Configure the action list execution type to <b>BSWM_TRIGGER </b>which has the </p>
<p>effect that the action list is only executed when the evaluation result of the rule has </p>
<p>changed and not every time the rule is evaluated which prevents redundant execution </p>
<p>of the actions: </p>
<p> </p>
<p>Figure 7-6 </p>
<p>Example Action List Execution Type </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>79 / 124 </p>
<p><b>&gt; </b></p>
<p><b>STEP 5</b>: specify the action lists:  </p>
<p> </p>
<p>Figure 7-7 </p>
<p>Action List True for rule Switch_Rx </p>
<p>Figure 7-7 shows the Action List True for rule <b>Switch_Rx </b>which contains the action <b>Pdu </b></p>
<p><b>Group Switch </b>with type <b>BSWM_PDU_GROUP_START </b>and the Pdu group handle for the </p>
<p>Rx Pdu Group. The BswMPduGroupSwitchReinit parameter defines if the signal values </p>
<p>shall be initialized or not. </p>
<p> </p>
<p>Figure 7-8 </p>
<p>Action List False for rule “Switch_Rx” </p>
<p>Figure 7-8 shows the Action List False for rule <b>Switch_Rx </b>which contains the action <b>Pdu </b></p>
<p><b>Group Switch </b>with type <b>BSWM_PDU_GROUP_STOP </b>and the Pdu group handle for the </p>
<p>Rx Pdu Group. The BswMPduGroupSwitchReinit parameter has no influence in case of </p>
<p>stopping the Pdu group. </p>
<p> </p>
<p> </p>
<p>Figure 7-9 </p>
<p>Action List True for rule “Switch_Tx_DM” </p>
<p>Figure 7-9 shows Action List True for rule <b>Switch_Tx_DM </b>which contains the action <b>Pdu </b></p>
<p><b>Group Switch </b>with type <b>BSWM_PDU_GROUP_START </b>and the Pdu group handle for the </p>
<p>Tx Pdu Group. The second action is to enable the <b>Deadline Monitoring </b>for the Rx Pdu </p>
<p>Group. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>80 / 124 </p>
<p> </p>
<p>Figure 7-10 </p>
<p>Action List False for rule “Switch_Tx_DM” </p>
<p>Figure  7-10  shows  the Action  List  False  for  rule <b> Switch_Tx_DM</b>,  the  Tx  Pdu  Group  is </p>
<p>stopped and the Rx Deadline Monitoring is disabled. </p>
<p>If Dcm communication control is used the rules have to be extended as described in the </p>
<p>following tables: </p>
<p><b>7.1.1 </b></p>
<p><b>Rule Switch_Tx_DM </b></p>
<p>The following table contains the recommended configuration parameter: </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>Switch_Tx_DM </p>
<p>Name of the Rule</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE, this and </p>
<p>Action List Execution Type </p>
<p><b>BSWM_TRIGGER </b>ensure </p>
<p>that the Action List True is </p>
<p>not executed until the </p>
<p>evaluation of the </p>
<p>conditions, results in </p>
<p>BSWM_TRUE. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>CANSM_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>CANSM_BSWM_FULL_COMMUNICATION </p>
<p>Tx and DM are only </p>
<p>allowed to be on in state </p>
<p>CANSM_BSWM_FULL_ </p>
<p>COMMUNICATION. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 2 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_TX_NORM_NM </p>
<p>This Dcm Mode State </p>
<p>must not forbid Tx. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 3 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_TX_NORMAL </p>
<p>This Dcm Mode State </p>
<p>must not forbid Tx. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>81 / 124 </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 4 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_ENABLE_RX_DISABLE_TX_NORM_NM </p>
<p>This Dcm Mode State </p>
<p>must not forbid Tx. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 5 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_ENABLE_RX_DISABLE_TX_NORM </p>
<p>This Dcm Mode State </p>
<p>must not forbid Tx. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, start Tx Pdu Group </p>
<p><b>&gt; </b></p>
<p>Enable Deadline Monitoring for Rx Pdu </p>
<p>Group </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>result changes from false </p>
<p>to true. </p>
<p>Action List False </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, stop Tx Pdu Group </p>
<p><b>&gt; </b></p>
<p>Disable Deadline Monitoring for Rx Pdu </p>
<p>Group </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>result changes from true to </p>
<p>false. </p>
<p>Table 7-1  </p>
<p>Configuration of rule for starting and stopping Tx and DM for CAN with Dcm Com Control </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>82 / 124 </p>
<p><b>7.1.2 </b></p>
<p><b>Rule Switch_Rx </b></p>
<p>The following table contains the recommended configuration parameter: </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>Switch_Rx </p>
<p>Name of the Rule</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE, this and </p>
<p>Action List Execution Type </p>
<p><b>BSWM_TRIGGER </b>ensure </p>
<p>that the Action List True is </p>
<p>not executed until the </p>
<p>evaluation of the </p>
<p>conditions, results in </p>
<p>BSWM_TRUE. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>CANSM_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>CANSM_BSWM_NO_COMMUNICATION </p>
<p>Rx is not allowed in state </p>
<p>CANSM_BSWM_NO_ </p>
<p>COMMUNICATION. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 2 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_ENABLE_TX_NORM </p>
<p>This Dcm Mode State </p>
<p>must not forbid Rx. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 3 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_ENABLE_TX_NORM_NM </p>
<p>This Dcm Mode State </p>
<p>must not forbid Rx. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 4 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_TX_NORM_NM </p>
<p>This Dcm Mode State </p>
<p>must not forbid Rx. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 5 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_TX_NORMAL </p>
<p>This Dcm Mode State </p>
<p>must not forbid Rx. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>The Execution Type is </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>83 / 124 </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, start Rx Pdu Group </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>result changes from false </p>
<p>to true. </p>
<p>Action List False </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, stop Rx Pdu Group </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>result changes from true to </p>
<p>false. </p>
<p>Table 7-2  </p>
<p>Configuration of rule for starting and stopping Rx and DM for FlexRay with Dcm Com Control </p>
<p><b>7.2 </b></p>
<p><b>Dcm Communication Control Modes </b></p>
<p>The  BswM  supports  the  DCM  communication  control  modes  which  are  indicated  by  the </p>
<p>mode </p>
<p>source </p>
<p><b>DCM_COM_MODE_REQUEST_&lt;channel-name&gt;</b>. </p>
<p>Dependent </p>
<p>on </p>
<p>the </p>
<p>requested </p>
<p>communication </p>
<p>control </p>
<p>modes </p>
<p>the </p>
<p>user </p>
<p>can </p>
<p>configure </p>
<p>the </p>
<p>specific </p>
<p>rules, </p>
<p>conditions and actions: </p>
<p><b>Requested Mode </b></p>
<p><b>Actions </b></p>
<p>DCM_ENABLE_RX_TX_NORM </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch: start Tx IPdu-Group(s) </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch: start Rx IPdu-Group(s) </p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring Control: enable the </p>
<p>deadline monitoring for the Rx IPdu-Group(s) </p>
<p>DCM_ENABLE_RX_DISABLE_TX_NORM </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch: stop Tx IPdu-Group(s) </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch: start Rx IPdu-Group(s) </p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring Control: enable the </p>
<p>deadline monitoring for the Rx IPdu-Group(s) </p>
<p>DCM_DISABLE_RX_ENABLE_TX_NORM </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch: start Tx IPdu-Group(s) </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch: stop Rx IPdu-Group(s) </p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring Control: disable the </p>
<p>deadline monitoring for the Rx IPdu-Group(s) </p>
<p>DCM_DISABLE_RX_TX_NORMAL </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch: stop Tx IPdu-Group(s) </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch: stop Rx IPdu-Group(s) </p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring Control: disable the </p>
<p>deadline monitoring for the Rx IPdu-Group(s) </p>
<p>DCM_ENABLE_RX_TX_NM </p>
<p><b>&gt; </b></p>
<p>Nm Control: Enable Nm communication </p>
<p>DCM_ENABLE_RX_DISABLE_TX_NM </p>
<p><b>&gt; </b></p>
<p>Nm Control: Disable Nm communication </p>
<p>DCM_DISABLE_RX_ENABLE_TX_NM </p>
<p><b>&gt; </b></p>
<p>Nm Control: Enable Nm communication </p>
<p>DCM_DISABLE_RX_TX_NM </p>
<p><b>&gt; </b></p>
<p>Nm Control: Disable Nm communication </p>
<p>DCM_ENABLE_RX_TX_NORM_NM </p>
<p><b>&gt; </b></p>
<p>Nm Control: Enable Nm communication </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch: stop Tx IPdu-Group(s) </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>84 / 124 </p>
<p><b>Requested Mode </b></p>
<p><b>Actions </b></p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch: start Rx IPdu-Group(s) </p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring Control: enable the </p>
<p>deadline monitoring for the Rx IPdu-Group(s) </p>
<p>DCM_ENABLE_RX_DISABLE_TX_NORM_NM </p>
<p><b>&gt; </b></p>
<p>Nm Control: Disable Nm communication </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch: stop Tx IPdu-Group(s) </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch: start Rx IPdu-Group(s) </p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring Control: enable the </p>
<p>deadline monitoring for the Rx IPdu-Group(s) </p>
<p>DCM_DISABLE_RX_TX_NORM_NM </p>
<p><b>&gt; </b></p>
<p>Nm Control: Disable Nm communication </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch: stop Tx IPdu-Group(s) </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch: start Rx IPdu-Group(s) </p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring Control: disable the </p>
<p>deadline monitoring for the Rx IPdu-Group(s) </p>
<p>Table 7-3  </p>
<p>Recommended communication control modes </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>Consider the communication states of the Bus State Managers when you use the Dcm </p>
<p>communication control modes. Refer to the examples for bus type CAN and FlexRay </p>
<p>(chapters 0 and 7.6).  For bus type LIN there is a different handling which is described </p>
<p>in chapter 7.5. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>7.3 </b></p>
<p><b>Dcm Reset Modes </b></p>
<p>The BswM supports specific DCM Reset Modes which are indicated by the mode source </p>
<p><b>DCM_RESET_MODE_REQUEST</b>. Dependent on the requested reset mode the user can </p>
<p>configure the specific rules, conditions and actions. The BswM supports the following Dcm </p>
<p>Reset Modes: </p>
<p><b>&gt; </b></p>
<p>DCM_BOOTLOADER_RESET </p>
<p><b>&gt; </b></p>
<p>DCM_HARD_RESET </p>
<p><b>&gt; </b></p>
<p>DCM_KEY_ON_OFF_RESET </p>
<p><b>&gt; </b></p>
<p>DCM_SOFT_RESET </p>
<p><b>7.4 </b></p>
<p><b>LIN Communication Modes </b></p>
<p>The </p>
<p>LIN </p>
<p>communication </p>
<p>modes </p>
<p>are </p>
<p>indicated </p>
<p>by </p>
<p>the </p>
<p>LinSM </p>
<p>mode </p>
<p><b>LINSM_MODE_INDICATION_&lt;channel-name&gt;</b>. The possible requested mode values are </p>
<p>shown in the following figure: </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>85 / 124 </p>
<p> </p>
<p>Figure 7-11 </p>
<p>LIN communication states </p>
<p>The </p>
<p>LinSM </p>
<p>only </p>
<p>accepts </p>
<p>schedule </p>
<p>requests </p>
<p>in </p>
<p>the </p>
<p>mode </p>
<p>state </p>
<p>LINSM_BSWM_FULL_COMMUNICATION,  so  for  example  a  rule  can  be  defined  which </p>
<p>requests a schedule table every time this state is entered. Furthermore a User Condition </p>
<p>can be used to specify which schedule table shall be requested. </p>
<p>Example: </p>
<p>There are two schedule tables, one which shall be requested when clamp 15 is off and </p>
<p>one  when  clamp  15  is  on.  To  ensure  LIN  communication  without  delay  the  appropriate </p>
<p>schedule </p>
<p>table </p>
<p>shall </p>
<p>be </p>
<p>requested </p>
<p>directly </p>
<p>upon </p>
<p>entering </p>
<p>the </p>
<p>state </p>
<p>LINSM_BSWM_RUN_SCHEDULE. To fulfill these requirements the following Modes and </p>
<p>Rules are necessary: </p>
<p><b>&gt; </b></p>
<p>one Generic Mode which allows the user to notify the BswM about the clamp 15 mode </p>
<p>state </p>
<p><b>&gt; </b></p>
<p>one Rule which checks the condition if the LinSM is in the state </p>
<p>LINSM_BSWM_RUN_SCHEDULE and if state of clamp 15 mode is on, the Action List </p>
<p>True requests the schedule table for clamp 15 on </p>
<p><b>&gt; </b></p>
<p>one Rule which checks the condition if the LinSM is in the state </p>
<p>LINSM_BSWM_RUN_SCHEDULE and if state of clamp 15 mode is off, the Action List </p>
<p>True requests the schedule table for clamp 15 off </p>
<p>The following sub-chapters describe the configuration parameter for this example. </p>
<p><b>7.4.1 </b></p>
<p><b>Generic Mode for clamp 15 </b></p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>Clamp_15 </p>
<p>Name of the Generic Mode.</p>
<p><b> </b></p>
<p>Generic Mode Initial </p>
<p>State </p>
<p>0 </p>
<p>Value after initialization is Clamp_15_On. </p>
<p>Generic Mode Request </p>
<p>Processing Type </p>
<p>BSWM_IMMEDIATE </p>
<p>Rules which use this mode shall be arbitrated </p>
<p>immediately. </p>
<p><b>stm LIN states</b></p>
<p><b>LINSM_BSWM_NO_COMMUNICATION</b></p>
<p><b>LINSM_BSWM_FULL_COMMUNICATION</b></p>
<p><b>LINSM_BSWM_RUN_SCHEDULE</b></p>
<p><b>LINSM_BSWM_GOTO_SLEEP</b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>86 / 124 </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Generic Mode Trigger </p>
<p>Function </p>
<p>SetClamp15State </p>
<p>This function is used by the application to set </p>
<p>the mode state to either Clamp_15_On or </p>
<p>Clamp_15_Off. </p>
<p>Use Rte </p>
<p>- </p>
<p>If you use the Rte enable this option. </p>
<p>Mode State </p>
<p>Clamp_15_On </p>
<p>0 </p>
<p>Add a Mode State Clamp_15_On which has </p>
<p>value 0. </p>
<p>Mode State </p>
<p>Clamp_15_Off </p>
<p>1 </p>
<p>Add a Mode State Clamp_15_Off which has </p>
<p>value 1. </p>
<p>Table 7-4  </p>
<p>Recommended configuration for Generic Mode clamp 15 </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>87 / 124 </p>
<p><b>7.4.2 </b></p>
<p><b>Rule clamp 15 on </b></p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>RuleClamp15On </p>
<p>Name of the Rule.</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>LINSM_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>LINSM_BSWM_RUN_SCHEDULE </p>
<p>To request schedule tables </p>
<p>the LinSM must be in state </p>
<p>LINSM_BSWM_ </p>
<p>RUN_SCHEDULE. </p>
<p>Operator </p>
<p>AND </p>
<p>Both conditions are </p>
<p>considered. </p>
<p>Condition 2 </p>
<p><b>Mode</b>:  </p>
<p>Clamp_15</p>
<p> </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>Clamp_15_On</p>
<p> </p>
<p>Generic Mode <b>Clamp_15 </b></p>
<p>must be on. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Schedule Table Switch for clamp 15 on </p>
<p>The Action List True </p>
<p>requests the schedule </p>
<p>table for clamp 15 on. </p>
<p>Table 7-5  </p>
<p>Configuration of example rule clamp 15 on </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>88 / 124 </p>
<p><b>7.4.3 </b></p>
<p><b>Rule clamp 15 off </b></p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>RuleClamp15Off </p>
<p>Name of the Rule.</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>LINSM_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>LINSM_BSWM_RUN_SCHEDULE </p>
<p>To request schedule tables </p>
<p>the LinSM must be in state </p>
<p>LINSM_BSWM_ </p>
<p>RUN_SCHEDULE. </p>
<p>Operator </p>
<p>AND </p>
<p>Both conditions are </p>
<p>considered. </p>
<p>Condition 2 </p>
<p><b>Mode</b>:  </p>
<p>Clamp_15</p>
<p> </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>Clamp_15_Off</p>
<p> </p>
<p>Generic Mode <b>Clamp_15 </b></p>
<p>must be off. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Schedule Table Switch for clamp 15 off </p>
<p>The Action List True </p>
<p>requests the schedule </p>
<p>table for clamp 15 off. </p>
<p>Table 7-6  </p>
<p>Configuration of example rule clamp 15 off </p>
<p><b>7.5 </b></p>
<p><b>LIN TP Modes </b></p>
<p>The LinTp notifies the BswM about its mode states which can have the following values: </p>
<p><b>&gt; </b></p>
<p><b>LINTP_MODE_REQUEST</b>: the LinTp requests the schedule table which contains the </p>
<p>master request frame </p>
<p><b>&gt; </b></p>
<p><b>LINTP_MODE_RESPONSE</b>: the LinTp requests the schedule table which contains the </p>
<p>slave response frame </p>
<p><b>&gt; </b></p>
<p><b>LINTP_MODE_RELEASE</b>: the LinTp diagnostic mode is finished, an applicative </p>
<p>schedule table can be requested </p>
<p>Furthermore it can be differentiated between the standard mode and the flash mode: </p>
<p><b>&gt; </b></p>
<p><b>LIN_STANDARD</b>: an applicative schedule table is active, diagnostic communication is </p>
<p>handled via run-once master request/slave response schedule tables. For example the </p>
<p>applicative schedule table is a run-continuous schedule table which is interrupted only </p>
<p>for a short time by the LinTp mode request to transmit once the master request or the </p>
<p>slave response frame via run-once schedule tables. </p>
<p><b>&gt; </b></p>
<p><b>LIN_FLASH</b>: will be entered if the Dcm module requests a communication mode </p>
<p>which does not allow applicative LIN traffic because the whole band width is needed </p>
<p>for flashing. In this mode no applicative schedule tables shall be active. To speed up </p>
<p>the flash process run-continuous schedule tables are used for the master request and </p>
<p>the slave response frame. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>89 / 124 </p>
<p>Figure 7-12 shows the state diagram of these modes: </p>
<p> </p>
<p>Figure 7-12 </p>
<p>LinTp Modes </p>
<p>To fulfill these requirements the following BswM modes and rules can be defined: </p>
<p><b>&gt; </b></p>
<p><b>Generic Mode LIN Diagnostic Mode</b>: this mode has two possible states: </p>
<p>LIN_STANDARD and LIN_FLASH, default value is LIN_STANDARD, mode request </p>
<p>processing is BSWM_DEFERRED. This mode will be used to cyclically check the LIN </p>
<p>Diagnostic Mode and thus for cyclic run-once schedule table request of the master </p>
<p>request/slave response schedule table in LIN_STANDARD mode. </p>
<p><b>stm LinTp Modes</b></p>
<p><b>Master Request</b></p>
<p>- </p>
<p>Run Continuous</p>
<p><b>Slav e Response Table</b></p>
<p>- </p>
<p>Run Continuous</p>
<p><b>Application + Master Request Table</b></p>
<p>- </p>
<p>Run Continuous Application</p>
<p>- </p>
<p>Run Once Master Request</p>
<p><b>Application + Slav e Response Table</b></p>
<p>- </p>
<p>Run Continuous Application</p>
<p>- </p>
<p>Run Once Slave Response</p>
<p><b>alt Flash Mode</b></p>
<p><b>alt Standard Mode</b></p>
<p><b>Application Table</b></p>
<p>- </p>
<p>Run Continuous</p>
<p>Ini ti al</p>
<p>Ini ti al</p>
<p>[LINTP_MODE_REQUEST(Request)]</p>
<p>[LINTP_MODE_REQUEST(Request)]</p>
<p>[LINTP_MODE_REQUEST(Response)]</p>
<p>[Communication Control  Off]</p>
<p>[Communication Control On]</p>
<p>[Enable Routing Path Group 1]</p>
<p>[LINTP_MODE_REQUEST(Response)]</p>
<p>[LINTP_MODE_REQUEST(Release)]</p>
<p>[LINTP_MODE_REQUEST(Release)]</p>
<p>[LINTP_MODE_REQUEST(Request)]</p>
<p>[LINTP_MODE_REQUEST(Response)]</p>
<p>[Enable Routing Path Group 2]</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>90 / 124 </p>
<p><b>&gt; </b></p>
<p><b>Rule Switch LIN Diagnostic Mode</b>: this rule checks the if the Dcm communication </p>
<p>control mode forbids standard communication. The Action List True disables the </p>
<p>routing path 1, enables routing path 2, requests the master request run-continuous </p>
<p>and calls a user callout function which switches the Generic Mode State to </p>
<p>LIN_FLASH.  </p>
<p><b>&gt; </b></p>
<p><b>Rule Application Schedule in Standard Mode</b>: this rule checks if the LinSM changes </p>
<p>its mode state to LINSM_BSWM_RUN_SCHEDULE, the Action List True requests the </p>
<p>application schedule table and enables the appropriate routing path. </p>
<p><b>&gt; </b></p>
<p><b>Rule Master Request in Standard Mode</b>: this rule checks if the requested LinTp </p>
<p>Mode State changes its mode state to LINTP_MODE_REQUEST and if the Generic </p>
<p>Mode LIN Diagnostic Mode is LIN_STANDARD. Since the Generic Mode is a deferred </p>
<p>Mode, this rule is arbitrated cyclically within the </p>
<p>BswM_MainFunction()</p>
<p>, so as long </p>
<p>as the LinTp Mode State does not change the master request run-once schedule table </p>
<p>is requested cyclically.   </p>
<p><b>&gt; </b></p>
<p><b>Slave Response in Standard Mode</b>: this rule checks if the requested LinTp Mode </p>
<p>State changes its mode state to LINTP_MODE_RESPONSE and if the Generic Mode </p>
<p>LIN Diagnostic Mode is LIN_STANDARD. Since the Generic Mode is a deferred Mode, </p>
<p>this rule is arbitrated cyclically within the </p>
<p>BswM_MainFunction()</p>
<p>, so as long as the </p>
<p>LinTp Mode State does not change the slave response run-once schedule table is </p>
<p>requested cyclically.   </p>
<p><b>&gt; </b></p>
<p><b>Rule Master Request in Flash Mode</b>: this rule checks if the requested LinTp Mode </p>
<p>State is LINTP_MODE_REQUEST and if the Generic Mode LIN Diagnostic Mode is </p>
<p>LIN_FLASH. The Action List True requests the master request run-continuous </p>
<p>schedule table. </p>
<p><b>&gt; </b></p>
<p><b>Rule Slave Response in Flash Mode</b>: this rule checks if the requested LinTp Mode </p>
<p>State is LINTP_MODE_RESPONSE and if the Generic Mode LIN Diagnostic Mode is </p>
<p>LIN_FLASH. The Action List True requests the slave response run-continuous </p>
<p>schedule table. </p>
<p>Refer to the following sub-chapters for configuration details. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>91 / 124 </p>
<p><b>7.5.1 </b></p>
<p><b>Generic Mode Configuration </b></p>
<p>The  following  table  contains  the  recommended  configuration  parameter  values  for  the </p>
<p>Generic Mode: </p>
<p><b>Attribute Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>LinDiagMode </p>
<p>Name of the Generic Mode.</p>
<p><b> </b></p>
<p>Generic Mode Initial </p>
<p>State </p>
<p>0 </p>
<p>Value after initialization is LIN_STANDARD. </p>
<p>Generic Mode Request </p>
<p>Processing Type </p>
<p>BSWM_DEFERRED </p>
<p>Rules which use this mode shall be arbitrated </p>
<p>cyclically because in LIN_STANDARD mode </p>
<p>the master request/Slave response schedule </p>
<p>tables must be triggered cyclically. </p>
<p>Generic Mode Trigger </p>
<p>Function </p>
<p>TriggerLinDiagMode </p>
<p>This function is used to set the Mode State to </p>
<p>either LIN_FLASH or LIN_STANDARD </p>
<p>triggered by the Dcm communication control </p>
<p>mode. Refer to chapter 7.5.3 for usage of </p>
<p>TriggerLinDiagMode. </p>
<p>Use Rte </p>
<p>- </p>
<p>If you use the Rte enabled this option. </p>
<p>Mode State </p>
<p>LIN_STANDARD </p>
<p>0 </p>
<p>Add a Mode State LIN_STANDARD which has </p>
<p>value 0. </p>
<p>Mode State </p>
<p>LIN_FLASH </p>
<p>1 </p>
<p>Add a Mode State LIN_FLASH which has </p>
<p>value 1. </p>
<p>Table 7-7  </p>
<p>Recommended configuration for Generic LIN Mode </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>92 / 124 </p>
<p><b>7.5.2 </b></p>
<p><b>Rule Configuration </b></p>
<p><b>7.5.2.1 </b></p>
<p><b>Rule for application schedule </b></p>
<p>The  following  table  contains  the  recommended  configuration  parameter  values  for  the </p>
<p>application schedule: </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>LinRunSchedule </p>
<p>Name of the Rule.</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE. </p>
<p>Condition </p>
<p><b>Mode</b>:  </p>
<p>LINSM_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>LINSM_BSWM_RUN_SCHEDULE </p>
<p>The rule checks if the </p>
<p>LinSM mode of the </p>
<p>appropriate LIN channel is </p>
<p>equal to </p>
<p>LINSM_RUN_SCHEDULE</p>
<p>. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>:  </p>
<p><b>&gt; </b></p>
<p>Schedule Table Switch application </p>
<p>schedule </p>
<p><b>&gt; </b></p>
<p>Pdu Routing Control Path (Disable </p>
<p>Group 2) </p>
<p><b>&gt; </b></p>
<p>Pdu Routing Control Path (Enable </p>
<p>Group 1) </p>
<p> </p>
<p>Table 7-8  </p>
<p>Configuration of rule for application schedule </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>93 / 124 </p>
<p><b>7.5.2.2 </b></p>
<p><b>Rule for switching the LIN Diagnostic Mode </b></p>
<p>The following table contains the recommended configuration parameter: </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>SwitchLinDiagMode </p>
<p>Name of the Rule.</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_ENABLE_TX_NORM </p>
<p>This condition checks if </p>
<p>communication control is </p>
<p>active. </p>
<p>Operator </p>
<p>OR </p>
<p>The <b>OR</b>-Operator is used </p>
<p>to check if at least one </p>
<p>Dcm communication </p>
<p>control mode is used </p>
<p>which forbids standard </p>
<p>communication. </p>
<p>Condition 2 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_ENABLE_TX_NORM_NM </p>
<p>This condition checks if </p>
<p>communication control is </p>
<p>active. </p>
<p>Operator </p>
<p>OR </p>
<p>The <b>OR</b>-Operator is used </p>
<p>to check if at least one </p>
<p>Dcm communication </p>
<p>control mode is used </p>
<p>which forbids standard </p>
<p>communication. </p>
<p>Condition 3 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_TX_NORM_NM </p>
<p>This condition checks if </p>
<p>communication control is </p>
<p>active. </p>
<p>Operator </p>
<p>OR </p>
<p>The <b>OR</b>-Operator is used </p>
<p>to check if at least one </p>
<p>Dcm communication </p>
<p>control mode is used </p>
<p>which forbids standard </p>
<p>communication. </p>
<p>Condition 4 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_TX_NORMAL </p>
<p>This condition checks if </p>
<p>communication control is </p>
<p>active. </p>
<p>Operator </p>
<p>OR </p>
<p>The <b>OR</b>-Operator is used </p>
<p>to check if at least one </p>
<p>Dcm communication </p>
<p>control mode is used </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>94 / 124 </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>which forbids standard </p>
<p>communication. </p>
<p>Condition 5 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_ENABLE_RX_DISABLE_TX_NORM </p>
<p>This condition checks if </p>
<p>communication control is </p>
<p>active. </p>
<p>Operator </p>
<p>OR </p>
<p>The <b>OR</b>-Operator is used </p>
<p>to check if at least one </p>
<p>Dcm communication </p>
<p>control mode is used </p>
<p>which forbids standard </p>
<p>communication. </p>
<p>Condition 6 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_ENABLE_RX_DISABLE_TX_NORM_NM </p>
<p>This condition checks if </p>
<p>communication control is </p>
<p>active. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>:  </p>
<p><b>&gt; </b></p>
<p>User Callout <b>SetLinDiagFlashMode </b></p>
<p><b>&gt; </b></p>
<p>Schedule Table Switch master request </p>
<p>schedule run-continuous </p>
<p><b>&gt; </b></p>
<p>Pdu Routing Control Path (Disable </p>
<p>Group 1) </p>
<p><b>&gt; </b></p>
<p>Pdu Routing Control Path (Enable </p>
<p>Group 2) </p>
<p>The Action List True </p>
<p>executes all necessary </p>
<p>actions for the LIN_FLASH </p>
<p>Mode. </p>
<p>Action List False </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>User Callout <b>SetLinDiagStandardMode </b></p>
<p><b>&gt; </b></p>
<p>Schedule Table Switch application </p>
<p>schedule </p>
<p><b>&gt; </b></p>
<p>Pdu Routing Control Path (Disable </p>
<p>Group 2) </p>
<p><b>&gt; </b></p>
<p>Pdu Routing Control Path (Enable </p>
<p>Group 1) </p>
<p>The Action List True </p>
<p>executes all necessary </p>
<p>actions for the </p>
<p>LIN_STANDARD Mode. </p>
<p>Table 7-9  </p>
<p>Configuration of rule for switching the LIN Diagnostic Mode </p>
<p><b>7.5.2.3 </b></p>
<p><b>Rule for master request in LIN_STANDARD Mode </b></p>
<p>The following table contains the recommended configuration parameter: </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>95 / 124 </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>LinTpMasterRequestStandard </p>
<p>Name of the Rule.</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>LINTP_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>LINTP_MODE_REQUEST </p>
<p>This condition checks if the </p>
<p>LinTp requests the master </p>
<p>request mode. </p>
<p>Operator </p>
<p>AND </p>
<p>The <b>AND</b>-Operator is used </p>
<p>because both conditions </p>
<p>must be true. </p>
<p>Condition 2 </p>
<p><b>Mode</b>:  </p>
<p>LinDiagMode </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>LIN_STANDARD </p>
<p>This condition checks if we </p>
<p>are in LIN_STANDARD. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_CONDITION </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Schedule Table Switch master request </p>
<p>schedule run-once </p>
<p>The Execution Type is </p>
<p><b>BSWM_CONDITION </b></p>
<p>because in </p>
<p>LIN_STANDARD the </p>
<p>schedule table must be </p>
<p>requested cyclically as </p>
<p>long as the rule result is </p>
<p>true. </p>
<p>Table 7-10  </p>
<p>Configuration of rule for switching the master request schedule in standard mode </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>96 / 124 </p>
<p><b>7.5.2.4 </b></p>
<p><b>Rule for slave response in LIN_STANDARD Mode </b></p>
<p>The following table contains the recommended configuration parameter: </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>LinTpSlaveResponseStandard </p>
<p>Name of the Rule.</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>LINTP_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>LINTP_MODE_RESPONSE </p>
<p>This condition checks if the </p>
<p>LinTp requests the slave </p>
<p>response mode. </p>
<p>Operator </p>
<p>AND </p>
<p>The <b>AND</b>-Operator is used </p>
<p>because both conditions </p>
<p>must be true. </p>
<p>Condition 2 </p>
<p><b>Mode</b>:  </p>
<p>LinDiagMode </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>LIN_STANDARD </p>
<p>This condition checks if we </p>
<p>are in LIN_STANDARD. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_CONDITION </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Schedule Table Switch slave response </p>
<p>schedule run-once </p>
<p>The Execution Type is </p>
<p><b>BSWM_CONDITION </b></p>
<p>because in </p>
<p>LIN_STANDARD the </p>
<p>schedule table must be </p>
<p>requested cyclically. </p>
<p>Table 7-11  </p>
<p>Configuration of rule for switching the slave response schedule in standard mode </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>97 / 124 </p>
<p><b>7.5.2.5 </b></p>
<p><b>Rule for master request in LIN_FLASH Mode </b></p>
<p>The following table contains the recommended configuration parameter: </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>LinTpMasterRequestFlash </p>
<p>Name of the Rule.</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>LINTP_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>LINTP_MODE_REQUEST </p>
<p>This condition checks if the </p>
<p>LinTp requests the master </p>
<p>request mode. </p>
<p>Operator </p>
<p>AND </p>
<p>The <b>AND</b>-Operator is used </p>
<p>because both conditions </p>
<p>must be true. </p>
<p>Condition 2 </p>
<p><b>Mode</b>:  </p>
<p>LinDiagMode </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>LIN_FLASH </p>
<p>This condition checks if we </p>
<p>are in LIN_FLASH. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Schedule Table Switch master request </p>
<p>schedule run-continuous </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because in LIN_FLASH </p>
<p>the schedule table must </p>
<p>only be requested once </p>
<p>upon result change from </p>
<p>false to true. </p>
<p>Table 7-12  </p>
<p>Configuration of rule for switching the master request schedule in flash mode </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>98 / 124 </p>
<p><b>7.5.2.6 </b></p>
<p><b>Rule for slave response in LIN_FLASH Mode </b></p>
<p>The following table contains the recommended configuration parameter: </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>LinTpSlaveResponseFlash </p>
<p>Name of the Rule.</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>LINTP_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>LINTP_MODE_RESPONSE </p>
<p>This condition checks if the </p>
<p>LinTp requests the slave </p>
<p>response mode. </p>
<p>Operator </p>
<p>AND </p>
<p>The <b>AND</b>-Operator is used </p>
<p>because both conditions </p>
<p>must be true. </p>
<p>Condition 2 </p>
<p><b>Mode</b>:  </p>
<p>LinDiagMode </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>LIN_FLASH </p>
<p>This condition checks if we </p>
<p>are in LIN_STANDARD. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Schedule Table Switch slave response </p>
<p>schedule run-continuous </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because in LIN_FLASH </p>
<p>the schedule table must </p>
<p>only be requested once </p>
<p>upon result change from </p>
<p>false to true. </p>
<p>Table 7-13  </p>
<p>Configuration of rule for switching the slave response schedule in standard mode </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>99 / 124 </p>
<p><b>7.5.3 </b></p>
<p><b>User Callouts </b></p>
<p>As described in chapter 7.5.3 two user callouts are used in the Action Lists: </p>
<p><b>&gt; </b></p>
<p>SetLinDiagFlashMode </p>
<p><b>&gt; </b></p>
<p>SetLinDiagStandardMode </p>
<p>These functions are called by the BswM when the Dcm requests LIN_FLASH or </p>
<p>LIN_STANDARD mode. The task of this function is to set the Generic Mode State of </p>
<p><b>LinDiagMode </b>(refer to chapter 7.5.1), refer to the following examples: </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Example </b></p>
<p> </p>
<p>void SetLinDiagFlashMode(void) </p>
<p>{ </p>
<p>  /* Call the trigger function of Generic Mode “LinDiagMode”  </p>
<p>     and set the Mode State to LIN_FLASH */ </p>
<p>  TriggerLinDiagMode(BSWM_LinDiagMode_LIN_FLASH); </p>
<p>} </p>
<p> </p>
<p>void SetLinDiagStandardMode (void) </p>
<p>{ </p>
<p>  /* Call the trigger function of Generic Mode “LinDiagMode”  </p>
<p>     and set the Mode State to LIN_STANDARD */ </p>
<p>  TriggerLinDiagMode(BSWM_LinDiagMode_LIN_STANDARD); </p>
<p>} </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>100 / 124 </p>
<p><b>7.6 </b></p>
<p><b>FlexRay Communication Modes </b></p>
<p>The  FrSM  notifies  the  BswM  about  its  state  changes.  Figure  7-13  shows  the  possible </p>
<p>states: </p>
<p>Figure 7-13 </p>
<p>FlexRay States </p>
<p>During  transitions T08  and T15  the  communication  has  to  be  started,  during  transitions </p>
<p>T10, T16 and T09 the communication has to be stopped. To fulfill these requirements a </p>
<p>rule is configured which uses the FrSM Mode FRSM_MODE_INDICATION and the Mode </p>
<p>State FRSM_BSWM_ONLINE in its condition to identify whether the communication has to </p>
<p>be  started  (means  FrSM  enters  state  FRSM_ONLINE)  or  the  communication  has  to  be </p>
<p>stopped (means FrSM leaves state FRSM_ONLINE): </p>
<p><b>7.6.1 </b></p>
<p><b>Rule Switch_Rx_Tx_DM_FlexRay </b></p>
<p>The following table contains the recommended configuration parameter: </p>
<p><b>stm FrSm</b></p>
<p><b>NoCom</b></p>
<p><b>FullCom</b></p>
<p><b>FRSM_READY</b></p>
<p><b>FRSM_WAKEUP</b></p>
<p><b>FRSM_STARTUP</b></p>
<p><b>FRSM_ONLINE_PASSIVE</b></p>
<p><b>FRSM_HALT_REQ</b></p>
<p>Ini tial</p>
<p><b>FRSM_ONLINE</b></p>
<p>T09</p>
<p>T01</p>
<p>T02</p>
<p>T03</p>
<p>T04</p>
<p>T05</p>
<p>T06</p>
<p>T08</p>
<p>T12</p>
<p>T10</p>
<p>T11</p>
<p>T16</p>
<p>T15</p>
<p>T14</p>
<p>T13</p>
<p>T07</p>
<p>T17</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>101 / 124 </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>Switch_Rx_Tx_DM_FlexRay </p>
<p>Name of the Rule</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE, this and </p>
<p>Action List Execution Type </p>
<p><b>BSWM_TRIGGER </b>ensure </p>
<p>that the Action List True is </p>
<p>not executed until the state </p>
<p>FRSM_ONLINE is entered </p>
<p>for the first time. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>FRSM_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>FRSM_BSWM_ONLINE </p>
<p>This condition checks if the </p>
<p>FrSM is in state </p>
<p>FRSM_ONLINE. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, start Rx Pdu Group </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, start Tx Pdu Group </p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring, enable the Rx DM </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>result changes from false </p>
<p>to true. </p>
<p>Action List False </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, stop Rx Pdu Group </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, stop Tx Pdu Group </p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring, disable the Rx DM </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>result changes from true to </p>
<p>false. </p>
<p>Table 7-14  </p>
<p>Configuration of rule for starting and stopping the communication for FlexRay </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>102 / 124 </p>
<p>Screenshot of the example rule configuration: </p>
<p> </p>
<p>Figure 7-14 </p>
<p>Screenshot FlexRay example rule </p>
<p>If  Dcm  communication  control  is  used,  the  Dcm  Mode  DCM_COM_MODE_REQUEST </p>
<p>must be considered in the rule configuration. It is not possible to switch Rx, Tx and DM at </p>
<p>once as described in rule <b> Switch_Rx_Tx_DM_Flexray</b>, there must be a rule for Rx/DM </p>
<p>and </p>
<p>another </p>
<p>rule </p>
<p>for </p>
<p>Tx, </p>
<p>because </p>
<p>the </p>
<p>Dcm </p>
<p>communication </p>
<p>Modes </p>
<p>control </p>
<p>each </p>
<p>communication state separately. So two rules are created for Tx and Rx/DM: </p>
<p><b>7.6.2 </b></p>
<p><b>Rule Switch_Tx_FlexRay </b></p>
<p>The following table contains the recommended configuration parameter: </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>Switch_Tx_FlexRay </p>
<p>Name of the Rule</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE, this and </p>
<p>Action List Execution Type </p>
<p><b>BSWM_TRIGGER </b>ensure </p>
<p>that the Action List True is </p>
<p>not executed until the </p>
<p>evaluation of the </p>
<p>conditions, results in </p>
<p>BSWM_TRUE. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>FRSM_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>FRSM_BSWM_ONLINE </p>
<p>This condition checks if the </p>
<p>FrSM is in state </p>
<p>FRSM_ONLINE. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 2 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>This Dcm Mode State </p>
<p>must not forbid Tx. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>103 / 124 </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>DCM_DISABLE_RX_TX_NORM_NM </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 3 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_TX_NORMAL </p>
<p>This Dcm Mode State </p>
<p>must not forbid Tx. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 4 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_ENABLE_RX_DISABLE_TX_NORM_NM </p>
<p>This Dcm Mode State </p>
<p>must not forbid Tx. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 5 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_ENABLE_RX_DISABLE_TX_NORM </p>
<p>This Dcm Mode State </p>
<p>must not forbid Tx. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, start Tx Pdu Group </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>result changes from false </p>
<p>to true. </p>
<p>Action List False </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, stop Tx Pdu Group </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>result changes from true to </p>
<p>false. </p>
<p>Table 7-15  </p>
<p>Configuration of rule for starting and stopping Tx for FlexRay with Dcm Com Control </p>
<p><b>7.6.3 </b></p>
<p><b>Rule Switch_Rx_DM_FlexRay </b></p>
<p>The following table contains the recommended configuration parameter: </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>Switch_Rx_DM_FlexRay </p>
<p>Name of the Rule</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE, this and </p>
<p>Action List Execution Type </p>
<p><b>BSWM_TRIGGER </b>ensure </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>104 / 124 </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>that the Action List True is </p>
<p>not executed until the </p>
<p>evaluation of the </p>
<p>conditions, results in </p>
<p>BSWM_TRUE. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>FRSM_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>FRSM_BSWM_ONLINE </p>
<p>This condition checks if the </p>
<p>FrSM is in state </p>
<p>FRSM_ONLINE. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 2 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_ENABLE_TX_NORM </p>
<p>This Dcm Mode State </p>
<p>must not forbid Rx. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 3 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator: </b></p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_ENABLE_TX_NORM_NM </p>
<p>This Dcm Mode State </p>
<p>must not forbid Rx. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 4 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_TX_NORM_NM </p>
<p>This Dcm Mode State </p>
<p>must not forbid Rx. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 5 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_TX_NORMAL </p>
<p>This Dcm Mode State </p>
<p>must not forbid Rx. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, start Rx Pdu Group </p>
<p><b>&gt; </b></p>
<p>Enable the Deadline Monitoring for the </p>
<p>Rx Pdu Group </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>result changes from false </p>
<p>to true. </p>
<p>Action List False </p>
<p><b>Action List Execution Type</b>: </p>
<p>The Execution Type is </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>105 / 124 </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, stop Rx Pdu Group </p>
<p><b>&gt; </b></p>
<p>Disable the Deadline Monitoring for the </p>
<p>Rx Pdu Group </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>result changes from true to </p>
<p>false. </p>
<p>Table 7-16  </p>
<p>Configuration of rule for starting and stopping Rx and DM for FlexRay with Dcm Com Control </p>
<p><b>7.7 </b></p>
<p><b>NmFiatB and NmFiatC Communication Modes </b></p>
<p>The  NmFiatB  and  NmFiatC  notify  the  BswM  about  their  state  changes  via  the  callback </p>
<p>function </p>
<p>BswM_Nm_StateChangeNotification. </p>
<p>Figure </p>
<p>7-15 </p>
<p>shows </p>
<p>the </p>
<p>different </p>
<p>communication states of Rx, Tx and DM in the appropriate Nm states: </p>
<p> </p>
<p>Figure 7-15 </p>
<p>NmFiatB and NmFiatC state transitions </p>
<p>The </p>
<p>following </p>
<p>sub-chapters </p>
<p>describe </p>
<p>example </p>
<p>rules </p>
<p>which </p>
<p>fulfill </p>
<p>the </p>
<p>recommended </p>
<p>communication states shown in Figure 7-15. </p>
<p><b>stm NmFiatB Comm Modes</b></p>
<p><b>BusSleep</b></p>
<p>- </p>
<p>Rx Off; Tx Off; DM Off</p>
<p><b>WaitNetworkStartUp || </b></p>
<p><b>WaitCheckActiv ation || </b></p>
<p><b>PrepareBusSleep</b></p>
<p>- </p>
<p>Rx On; Tx Off; DM Off</p>
<p><b>ReadySleep  ||  </b></p>
<p><b>NormalOperation </b></p>
<p>- </p>
<p>Rx On; Tx On; DM On</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>106 / 124 </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>If NmFiatB or NmFiatC are used, the CAN communication modes as described in </p>
<p>chapter 7.1 must not be used.  </p>
<p>The rules for NmFiatB and NmFiatC must be configured manually. The standard rules </p>
<p>button cannot be used in this case. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p><b>7.7.1 </b></p>
<p><b>Rule Switch_Tx_DM </b></p>
<p>This  rule  starts/stops  the  Tx  communication  path  and  the  Rx  deadline  monitoring.  The </p>
<p>following table contains the recommended configuration parameter: </p>
<p>Rule Switch_Tx_DM for NMFiat Class B: </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>Switch_Tx_DM </p>
<p>Name of the Rule</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE, this and </p>
<p>Action List Execution Type </p>
<p><b>BSWM_TRIGGER </b>ensure </p>
<p>that the Action List True is </p>
<p>not executed until the </p>
<p>evaluation of the </p>
<p>conditions, results in </p>
<p>BSWM_TRUE. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>NMFIAT_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>NM_STATE_NORMAL_OPERATION </p>
<p>This condition checks if the </p>
<p>Nm is in state </p>
<p>NM_STATE_NORMAL_ </p>
<p>OPERATION. </p>
<p>Operator </p>
<p><b>OR </b></p>
<p>Condition 1 OR Condition </p>
<p>2 must be true. </p>
<p>Condition 2 </p>
<p><b>Mode</b>:  </p>
<p>NMFIAT_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>NM_STATE_READY_SLEEP </p>
<p>This condition checks if the </p>
<p>Nm is in state </p>
<p>NM_STATE_READY_ </p>
<p>SLEEP. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, start Tx Pdu Group </p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring, enable the Rx DM </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>result changes from false </p>
<p>to true. </p>
<p>Action List False </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>107 / 124 </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, stop Tx Pdu Group </p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring, disable the Rx DM </p>
<p>result changes from true to </p>
<p>false. </p>
<p>Table 7-17  </p>
<p>Configuration of rule for starting and stopping the Tx communication for NmFiat B </p>
<p> </p>
<p>Rule Switch_Tx_DM for NMFiat Class C: </p>
<p> </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>Switch_Tx_DM </p>
<p>Name of the Rule</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE, this and </p>
<p>Action List Execution Type </p>
<p><b>BSWM_TRIGGER </b>ensure </p>
<p>that the Action List True is </p>
<p>not executed until the </p>
<p>evaluation of the </p>
<p>conditions, results in </p>
<p>BSWM_TRUE. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>CANSM_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>CANSM_BSWM_FULL_COMMUNICATION </p>
<p>This condition checks if the </p>
<p>CanSm is in state </p>
<p>CANSM_BSWM_FULL_COMM</p>
<p>UNICATION.</p>
<p> </p>
<p>Operator </p>
<p><b>AND </b></p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 2 </p>
<p><b>Mode</b>:  </p>
<p>NMFIAT_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>NM_STATE_BUS_SLEEP </p>
<p>This condition checks if the </p>
<p>Nm is not in state </p>
<p>NM_STATE_BUS_SLEEP</p>
<p>. </p>
<p>Operator </p>
<p><b>AND </b></p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 3 </p>
<p><b>Mode</b>:  </p>
<p>NMFIAT_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>NM_STATE_PREPARE_BUS_SLEEP</p>
<p><b> </b></p>
<p>This condition checks if the </p>
<p>Nm is not in state </p>
<p>NM_STATE_PREPARE_BUS_SLE</p>
<p>EP</p>
<p>. </p>
<p>Operator </p>
<p><b>AND </b></p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 4 </p>
<p><b>Mode</b>:  </p>
<p>NMFIAT_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p>This condition checks if the </p>
<p>Nm is not in state </p>
<p>NM_STATE_WAIT_CHECK_ACTI</p>
<p>VATION</p>
<p>. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>108 / 124 </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p><b>Mode State</b>: </p>
<p>NM_STATE_WAIT_CHECK_ACTIVATION</p>
<p><b> </b></p>
<p>Operator </p>
<p><b>AND </b></p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 5 </p>
<p><b>Mode</b>:  </p>
<p>NMFIAT_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>NM_STATE_WAIT_NETWORK_STARTUP</p>
<p><b> </b></p>
<p>This condition checks if the </p>
<p>Nm is not in state </p>
<p>NM_STATE_WAIT_NETWORK_</p>
<p>STARTUP</p>
<p>. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, start Tx Pdu Group </p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring, enable the Rx DM </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>result changes from false </p>
<p>to true. </p>
<p>Action List False </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, stop Tx Pdu Group </p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring, disable the Rx DM </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>result changes from true to </p>
<p>false. </p>
<p>Table 7-18  </p>
<p>Configuration of rule for starting and stopping the Tx communication for NmFiat C </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>109 / 124 </p>
<p>Screenshot of the example rule configuration: </p>
<p> </p>
<p>Figure 7-16  Screenshot example rule for Tx communication with NmFiatB and NmFiatC </p>
<p><b>7.7.2 </b></p>
<p><b>Rule Switch_Rx </b></p>
<p>This  rule </p>
<p>starts/stops  the  Rx  communication  path.  The  following  table </p>
<p>contains </p>
<p>the </p>
<p>recommended configuration parameter: </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>Switch_Rx </p>
<p>Name of the Rule</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE, this and </p>
<p>Action List Execution Type </p>
<p><b>BSWM_TRIGGER </b>ensure </p>
<p>that the Action List True is </p>
<p>not executed until the </p>
<p>evaluation of the conditions, </p>
<p>results in BSWM_TRUE. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>NMFIAT_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT_EQUAL </p>
<p><b>Mode State</b>: </p>
<p>NM_STATE_BUS_SLEEP </p>
<p>This condition checks if the </p>
<p>Nm is not in state </p>
<p>NM_STATE_BUS_SLEEP. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, start Rx Pdu Group </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b>because </p>
<p>the actions shall only be </p>
<p>executed when the result </p>
<p>changes from false to true. </p>
<p>Action List False </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, stop Rx Pdu Group </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b>because </p>
<p>the actions shall only be </p>
<p>executed when the result </p>
<p>changes from true to false. </p>
<p>Table 7-19  </p>
<p>Configuration of rule for starting and stopping the Rx communication for NmFiatB and NmFiatC </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>110 / 124 </p>
<p> </p>
<p>Figure 7-17 </p>
<p>Screenshot example rule for Rx communication with NmFiatB and NmFiatC </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>111 / 124 </p>
<p><b>7.7.3 </b></p>
<p><b>Rule Switch_Tx_DM with communication control </b></p>
<p>The following table contains the recommended configuration parameter: </p>
<p>Rule Switch_Tx_DM for Fiat Class B: </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>Switch_Tx_DM </p>
<p>Name of the Rule</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE, this and </p>
<p>Action List Execution Type </p>
<p><b>BSWM_TRIGGER </b>ensure </p>
<p>that the Action List True is </p>
<p>not executed until the </p>
<p>evaluation of the </p>
<p>conditions, results in </p>
<p>BSWM_TRUE. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>CANSM_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>CANSM_BSWM_FULL_COMMUNICATION </p>
<p>This condition checks if the </p>
<p>CanSM is in state </p>
<p>CANSM_BSWM_FULL_COM</p>
<p>MUNICATION</p>
<p>. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 2 </p>
<p><b>Mode</b>:  </p>
<p>NMFIAT_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT_EQUAL </p>
<p><b>Mode State</b>: </p>
<p>NM_STATE_BUS_SLEEP</p>
<p><b> </b></p>
<p>This condition checks if the </p>
<p>Nm is not in state </p>
<p>NM_STATE_BUS_SLEEP</p>
<p>. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 3 </p>
<p><b>Mode</b>:  </p>
<p>NMFIAT_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT_EQUAL </p>
<p><b>Mode State</b>: </p>
<p>NM_STATE_PREPARE_BUS_SLEEP </p>
<p>This condition checks if the </p>
<p>Nm is not in state </p>
<p>NM_STATE_PREPARE </p>
<p>_BUS_SLEEP. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 4 </p>
<p><b>Mode</b>:  </p>
<p>NMFIAT_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT_EQUAL </p>
<p><b>Mode State</b>: </p>
<p>NM_STATE_WAIT_CHECK_ACTIVATION </p>
<p>This condition checks if the </p>
<p>Nm is not in state </p>
<p>NM_STATE_WAIT_ </p>
<p>CHECK_ACTIVATION. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 5 </p>
<p><b>Mode</b>:  </p>
<p>NMFIAT_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT_EQUAL </p>
<p>This condition checks if the </p>
<p>Nm is not in state </p>
<p>NM_STATE_WAIT_ </p>
<p>NETWORK_STARTUP. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>112 / 124 </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p><b>Mode State</b>: </p>
<p>NM_STATE_WAIT_NETWORK_STARTUP </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 6 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_TX_NORM_NM </p>
<p>This Dcm Mode State </p>
<p>must not forbid Tx. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 7 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_TX_NORMAL </p>
<p>This Dcm Mode State </p>
<p>must not forbid Tx. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 8 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_ENABLE_RX_DISABLE_TX_NORM_NM </p>
<p>This Dcm Mode State </p>
<p>must not forbid Tx. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 9 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_ENABLE_RX_DISABLE_TX_NORM </p>
<p>This Dcm Mode State </p>
<p>must not forbid Tx. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, start Tx Pdu Group </p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring, enable Rx DM </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>result changes from false </p>
<p>to true. </p>
<p>Action List False </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, stop Tx Pdu Group </p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring, disable the Rx DM </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>result changes from true to </p>
<p>false. </p>
<p>Table 7-20  </p>
<p>Configuration of rule for starting and stopping Tx for NmFiatB with Dcm Com Control </p>
<p>Rule Switch_Tx_DM for Fiat Class C: </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>113 / 124 </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>Switch_Tx_DM </p>
<p>Name of the Rule</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE, this and </p>
<p>Action List Execution Type </p>
<p><b>BSWM_TRIGGER </b>ensure </p>
<p>that the Action List True is </p>
<p>not executed until the </p>
<p>evaluation of the </p>
<p>conditions, results in </p>
<p>BSWM_TRUE. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>CANSM_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>CANSM_BSWM_FULL_COMMUNICATION</p>
<p> </p>
<p>This condition checks if the </p>
<p>CanSm is in state </p>
<p>C</p>
<p>ANSM_BSWM_FULL_COMM</p>
<p>UNICATION</p>
<p>. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 2 </p>
<p><b>Mode</b>:  </p>
<p>NMFIAT_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT_EQUAL </p>
<p><b>Mode State</b>: </p>
<p>NM_STATE_BUS_SLEEP </p>
<p>This condition checks if the </p>
<p>Nm is not in state </p>
<p>NM_STATE_BUS_SLEEP</p>
<p>. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 3 </p>
<p><b>Mode</b>:  </p>
<p>NMFIAT_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT_EQUAL </p>
<p><b>Mode State</b>: </p>
<p>NM_STATE_PREPARE_BUS_SLEEP </p>
<p>This condition checks if the </p>
<p>Nm is not in state </p>
<p>NM_STATE_PREPARE </p>
<p>_BUS_SLEEP. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 4 </p>
<p><b>Mode</b>:  </p>
<p>NMFIAT_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT_EQUAL </p>
<p><b>Mode State</b>: </p>
<p>NM_STATE_WAIT_CHECK_ACTIVATION </p>
<p>This condition checks if the </p>
<p>Nm is not in state </p>
<p>NM_STATE_WAIT_ </p>
<p>CHECK_ACTIVATION. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 5 </p>
<p><b>Mode</b>:  </p>
<p>NMFIAT_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT_EQUAL </p>
<p><b>Mode State</b>: </p>
<p>NM_STATE_WAIT_NETWORK_STARTUP </p>
<p>This condition checks if the </p>
<p>Nm is not in state </p>
<p>NM_STATE_WAIT_ </p>
<p>NETWORK_STARTUP. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>114 / 124 </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Condition 6 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_TX_NORM_NM </p>
<p>This Dcm Mode State </p>
<p>must not forbid Tx. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 7 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_TX_NORMAL </p>
<p>This Dcm Mode State </p>
<p>must not forbid Tx. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 8 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_ENABLE_RX_DISABLE_TX_NORM_NM </p>
<p>This Dcm Mode State </p>
<p>must not forbid Tx. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 9 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_ENABLE_RX_DISABLE_TX_NORM </p>
<p>This Dcm Mode State </p>
<p>must not forbid Tx. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, start Tx Pdu Group </p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring, enable Rx DM </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>result changes from false </p>
<p>to true. </p>
<p>Action List False </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, stop Tx Pdu Group </p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring, disable the Rx DM </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>result changes from true to </p>
<p>false. </p>
<p>Table 7-21  </p>
<p>Configuration of rule for starting and stopping Tx for NmFiatC with Dcm Com Control </p>
<p> </p>
<p><b>7.7.4 </b></p>
<p><b>Rule Switch_Rx with communication control </b></p>
<p>The following table contains the recommended configuration parameter: </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>115 / 124 </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>Switch_Rx </p>
<p>Name of the Rule</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE, this and </p>
<p>Action List Execution Type </p>
<p><b>BSWM_TRIGGER </b>ensure </p>
<p>that the Action List True is </p>
<p>not executed until the </p>
<p>evaluation of the </p>
<p>conditions, results in </p>
<p>BSWM_TRUE. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>NMFIAT_MODE_INDICATION_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT_EQUAL </p>
<p><b>Mode State</b>: </p>
<p>NM_STATE_BUS_SLEEP </p>
<p>This condition checks if the </p>
<p>Nm is not in state </p>
<p>NM_STATE_BUS_SLEEP</p>
<p>. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 2 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_ENABLE_TX_NORM </p>
<p>This Dcm Mode State </p>
<p>must not forbid Rx. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 3 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_ENABLE_TX_NORM_NM </p>
<p>This Dcm Mode State </p>
<p>must not forbid Rx. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 4 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_TX_NORM_NM</p>
<p> </p>
<p>This Dcm Mode State </p>
<p>must not forbid Rx. </p>
<p>Operator </p>
<p>AND </p>
<p>All conditions must be </p>
<p>fulfilled. </p>
<p>Condition 5 </p>
<p><b>Mode</b>:  </p>
<p>DCM_COM_MODE_REQUEST_&lt;channelName&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT EQUAL </p>
<p><b>Mode State</b>: </p>
<p>DCM_DISABLE_RX_TX_NORMAL</p>
<p> </p>
<p>This Dcm Mode State </p>
<p>must not forbid Rx. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>116 / 124 </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, start Rx Pdu Group </p>
<p><b>&gt; </b></p>
<p>Enable the Deadline Monitoring for the </p>
<p>Rx Pdu Group</p>
<p> </p>
<p>only be executed when the </p>
<p>result changes from false </p>
<p>to true. </p>
<p>Action List False </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions</b>: </p>
<p><b>&gt; </b></p>
<p>Pdu Group Switch, stop Rx Pdu Group </p>
<p><b>&gt; </b></p>
<p>Disable the Deadline Monitoring for the </p>
<p>Rx Pdu Group</p>
<p> </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>result changes from true to </p>
<p>false. </p>
<p>Table 7-22  </p>
<p>Configuration of rule for starting and stopping Rx for NmFiatB and NmFiatC with Dcm Com Control </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>117 / 124 </p>
<p><b>7.8 </b></p>
<p><b>Partial Network Cluster Modes </b></p>
<p>If the PNC support is enabled in the ComM configuration the BswM will provide a  BSW </p>
<p>Mode for each  available  PNC. A  simple  use-case for the  BswM  is to  enable/disable  the </p>
<p>Com deadline monitoring according to the requested ComM PNC Mode: </p>
<p> </p>
<p>Figure 7-18 </p>
<p>ComM PNC Modes </p>
<p>The </p>
<p>Tx </p>
<p>and </p>
<p>Rx </p>
<p>IPDU </p>
<p>groups </p>
<p>are </p>
<p>started/stopped </p>
<p>for </p>
<p>the </p>
<p>communication </p>
<p>channel </p>
<p>dependent on the bus type as described in chapter 7. For the PNCs the Com Rx deadline </p>
<p>monitoring is handled separately dependent on the PNC Mode: </p>
<p><b>&gt; </b></p>
<p><b>COMM_PNC_FULL_COMMUNICATION</b>: the Rx deadline monitoring is enabled for </p>
<p>the appropriate IPDU group. </p>
<p><b>&gt; </b></p>
<p><b>COMM_PNC_NO_COMMUNICATION</b>: the Rx deadline monitoring is disabled for the </p>
<p>appropriate IPDU group. </p>
<p>The communication modes of a specific channel enable the Rx deadline monitoring for all </p>
<p>Rx IPDU groups which belong to that channel, every time this happens the deadline </p>
<p>monitoring for Rx IPDU groups which belong to a PNC which is in </p>
<p>COMM_PNC_NO_COMMUNICATION mode must be disabled. As a result the following </p>
<p>BswM configuration is recommended: </p>
<p><b>&gt; </b></p>
<p>For each PNC: a Rule which enables the deadline monitoring, refer to chapter 7.8.1. </p>
<p><b>&gt; </b></p>
<p>For each PNC: a Rule which disables the deadline monitoring, refer to chapter 7.8.2. </p>
<p><b>stm PNC Modes</b></p>
<p><b>COMM_PNC_FULL_COMMUNICATION</b></p>
<p><b>COMM_PNC_NO_COMMUNICATION</b></p>
<p><b>COMM_PNC_REQUESTED</b></p>
<p><b>COMM_PNC_PREPARE_SLEEP</b></p>
<p><b>COMM_PNC_READY_SLEEP</b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>118 / 124 </p>
<p><b>&gt; </b></p>
<p>For each communication channel: extension of the Rule which enables the deadline </p>
<p>monitoring: disable the deadline monitoring afterwards again for PNCs which are in </p>
<p>COMM_PNC_NO_COMMUNICATION, refer to 7.8.3. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>119 / 124 </p>
<p><b>7.8.1 </b></p>
<p><b>Rule Switch_On_PNC </b></p>
<p>This rule enables Rx deadline monitoring for a specific PNC. The following table contains </p>
<p>the recommended configuration parameter: </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>Switch_On_PNC&lt;index&gt; </p>
<p>Name of the Rule</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>COMM_MODE_PNC&lt;index&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>NOT_EQUAL </p>
<p><b>Mode State</b>: </p>
<p>COMM_PNC_NO_COMMUNICATION</p>
<p> </p>
<p>This condition checks if the </p>
<p>PNC mode is not equal to </p>
<p>COMM_PNC_NO_ </p>
<p>COMMUNICATION </p>
<p>(means the PNC is in </p>
<p>COMM_PNC_FULL_ </p>
<p>COMMUNICATION) </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions: </b></p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring, enable the Rx DM</p>
<p> </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>result changes from false </p>
<p>to true. </p>
<p>Table 7-23  </p>
<p>Rule Switch_On_PNC </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>120 / 124 </p>
<p><b>7.8.2 </b></p>
<p><b>Rule Switch_Off_PNC </b></p>
<p>This rule disables Rx deadline monitoring for a specific PNC. The following table contains </p>
<p>the recommended configuration parameter: </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>Switch_Off_PNC&lt;index&gt; </p>
<p>Name of the Rule</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_TRUE </p>
<p>Value after initialization is </p>
<p>BSWM_TRUE because </p>
<p>the PNC is state </p>
<p>COMM_PNC_NO_ </p>
<p>COMMUNICATION after </p>
<p>initialization. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>COMM_MODE_PNC&lt;index&gt; </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>COMM_PNC_NO_COMMUNICATION</p>
<p> </p>
<p>This condition checks if the </p>
<p>PNC mode is not equal to </p>
<p>COMM_PNC_NO_ </p>
<p>COMMUNICATION </p>
<p>(means the PNC is in </p>
<p>COMM_PNC_FULL_ </p>
<p>COMMUNICATION) </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_CONDITION </p>
<p><b>Actions: </b></p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring, disable the Rx DM</p>
<p> </p>
<p>The Execution Type is </p>
<p><b>BSWM_CONDITION </b></p>
<p>because the actions shall </p>
<p>be executed every time the </p>
<p>Rule result is TRUE. </p>
<p>Table 7-24  </p>
<p>Rule Switch_Off_PNC </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>121 / 124 </p>
<p><b>7.8.3 </b></p>
<p><b>Extension for communication start </b></p>
<p>For example a CAN channel enters state CANSM_BSWM_FULL_COMMUNICATION the </p>
<p>IPDU  groups  are  started  and  the  Rx  deadline  monitoring  is  enabled.  Afterwards  the </p>
<p>deadline </p>
<p>monitoring </p>
<p>for </p>
<p>Rx </p>
<p>IPDU </p>
<p>groups </p>
<p>of </p>
<p>PNCs </p>
<p>which </p>
<p>are </p>
<p>in </p>
<p>COMM_PNC_NO_COMMUNICATION  mode  must  be  disabled  again,  so  the  standard </p>
<p>Rule for switching the deadline monitoring is extended: </p>
<p><b>Attribute </b></p>
<p><b>Name </b></p>
<p><b>Values </b></p>
<p><b>Description </b></p>
<p>Name </p>
<p>StdRule_Switch_DM_&lt;channelName&gt; </p>
<p>Name of the Rule</p>
<p><b> </b></p>
<p>Rule Initialization </p>
<p>State </p>
<p>BSWM_FALSE </p>
<p>Value after initialization is </p>
<p>BSWM_FALSE because </p>
<p>the state is not equal to </p>
<p>CANSM_BSWM_FULL_ </p>
<p>COMMUNICATION. </p>
<p>Condition 1 </p>
<p><b>Mode</b>:  </p>
<p>CANSM_MODE_INDICATION_&lt;channelName</p>
<p>&gt;  </p>
<p><b>Relational Operator</b>: </p>
<p>EQUAL </p>
<p><b>Mode State</b>: </p>
<p>CANSM_BSWM_FULL_COMMUNICATION </p>
<p>This condition checks if the </p>
<p>CanSM mode is equal to </p>
<p>CANSM_BSWM_FULL_ </p>
<p>COMMUNICATION. </p>
<p>Action List True </p>
<p><b>Action List Execution Type</b>: </p>
<p>BSWM_TRIGGER </p>
<p><b>Actions: </b></p>
<p><b>&gt; </b></p>
<p>Deadline Monitoring, enable the Rx DM, </p>
<p>repeat this action for all Rx IPDU groups </p>
<p><b>&gt; </b></p>
<p>Action Rule: Switch_Off_PNC&lt;index_0&gt; </p>
<p><b>&gt; </b></p>
<p>Action Rule: Switch_Off_PNC&lt;index_1&gt; </p>
<p><b>&gt; </b></p>
<p>… </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>Consider the order of </p>
<p>the Actions: the </p>
<p>Switch_Off_Pnc-Rules </p>
<p>must be executed after </p>
<p>enabling the deadline </p>
<p>monitoring. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p>The Execution Type is </p>
<p><b>BSWM_TRIGGER </b></p>
<p>because the actions shall </p>
<p>only be executed when the </p>
<p>Rule result changes. </p>
<p>Execute all </p>
<p>Switch_Off_PNC Rules </p>
<p>(refer to chapter 7.8.2) </p>
<p>which check if the </p>
<p>appropriate PNC is in state </p>
<p>COMM_PNC_NO_COMM</p>
<p>UNICATION, if true the </p>
<p>deadline monitoring for this </p>
<p>PNC is disabled again. </p>
<p>Table 7-25  </p>
<p>Extension of Rule StdRule_Switch_DM </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>122 / 124 </p>
<p><b>8 </b></p>
<p><b>AUTOSAR Standard Compliance </b></p>
<p><b>8.1 </b></p>
<p><b>Deviations </b></p>
<p>- </p>
<p><b>8.2 </b></p>
<p><b>Additions/ Extensions </b></p>
<p>The BswM supports NmFiat Class B, NmFiat Class C and NmOsekmode arbitrations and </p>
<p>timers. </p>
<p><b>8.3 </b></p>
<p><b>Limitations </b></p>
<p><b>8.3.1 </b></p>
<p><b>Mode arbitration and mode control </b></p>
<p>The BswM supports more than one condition per rule but supports only the operators <b>AND </b></p>
<p>and <b>OR </b>for comparison between conditions. Action lists can only contain simple actions or </p>
<p>rules, links to other action lists are not supported. </p>
<p><b>8.3.2 </b></p>
<p><b>BSW modes </b></p>
<p>The  following  BSW  mode  indication  functions  do  not  implement  any  functionality  at  the </p>
<p>moment: </p>
<p><b>&gt; </b></p>
<p>BswM_LinSM_ScheduleEnd_Notification </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>123 / 124 </p>
<p><b>9 </b></p>
<p><b>Glossary and Abbreviations </b></p>
<p><b>9.1 </b></p>
<p><b>Glossary </b></p>
<p><b>Term </b></p>
<p><b>Description </b></p>
<p>GENy </p>
<p>Generation tool for CANbedded and MICROSAR components </p>
<p>Table 9-1  </p>
<p>Glossary </p>
<p><b>9.2 </b></p>
<p><b>Abbreviations </b></p>
<p><b>Abbreviation </b></p>
<p><b>Description </b></p>
<p>API </p>
<p>Application Programming Interface </p>
<p> </p>
<p>AUTOSAR </p>
<p>Automotive Open System Architecture </p>
<p>BSW </p>
<p>Basis Software </p>
<p>DEM </p>
<p>Diagnostic Event Manager </p>
<p>DET </p>
<p>Development Error Tracer </p>
<p>DM </p>
<p>Deadline Monitoring </p>
<p>ECU </p>
<p>Electronic Control Unit </p>
<p>HIS </p>
<p>Hersteller Initiative Software </p>
<p>ISR </p>
<p>Interrupt Service Routine </p>
<p>MICROSAR </p>
<p>Microcontroller Open System Architecture (the Vector AUTOSAR </p>
<p>solution) </p>
<p>PNC </p>
<p>Partial Network Cluster </p>
<p>PPort </p>
<p>Provide Port </p>
<p>RPort </p>
<p>Require Port </p>
<p>RTE </p>
<p>Runtime Environment </p>
<p>Rx </p>
<p>Reception </p>
<p>SRS </p>
<p>Software Requirement Specification </p>
<p>SWC </p>
<p>Software Component </p>
<p>SWS </p>
<p>Software Specification </p>
<p>Tx </p>
<p>Transmission </p>
<p>Table 9-2  </p>
<p>Abbreviations </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR BswM </p>
<p></p>
<p>2014, Vector Informatik GmbH </p>
<p>Version: 1.6.0 </p>
<p>based on template version 4.8.0 </p>
<p>124 / 124 </p>
<p><b>10  Contact </b></p>
<p>Visit our website for more information on </p>
<p> </p>
<p><b>&gt; </b></p>
<p>News </p>
<p><b>&gt; </b></p>
<p>Products </p>
<p><b>&gt; </b></p>
<p>Demo software </p>
<p><b>&gt; </b></p>
<p>Support </p>
<p><b>&gt; </b></p>
<p>Training data </p>
<p><b>&gt; </b></p>
<p>Addresses </p>
<p> </p>
<p>www.vector.com </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
</body>
</html>
{% endraw %}