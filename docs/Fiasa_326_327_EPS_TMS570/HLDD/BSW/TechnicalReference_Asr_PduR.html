---
layout: default
title: TechnicalReference_Asr_PduR
nav_order: 26
parent: Fiasa_326_327_EPS_TMS570
---
{% raw %}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
     "http://www.w3.org/TR/html4/transitional.dtd">
<html>
<head>

  <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  <title></title>
  <meta name="generator" content="LibreOffice 24.2.7.2 (Linux)"/>
  <meta name="created" content="00:00:00"/>
  <meta name="changed" content="00:00:00"/>
</head>
<body>
<h1></h1>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>MICROSAR PDU Router </b></p>
<p>Technical Reference </p>
<p> </p>
<p> </p>
<p>Version 3.10.02 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>Authors </p>
<p>Hartmut  Hörner,  Hannes  Haas,  Erich  Schondelmaier, </p>
<p>Gunnar Meiss </p>
<p>Status </p>
<p>Released </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>2 / 106 </p>
<p><b>Document Information </b></p>
<p><b>History </b></p>
<p><b>Author </b></p>
<p><b>Date </b></p>
<p><b>Version </b></p>
<p><b>Remarks </b></p>
<p>Hartmut Hörner </p>
<p>2006-02-01 </p>
<p>0.1 </p>
<p>Initial version </p>
<p>Hartmut Hörner </p>
<p>2006-03-13 </p>
<p>0.2 </p>
<p>Pre-compile variants added in chapter 3.6 </p>
<p>Configuration Phases </p>
<p>Hartmut Hörner </p>
<p>2006-03-17 </p>
<p>0.3 </p>
<p>Added chapter with required API functions </p>
<p>Hannes Haas </p>
<p>2006-06-14 </p>
<p>2.0 </p>
<p>Adapted to AUTOSAR version 2.0 </p>
<p>Hannes Haas </p>
<p>2006-07-30 </p>
<p>2.1 </p>
<p>Added LIN IF support </p>
<p>Hannes Haas </p>
<p>2006-11-22 </p>
<p>2.2 </p>
<p>Added CAN TP support </p>
<p>Added Post-Build support </p>
<p>Hannes Haas </p>
<p>2007-04-26 </p>
<p>2.3 </p>
<p>New Template </p>
<p>Simplified post-build configuration procedure </p>
<p>Revision of all chapters </p>
<p>Hannes Haas </p>
<p>2007-11-20 </p>
<p>2.4 </p>
<p>Removed non-selectable post-build configuration </p>
<p>Added Interface Gateway with Callouts </p>
<p>Hannes Haas </p>
<p>2008-01-08 </p>
<p>2.5 </p>
<p>Added TP Gateway and memory allocation </p>
<p>Added Glossary </p>
<p>Adapted to AUTOSAR 3 </p>
<p>Added include structure </p>
<p>Added J1939TP support </p>
<p>Hannes Haas </p>
<p>2008-03-26 </p>
<p>3.0 </p>
<p>Corrected return values of callout functions </p>
<p>ESCAN00024680: described PDU handle concept </p>
<p>Updated to SWS version 2.2.1 </p>
<p>TP Gateway Ring-Buffer support </p>
<p>ESCAN00025586: changed file and GENy module </p>
<p>name </p>
<p>Hannes Haas </p>
<p>2008-05-16 </p>
<p>3.1 </p>
<p>Minor improvements in all chapters </p>
<p>GENy GUI update </p>
<p>Added generator version check </p>
<p>Hannes Haas </p>
<p>2008-06-26 </p>
<p>3.2 </p>
<p>Minor improvements in all chapters </p>
<p>Adaptations to new GUI </p>
<p>Hannes Haas </p>
<p>2008-09-25 </p>
<p>3.3 </p>
<p>ESCAN00028028: Memory mapping limitations </p>
<p>Object Explorer </p>
<p>Added CRC check for configuration data </p>
<p>ESCAN00029973: Adapted GUI according to </p>
<p>AUTOSAR short names </p>
<p>Hannes Haas </p>
<p>2008-11-19 </p>
<p>3.4 </p>
<p>Intra ECU Communication </p>
<p>Erich Schondelmaier </p>
<p>2008-03-26 </p>
<p>3.5 </p>
<p>Added IpduM support </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>3 / 106 </p>
<p>Hannes Haas </p>
<p>2009-08-03 </p>
<p>3.6 </p>
<p>TP Layer Routing using AUTOSAR 4.0 API </p>
<p>Gunnar Meiss </p>
<p>2009-08-30 </p>
<p>3.6 </p>
<p>Timeout in Intra ECU Communication </p>
<p> </p>
<p>2009-08-12 </p>
<p>3.6 </p>
<p>Added LIN TP support </p>
<p>Added MOST IF support </p>
<p>Added MOST TP support </p>
<p>Gunnar Meiss </p>
<p>2009-10-12 </p>
<p>3.7 </p>
<p>Added SoAd support </p>
<p>Added Dobt support </p>
<p>Erich Schondelmaier </p>
<p>2010-01-08 </p>
<p>3.8 </p>
<p>Added Nm support </p>
<p>Added Service Ids </p>
<p>Erich Schondelmaier </p>
<p>2010-03-30 </p>
<p>3.9 </p>
<p>Updated 6.2.4 TP Buffers </p>
<p>Erich Schondelmaier </p>
<p>2010-04-29 </p>
<p> </p>
<p>Renamed J1939 to J1939Tp </p>
<p>Added 3.14 AUTOSAR 4.0 CAN TP API  </p>
<p>Added 3.13 AUTOSAR 3.0 TP API with ISO timing </p>
<p>optimization </p>
<p>Gunnar Meiss </p>
<p>2010-08-23 </p>
<p> </p>
<p>Updated to new Template </p>
<p>Added PduR_EnableRouting and </p>
<p>PduR_DisableRouting </p>
<p>Added PduR_&lt;UpTp&gt;CancelReceiveRequest </p>
<p>Added PduR_&lt;UpTp&gt;CancelTransmitRequest </p>
<p>Added PduR_&lt;UpTp&gt;ChangeParameterRequest </p>
<p>for CanTp and FrTp </p>
<p>Added PduR_&lt;UpTp&gt;ReadParameterRequest </p>
<p>Added chapter 6.5 Configuration in EcuC Data </p>
<p>Base </p>
<p>Erich Schondelmaier </p>
<p>2010-09-23 </p>
<p> </p>
<p>Added new BSWMD Parameter </p>
<p>Change Functional Description of PduR_Init </p>
<p>Updated AUTOSAR 3.0 TP API with ISO timing </p>
<p>optimization </p>
<p>Gunnar Meiss </p>
<p>2010-10-19 </p>
<p>3.10.00 </p>
<p>Added Rx for CanNm and FrNm </p>
<p>Erich Schondelmaier </p>
<p>2010-12-20 </p>
<p> </p>
<p>Added description for Balance Routing time of </p>
<p>Physical TP Routings  </p>
<p>Added chapter Tp error handling  </p>
<p>Updated API descriptions </p>
<p>Gunnar Meiss </p>
<p>2011-02-18 </p>
<p> </p>
<p>Added Cdd </p>
<p>Added Dynamic DLC Routing </p>
<p>Gunnar Meiss  </p>
<p>2012-08-10 </p>
<p>3.10.01 </p>
<p>AR3-2457: Dynamic DLC with TriggerTransmit </p>
<p>based Communication Interfaces </p>
<p>Added partial deviation of PDUR350 (Can), </p>
<p>PDUR372 (Fr), PDUR394 (LIN) </p>
<p>Erich Schondelmaier </p>
<p>2012-10-31 </p>
<p>3.10.02 </p>
<p>Added decription of ESCAN00062517 </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>4 / 106 </p>
<p><b> </b></p>
<p><b>Reference Documents </b></p>
<p><b>No. </b></p>
<p><b>Source </b></p>
<p><b>Title </b></p>
<p><b>Version </b></p>
<p>[1] </p>
<p> AUTOSAR </p>
<p>AUTOSAR_PDU_Router.pdf </p>
<p>2.2.1 </p>
<p>[2] </p>
<p> AUTOSAR </p>
<p>AUTOSAR_SWS_DET.pdf </p>
<p>2.2.0 </p>
<p>[3] </p>
<p> AUTOSAR </p>
<p>AUTOSAR_SWS_DEM.pdf </p>
<p>2.2.1 </p>
<p>[4] </p>
<p> AUTOSAR </p>
<p>AUTOSAR_BasicSoftwareModules.pdf </p>
<p>1.3.0 </p>
<p>[5] </p>
<p> AUTOSAR </p>
<p>AUTOSAR_SRS_Gateway.pdf </p>
<p>2.0.3 </p>
<p>[6] </p>
<p> AUTOSAR </p>
<p>AUTOSAR_SWS_PDU_Router.doc </p>
<p>3.8.1 </p>
<p>(draft) </p>
<p>[7] </p>
<p> Vector </p>
<p>Technical Reference Post-Build Tool Chain </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>We have configured the programs in accordance with your specifications in the </p>
<p>questionnaire. Whereas the programs do support other configurations than the one </p>
<p>specified in your questionnaire, Vector´s release of the programs delivered to your </p>
<p>company is expressly restricted to the configuration you have specified in the </p>
<p>questionnaire. </p>
<p><b> </b></p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>5 / 106 </p>
<p><b>Contents </b></p>
<p><b>1</b></p>
<p> </p>
<p><b>Component History ...................................................................................................... 12</b></p>
<p> </p>
<p><b>2</b></p>
<p> </p>
<p><b>Introduction .................................................................................................................. 14</b></p>
<p> </p>
<p>2.1</p>
<p> </p>
<p>Architecture Overview ................................................................................... 15</p>
<p> </p>
<p><b>3</b></p>
<p> </p>
<p><b>Functional Description ................................................................................................ 16</b></p>
<p> </p>
<p>3.1</p>
<p> </p>
<p>Features ........................................................................................................ 16</p>
<p> </p>
<p>3.2</p>
<p> </p>
<p>Initialization ................................................................................................... 17</p>
<p> </p>
<p>3.3</p>
<p> </p>
<p>States ............................................................................................................ 18</p>
<p> </p>
<p>3.4</p>
<p> </p>
<p>Main Functions .............................................................................................. 18</p>
<p> </p>
<p>3.5</p>
<p> </p>
<p>Error Handling ............................................................................................... 19</p>
<p> </p>
<p>3.5.1</p>
<p> </p>
<p>Development Error Reporting ........................................................................ 19</p>
<p> </p>
<p>3.5.2</p>
<p> </p>
<p>Production Code Error Reporting .................................................................. 20</p>
<p> </p>
<p>3.6</p>
<p> </p>
<p>Configuration Phases .................................................................................... 21</p>
<p> </p>
<p>3.6.1</p>
<p> </p>
<p>Link-time ....................................................................................................... 21</p>
<p> </p>
<p>3.6.2</p>
<p> </p>
<p>Link-time for post-build capable configurations .............................................. 22</p>
<p> </p>
<p>3.6.3</p>
<p> </p>
<p>Post-build ...................................................................................................... 22</p>
<p> </p>
<p>3.7</p>
<p> </p>
<p>Memory allocation ......................................................................................... 24</p>
<p> </p>
<p>3.8</p>
<p> </p>
<p>Interface Layer Gateway ............................................................................... 25</p>
<p> </p>
<p>3.8.1</p>
<p> </p>
<p>Dynamic Dlc Routing ..................................................................................... 25</p>
<p> </p>
<p>3.9</p>
<p> </p>
<p>Low-Level routing of TP N-PDUs ................................................................... 26</p>
<p> </p>
<p>3.10</p>
<p> </p>
<p>Buffer Types .................................................................................................. 26</p>
<p> </p>
<p>3.10.1</p>
<p> </p>
<p>Buffer overwrite routing (queue size &lt; 2) ....................................................... 26</p>
<p> </p>
<p>3.10.1.1</p>
<p> </p>
<p>Timing aspects .............................................................................................. 27</p>
<p> </p>
<p>3.10.1.2</p>
<p> </p>
<p>Direct data provision ...................................................................................... 27</p>
<p> </p>
<p>3.10.1.3</p>
<p> </p>
<p>Trigger transmit data provision ...................................................................... 27</p>
<p> </p>
<p>3.10.2</p>
<p> </p>
<p>FiFo queued routing (queue size &gt;= 2) .......................................................... 27</p>
<p> </p>
<p>3.10.2.1</p>
<p> </p>
<p>Timing aspects .............................................................................................. 27</p>
<p> </p>
<p>3.10.2.2</p>
<p> </p>
<p>Example for the FiFo queue handling ............................................................ 28</p>
<p> </p>
<p>3.11</p>
<p> </p>
<p>Transport Protocol Gateway .......................................................................... 28</p>
<p> </p>
<p>3.12</p>
<p> </p>
<p>AUTOSAR 3.0 TP API ................................................................................... 29</p>
<p> </p>
<p>3.13</p>
<p> </p>
<p>AUTOSAR 3.0 TP API with ISO timing optimization ...................................... 30</p>
<p> </p>
<p>3.14</p>
<p> </p>
<p>AUTOSAR 4.0 CAN TP API ........................................................................... 32</p>
<p> </p>
<p>3.15</p>
<p> </p>
<p>Tp error handling ........................................................................................... 32</p>
<p> </p>
<p>3.16</p>
<p> </p>
<p>TP Intra ECU Communication ....................................................................... 32</p>
<p> </p>
<p><b>4</b></p>
<p> </p>
<p><b>Integration .................................................................................................................... 35</b></p>
<p> </p>
<p>4.1</p>
<p> </p>
<p>Scope of Delivery .......................................................................................... 35</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>6 / 106 </p>
<p>4.1.1</p>
<p> </p>
<p>Static Files ..................................................................................................... 35</p>
<p> </p>
<p>4.1.2</p>
<p> </p>
<p>Dynamic Files................................................................................................ 36</p>
<p> </p>
<p>4.2</p>
<p> </p>
<p>Include Structure ........................................................................................... 37</p>
<p> </p>
<p>4.3</p>
<p> </p>
<p>Critical Sections ............................................................................................ 38</p>
<p> </p>
<p>4.4</p>
<p> </p>
<p>Application Access ........................................................................................ 38</p>
<p> </p>
<p><b>5</b></p>
<p> </p>
<p><b>API Description ............................................................................................................ 39</b></p>
<p> </p>
<p>5.1</p>
<p> </p>
<p>Services provided by PDUR .......................................................................... 39</p>
<p> </p>
<p>5.1.1</p>
<p> </p>
<p>PduR_Init ...................................................................................................... 39</p>
<p> </p>
<p>5.1.2</p>
<p> </p>
<p>PduR_InitMemory ......................................................................................... 39</p>
<p> </p>
<p>5.1.3</p>
<p> </p>
<p>PduR_GetVersionInfo .................................................................................... 40</p>
<p> </p>
<p>5.1.4</p>
<p> </p>
<p>PduR_GetConfigurationId ............................................................................. 40</p>
<p> </p>
<p>5.1.5</p>
<p> </p>
<p>PduR_MainFunction ...................................................................................... 41</p>
<p> </p>
<p>5.1.6</p>
<p> </p>
<p>PduR_EnableRouting .................................................................................... 41</p>
<p> </p>
<p>5.1.7</p>
<p> </p>
<p>PduR_DisableRouting ................................................................................... 42</p>
<p> </p>
<p>5.1.7.1</p>
<p> </p>
<p>PduR_CanTpStartOfReception ..................................................................... 42</p>
<p> </p>
<p>5.1.8</p>
<p> </p>
<p>PduR_CanTpCopyRxData ............................................................................ 43</p>
<p> </p>
<p>5.1.9</p>
<p> </p>
<p>PduR_CanTpCopyTxData ............................................................................. 44</p>
<p> </p>
<p>5.1.10</p>
<p> </p>
<p>PduR_CddDobtSetCanTpState ..................................................................... 46</p>
<p> </p>
<p>5.1.11</p>
<p> </p>
<p>Provided Interfaces to Lower Communication Interface Layers ..................... 46</p>
<p> </p>
<p>5.1.11.1</p>
<p> </p>
<p>PduR_&lt;LoIf&gt;RxIndication ............................................................................. 46</p>
<p> </p>
<p>5.1.11.2</p>
<p> </p>
<p>PduR_&lt;LoIf&gt;TxConfirmation ......................................................................... 47</p>
<p> </p>
<p>5.1.11.3</p>
<p> </p>
<p>PduR_&lt;LoIf&gt;TriggerTransmit ........................................................................ 47</p>
<p> </p>
<p>5.1.12</p>
<p> </p>
<p>Provided Interfaces to Lower Transport Protocol Layers ............................... 48</p>
<p> </p>
<p>5.1.12.1</p>
<p> </p>
<p>PduR_&lt;LoTp&gt;ProvideRxBuffer ..................................................................... 48</p>
<p> </p>
<p>5.1.12.2</p>
<p> </p>
<p>PduR_&lt;LoTp&gt;RxIndication ........................................................................... 49</p>
<p> </p>
<p>5.1.12.3</p>
<p> </p>
<p>PduR_&lt;LoTp&gt;ProvideTxBuffer...................................................................... 50</p>
<p> </p>
<p>5.1.12.4</p>
<p> </p>
<p>PduR_&lt;LoTp&gt;TxConfirmation ....................................................................... 51</p>
<p> </p>
<p>5.1.12.5</p>
<p> </p>
<p>PduR_&lt;LoTp&gt;ChangeParameterConfirmation .............................................. 52</p>
<p> </p>
<p>5.1.13</p>
<p> </p>
<p>Provided Interfaces to Upper Layers ............................................................. 53</p>
<p> </p>
<p>5.1.13.1</p>
<p> </p>
<p>PduR_&lt;Up&gt;Transmit ..................................................................................... 53</p>
<p> </p>
<p>5.1.14</p>
<p> </p>
<p>Provided Interfaces to Upper Transport Protocol Layers ............................... 54</p>
<p> </p>
<p>5.1.14.1</p>
<p> </p>
<p>PduR_&lt;UpTp&gt;ChangeParameterRequest .................................................... 54</p>
<p> </p>
<p>5.1.14.2</p>
<p> </p>
<p>PduR_&lt;UpTp&gt;ReadParameterRequest ........................................................ 55</p>
<p> </p>
<p>5.1.14.3</p>
<p> </p>
<p>PduR_&lt;UpTp&gt;CancelReceiveRequest ......................................................... 56</p>
<p> </p>
<p>5.1.14.4</p>
<p> </p>
<p>PduR_&lt;UpTp&gt;CancelTransmitRequest ........................................................ 56</p>
<p> </p>
<p>5.1.15</p>
<p> </p>
<p>[Service Name] .............................................................................................. 57</p>
<p> </p>
<p>5.2</p>
<p> </p>
<p>Services used by PDUR ................................................................................ 57</p>
<p> </p>
<p>5.3</p>
<p> </p>
<p>Dependencies to other BSW Modules used by PDUR ................................... 58</p>
<p> </p>
<p>5.3.1</p>
<p> </p>
<p>Callout Functions .......................................................................................... 59</p>
<p> </p>
<p>5.3.2</p>
<p> </p>
<p>IF Routing Callout ......................................................................................... 59</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>7 / 106 </p>
<p><b>6</b></p>
<p> </p>
<p><b>Configuration................................................................................................................ 60</b></p>
<p> </p>
<p>6.1</p>
<p> </p>
<p>Configuration Variants ................................................................................... 60</p>
<p> </p>
<p>6.2</p>
<p> </p>
<p>Configuration with GENy ............................................................................... 60</p>
<p> </p>
<p>6.2.1</p>
<p> </p>
<p>PduR Properties ............................................................................................ 60</p>
<p> </p>
<p>6.2.2</p>
<p> </p>
<p>Automatic Routing Path Configuration ........................................................... 65</p>
<p> </p>
<p>6.2.2.1</p>
<p> </p>
<p>Interface and Transport Protocol API Forwarding .......................................... 65</p>
<p> </p>
<p>6.2.2.2</p>
<p> </p>
<p>Interface Gateway Routing Paths .................................................................. 65</p>
<p> </p>
<p>6.2.2.3</p>
<p> </p>
<p>Transport Protocol Gateway Routing Paths ................................................... 66</p>
<p> </p>
<p>6.2.3</p>
<p> </p>
<p>Manual Gateway Routing Path Configuration ................................................ 67</p>
<p> </p>
<p>6.2.3.1</p>
<p> </p>
<p>Creating a routing path .................................................................................. 67</p>
<p> </p>
<p>6.2.3.2</p>
<p> </p>
<p>Removing a routing path ............................................................................... 67</p>
<p> </p>
<p>6.2.3.3</p>
<p> </p>
<p>Interface Gateway Routing Paths .................................................................. 68</p>
<p> </p>
<p>6.2.3.4</p>
<p> </p>
<p>Transport Protocol Gateway Routing Paths ................................................... 70</p>
<p> </p>
<p>6.2.4</p>
<p> </p>
<p>TP Buffers ..................................................................................................... 73</p>
<p> </p>
<p>6.2.4.1</p>
<p> </p>
<p>Creating a TP Buffer ...................................................................................... 74</p>
<p> </p>
<p>6.2.4.2</p>
<p> </p>
<p>Removing a TP Buffer ................................................................................... 74</p>
<p> </p>
<p>6.2.4.3</p>
<p> </p>
<p>TP Buffer Properties ...................................................................................... 74</p>
<p> </p>
<p>6.2.5</p>
<p> </p>
<p>IF and TP Application Access ........................................................................ 76</p>
<p> </p>
<p>6.2.5.1</p>
<p> </p>
<p>Creating an Application I-PDU ....................................................................... 76</p>
<p> </p>
<p>6.2.5.2</p>
<p> </p>
<p>Removing an Application I-PDU .................................................................... 76</p>
<p> </p>
<p>6.2.5.3</p>
<p> </p>
<p>Application I-PDU Properties ......................................................................... 76</p>
<p> </p>
<p>6.3</p>
<p> </p>
<p>Intra ECU Communication ............................................................................. 78</p>
<p> </p>
<p>6.3.1.1</p>
<p> </p>
<p>Creating Intra ECU communication TP I-PDUs.............................................. 78</p>
<p> </p>
<p>6.3.1.2</p>
<p> </p>
<p>Removing Intra ECU communication TP I-PDUs ........................................... 79</p>
<p> </p>
<p>6.3.1.3</p>
<p> </p>
<p>Intra ECU communication Properties ............................................................ 79</p>
<p> </p>
<p>6.4</p>
<p> </p>
<p>Object Explorer ............................................................................................. 80</p>
<p> </p>
<p>6.5</p>
<p> </p>
<p>Configuration in EcuC Data Base .................................................................. 81</p>
<p> </p>
<p>6.5.1</p>
<p> </p>
<p>PduR ............................................................................................................. 81</p>
<p> </p>
<p>6.5.1.1</p>
<p> </p>
<p>PduRBswModules ......................................................................................... 81</p>
<p> </p>
<p>6.5.1.2</p>
<p> </p>
<p>PduRGeneral ................................................................................................ 82</p>
<p> </p>
<p>6.5.1.3</p>
<p> </p>
<p>PduRGlobalConfig ........................................................................................ 87</p>
<p> </p>
<p>6.5.1.4</p>
<p> </p>
<p>PduRRoutingTable ........................................................................................ 88</p>
<p> </p>
<p>6.5.1.5</p>
<p> </p>
<p>PduRRoutingPath ......................................................................................... 88</p>
<p> </p>
<p>6.5.1.6</p>
<p> </p>
<p>PduRDefaultValue ......................................................................................... 89</p>
<p> </p>
<p>6.5.1.7</p>
<p> </p>
<p>PduRDefaultValueElement ............................................................................ 89</p>
<p> </p>
<p>6.5.1.8</p>
<p> </p>
<p>PduRDestPdu ............................................................................................... 90</p>
<p> </p>
<p>6.5.1.9</p>
<p> </p>
<p>PduRSrcPdu ................................................................................................. 91</p>
<p> </p>
<p>6.5.1.10</p>
<p> </p>
<p>PduRRoutingPathGroup ................................................................................ 91</p>
<p> </p>
<p>6.5.1.11</p>
<p> </p>
<p>PduRTpBufferTable ....................................................................................... 92</p>
<p> </p>
<p>6.5.1.12</p>
<p> </p>
<p>PduRTpBuffer ............................................................................................... 93</p>
<p> </p>
<p>6.5.1.13</p>
<p> </p>
<p>PduRTxBufferTable ....................................................................................... 94</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>8 / 106 </p>
<p>6.5.1.14</p>
<p> </p>
<p>PduRTxBuffer ................................................................................................ 94</p>
<p> </p>
<p>6.5.1.15</p>
<p> </p>
<p>PduRApplicationAccess ................................................................................ 95</p>
<p> </p>
<p>6.5.1.16</p>
<p> </p>
<p>PduRApplicationPdu ..................................................................................... 95</p>
<p> </p>
<p>6.5.1.17</p>
<p> </p>
<p>PduRApplicationPduType .............................................................................. 96</p>
<p> </p>
<p>6.5.1.18</p>
<p> </p>
<p>PduRRxIfApplicationPdu ............................................................................... 96</p>
<p> </p>
<p>6.5.1.19</p>
<p> </p>
<p>PduRTxIfApplicationPdu................................................................................ 97</p>
<p> </p>
<p>6.5.1.20</p>
<p> </p>
<p>PduRRxTpApplicationPdu ............................................................................. 97</p>
<p> </p>
<p>6.5.1.21</p>
<p> </p>
<p>PduRTxTpApplicationPdu ............................................................................. 98</p>
<p> </p>
<p>6.5.1.22</p>
<p> </p>
<p>VectorCommonData ...................................................................................... 98</p>
<p> </p>
<p><b>7</b></p>
<p> </p>
<p><b>AUTOSAR Standard Compliance .............................................................................. 100</b></p>
<p> </p>
<p>7.1</p>
<p> </p>
<p>Deviations ................................................................................................... 100</p>
<p> </p>
<p>7.2</p>
<p> </p>
<p>Limitations ................................................................................................... 100</p>
<p> </p>
<p><b>8</b></p>
<p> </p>
<p><b>Glossary and Abbreviations ...................................................................................... 102</b></p>
<p> </p>
<p>8.1</p>
<p> </p>
<p>Glossary ...................................................................................................... 102</p>
<p> </p>
<p>8.2</p>
<p> </p>
<p>Abbreviations .............................................................................................. 104</p>
<p> </p>
<p><b>9</b></p>
<p> </p>
<p><b>Contact ........................................................................................................................ 106</b></p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>9 / 106 </p>
<p><b>Illustrations </b></p>
<p>Figure 2-1</p>
<p> </p>
<p>AUTOSAR architecture ............................................................................. 15</p>
<p> </p>
<p>Figure 2-2</p>
<p> </p>
<p>Interfaces to adjacent modules of the PDUR ............................................ 15</p>
<p> </p>
<p>Figure 3-1</p>
<p> </p>
<p>PduR State Machine ................................................................................. 18</p>
<p> </p>
<p>Figure 3-2</p>
<p> </p>
<p>Usage of the FiFo buffer (D FiFo and TT-FiFo handling) ........................... 28</p>
<p> </p>
<p>Figure 3-3</p>
<p> </p>
<p>Tp timeout behavior depending on the configured chunk size ................... 32</p>
<p> </p>
<p>Figure 3-4</p>
<p> </p>
<p>Sequence diagram of the TP intra ECU communication ........................... 33</p>
<p> </p>
<p>Figure 4-1</p>
<p> </p>
<p>Include structure ....................................................................................... 37</p>
<p> </p>
<p>Figure 6-1</p>
<p> </p>
<p>PduR Configuration .................................................................................. 61</p>
<p> </p>
<p>Figure 6-2</p>
<p> </p>
<p>PduR Parameters ..................................................................................... 61</p>
<p> </p>
<p>Figure 6-3</p>
<p> </p>
<p>PduR CAN TP 4.0 Conversion Properties ................................................. 64</p>
<p> </p>
<p>Figure 6-4</p>
<p> </p>
<p>IF and TP Routing Paths visualize API Forwardings ................................. 65</p>
<p> </p>
<p>Figure 6-5</p>
<p> </p>
<p>API Forwarding Parameters ...................................................................... 65</p>
<p> </p>
<p>Figure 6-6</p>
<p> </p>
<p>Creation of an interface layer routing path ................................................ 67</p>
<p> </p>
<p>Figure 6-7</p>
<p> </p>
<p>Removing a Routing Path ......................................................................... 68</p>
<p> </p>
<p>Figure 6-8</p>
<p> </p>
<p>IF Gateway Routing Path Parameters....................................................... 68</p>
<p> </p>
<p>Figure 6-9</p>
<p> </p>
<p>TP Gateway Routing Path Parameters ..................................................... 71</p>
<p> </p>
<p>Figure 6-10</p>
<p> </p>
<p>Creating a TP Buffer ................................................................................. 74</p>
<p> </p>
<p>Figure 6-11</p>
<p> </p>
<p>Remove a TP Buffer ................................................................................. 74</p>
<p> </p>
<p>Figure 6-12</p>
<p> </p>
<p>Creating an Application Access I-PDU ...................................................... 76</p>
<p> </p>
<p>Figure 6-13</p>
<p> </p>
<p>Removing an Application Access I-PDU .................................................... 76</p>
<p> </p>
<p>Figure 6-14</p>
<p> </p>
<p>Enabling intra ECU communication in GENy ............................................ 78</p>
<p> </p>
<p>Figure 6-15</p>
<p> </p>
<p>Creating Intra ECU communication TP I-PDUs ......................................... 78</p>
<p> </p>
<p>Figure 6-16</p>
<p> </p>
<p>Removing Intra ECU communication TP I-PDUs ...................................... 79</p>
<p> </p>
<p>Figure 6-17</p>
<p> </p>
<p>Object Explorer in GENy ........................................................................... 80</p>
<p> </p>
<p>Figure 6-18</p>
<p> </p>
<p>Object Explorer Properties ........................................................................ 80</p>
<p> </p>
<p><b> </b></p>
<p><b>Tables </b></p>
<p>Table 1-1 </p>
<p> </p>
<p>Component history.................................................................................... 13</p>
<p> </p>
<p>Table 3-1 </p>
<p> </p>
<p>Supported SWS features .......................................................................... 16</p>
<p> </p>
<p>Table 3-2 </p>
<p> </p>
<p>Additionally supported features ................................................................. 17</p>
<p> </p>
<p>Table 3-3 </p>
<p> </p>
<p>Not supported SWS features .................................................................... 17</p>
<p> </p>
<p>Table 3-4 </p>
<p> </p>
<p>Main functions that have to be called cyclically ......................................... 18</p>
<p> </p>
<p>Table 3-5 </p>
<p> </p>
<p>Errors reported to DET ............................................................................. 20</p>
<p> </p>
<p>Table 3-6 </p>
<p> </p>
<p>Errors reported to DEM ............................................................................. 21</p>
<p> </p>
<p>Table 3-7 </p>
<p> </p>
<p>Memory usage (RAM) of different PDU Router features (relevant for </p>
<p>computing the memory size required by PDU Router) .............................. 24</p>
<p> </p>
<p>Table 3-8 </p>
<p> </p>
<p>Dynamic DLC Interface Routing Overview ................................................ 25</p>
<p> </p>
<p>Table 4-1 </p>
<p> </p>
<p>Static files ................................................................................................. 36</p>
<p> </p>
<p>Table 4-2 </p>
<p> </p>
<p>Generated files ......................................................................................... 36</p>
<p> </p>
<p>Table 5-1 </p>
<p> </p>
<p>PduR_Init .................................................................................................. 39</p>
<p> </p>
<p>Table 5-2 </p>
<p> </p>
<p>PduR_InitMemory ..................................................................................... 40</p>
<p> </p>
<p>Table 5-3 </p>
<p> </p>
<p>PduR_GetVersionInfo ............................................................................... 40</p>
<p> </p>
<p>Table 5-4 </p>
<p> </p>
<p>PduR_GetConfigurationId ......................................................................... 41</p>
<p> </p>
<p>Table 5-5 </p>
<p> </p>
<p>PduR_MainFunction ................................................................................. 41</p>
<p> </p>
<p>Table 5-6 </p>
<p> </p>
<p>PduR_EnableRouting ............................................................................... 42</p>
<p> </p>
<p>Table 5-7 </p>
<p> </p>
<p>PduR_DisableRouting .............................................................................. 42</p>
<p> </p>
<p>Table 5-8 </p>
<p> </p>
<p>PduR_CanTpStartOfReception ................................................................. 43</p>
<p> </p>
<p>Table 5-9 </p>
<p> </p>
<p>PduR_CanTpCopyRxData ........................................................................ 44</p>
<p> </p>
<p>Table 5-10 </p>
<p> </p>
<p>PduR_CanTpCopyTxData ........................................................................ 46</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>10 / 106 </p>
<p>Table 5-11 </p>
<p> </p>
<p>PduR_CddDobtSetCanTpState................................................................. 46</p>
<p> </p>
<p>Table 5-12 </p>
<p> </p>
<p>PduR_&lt;LoIf&gt;RxIndication ......................................................................... 47</p>
<p> </p>
<p>Table 5-13 </p>
<p> </p>
<p>PduR_&lt;LoIf&gt;TxConfirmation .................................................................... 47</p>
<p> </p>
<p>Table 5-14 </p>
<p> </p>
<p>PduR_&lt;LoIf&gt;TriggerTransmit .................................................................... 48</p>
<p> </p>
<p>Table 5-15 </p>
<p> </p>
<p>PduR_&lt;LoTp&gt;ProvideRxBuffer ................................................................. 49</p>
<p> </p>
<p>Table 5-16 </p>
<p> </p>
<p>PduR_&lt;LoTp&gt;RxIndication ....................................................................... 50</p>
<p> </p>
<p>Table 5-17 </p>
<p> </p>
<p>PduR_&lt;LoTp&gt;ProvideTxBuffer ................................................................. 51</p>
<p> </p>
<p>Table 5-18 </p>
<p> </p>
<p>PduR_&lt;LoTp&gt;TxConfirmation .................................................................. 52</p>
<p> </p>
<p>Table 5-19 </p>
<p> </p>
<p>PduR_&lt;LoTp&gt;ChangeParameterConfirmation ......................................... 53</p>
<p> </p>
<p>Table 5-20 </p>
<p> </p>
<p>PduR_&lt;Up&gt;Transmit ................................................................................ 54</p>
<p> </p>
<p>Table 5-21 </p>
<p> </p>
<p>PduR_&lt;UpTp&gt;ChangeParameterRequest ................................................ 55</p>
<p> </p>
<p>Table 5-22 </p>
<p> </p>
<p>PduR_&lt;UpTp&gt;ReadParameterRequest .................................................... 55</p>
<p> </p>
<p>Table 5-23 </p>
<p> </p>
<p>PduR_&lt;UpTp&gt;CancelReceiveRequest ..................................................... 56</p>
<p> </p>
<p>Table 5-24 </p>
<p> </p>
<p>PduR_&lt;UpTp&gt;CancelTransmitRequest .................................................... 57</p>
<p> </p>
<p>Table 5-25 </p>
<p> </p>
<p>Services used by the PDUR ..................................................................... 58</p>
<p> </p>
<p>Table 5-26 </p>
<p> </p>
<p>IF Routing Callout ..................................................................................... 59</p>
<p> </p>
<p>Table 6-1 </p>
<p> </p>
<p>PduR Properties ....................................................................................... 63</p>
<p> </p>
<p>Table 6-2 </p>
<p> </p>
<p>IF Gateway Routing Path Parameters....................................................... 70</p>
<p> </p>
<p>Table 6-3 </p>
<p> </p>
<p>TP Gateway Routing Path Parameters ..................................................... 71</p>
<p> </p>
<p>Table 6-4 </p>
<p> </p>
<p>TP Buffer Properties ................................................................................. 75</p>
<p> </p>
<p>Table 6-5 </p>
<p> </p>
<p>Application Access I-PDU Properties ........................................................ 77</p>
<p> </p>
<p>Table 6-6 </p>
<p> </p>
<p>Intra ECU communication Properties ........................................................ 79</p>
<p> </p>
<p>Table 6-7 </p>
<p> </p>
<p>Object Explorer Properties ........................................................................ 80</p>
<p> </p>
<p>Table 6-8 </p>
<p> </p>
<p>Container PduR ........................................................................................ 81</p>
<p> </p>
<p>Table 6-9 </p>
<p> </p>
<p>Container PduRBswModules .................................................................... 81</p>
<p> </p>
<p>Table 6-10 </p>
<p> </p>
<p>Attributes of PduRBswModules ................................................................ 82</p>
<p> </p>
<p>Table 6-11 </p>
<p> </p>
<p>Container PduRGeneral............................................................................ 82</p>
<p> </p>
<p>Table 6-12 </p>
<p> </p>
<p>Attributes of PduRGeneral ........................................................................ 87</p>
<p> </p>
<p>Table 6-13 </p>
<p> </p>
<p>Container PduRGlobalConfig .................................................................... 87</p>
<p> </p>
<p>Table 6-14 </p>
<p> </p>
<p>Attributes of PduRGlobalConfig ................................................................ 87</p>
<p> </p>
<p>Table 6-15 </p>
<p> </p>
<p>Sub Containers of PduRGlobalConfig ....................................................... 87</p>
<p> </p>
<p>Table 6-16 </p>
<p> </p>
<p>Container PduRRoutingTable ................................................................... 88</p>
<p> </p>
<p>Table 6-17 </p>
<p> </p>
<p>Sub Containers of PduRRoutingTable ....................................................... 88</p>
<p> </p>
<p>Table 6-18 </p>
<p> </p>
<p>Container PduRRoutingPath ..................................................................... 88</p>
<p> </p>
<p>Table 6-19 </p>
<p> </p>
<p>Attributes of PduRRoutingPath ................................................................. 89</p>
<p> </p>
<p>Table 6-20 </p>
<p> </p>
<p>Sub Containers of PduRRoutingPath ........................................................ 89</p>
<p> </p>
<p>Table 6-21 </p>
<p> </p>
<p>Container PduRDefaultValue .................................................................... 89</p>
<p> </p>
<p>Table 6-22 </p>
<p> </p>
<p>Sub Containers of PduRDefaultValue ....................................................... 89</p>
<p> </p>
<p>Table 6-23 </p>
<p> </p>
<p>Container PduRDefaultValueElement ....................................................... 89</p>
<p> </p>
<p>Table 6-24 </p>
<p> </p>
<p>Attributes of PduRDefaultValueElement .................................................... 90</p>
<p> </p>
<p>Table 6-25 </p>
<p> </p>
<p>Container PduRDestPdu........................................................................... 90</p>
<p> </p>
<p>Table 6-26 </p>
<p> </p>
<p>Attributes of PduRDestPdu ....................................................................... 91</p>
<p> </p>
<p>Table 6-27 </p>
<p> </p>
<p>Container PduRSrcPdu ............................................................................ 91</p>
<p> </p>
<p>Table 6-28 </p>
<p> </p>
<p>Attributes of PduRSrcPdu ......................................................................... 91</p>
<p> </p>
<p>Table 6-29 </p>
<p> </p>
<p>Container PduRRoutingPathGroup ........................................................... 92</p>
<p> </p>
<p>Table 6-30 </p>
<p> </p>
<p>Attributes of PduRRoutingPathGroup ....................................................... 92</p>
<p> </p>
<p>Table 6-31 </p>
<p> </p>
<p>Container PduRTpBufferTable .................................................................. 93</p>
<p> </p>
<p>Table 6-32 </p>
<p> </p>
<p>Attributes of PduRTpBufferTable ............................................................... 93</p>
<p> </p>
<p>Table 6-33 </p>
<p> </p>
<p>Sub Containers of PduRTpBufferTable ..................................................... 93</p>
<p> </p>
<p>Table 6-34 </p>
<p> </p>
<p>Container PduRTpBuffer ........................................................................... 93</p>
<p> </p>
<p>Table 6-35 </p>
<p> </p>
<p>Attributes of PduRTpBuffer ....................................................................... 93</p>
<p> </p>
<p>Table 6-36 </p>
<p> </p>
<p>Container PduRTxBufferTable .................................................................. 94</p>
<p> </p>
<p>Table 6-37 </p>
<p> </p>
<p>Attributes of PduRTxBufferTable ............................................................... 94</p>
<p> </p>
<p>Table 6-38 </p>
<p> </p>
<p>Sub Containers of PduRTxBufferTable ..................................................... 94</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>11 / 106 </p>
<p>Table 6-39 </p>
<p> </p>
<p>Container PduRTxBuffer ........................................................................... 94</p>
<p> </p>
<p>Table 6-40 </p>
<p> </p>
<p>Attributes of PduRTxBuffer ....................................................................... 95</p>
<p> </p>
<p>Table 6-41 </p>
<p> </p>
<p>Container PduRApplicationAccess ........................................................... 95</p>
<p> </p>
<p>Table 6-42 </p>
<p> </p>
<p>Sub Containers of PduRApplicationAccess............................................... 95</p>
<p> </p>
<p>Table 6-43 </p>
<p> </p>
<p>Container PduRApplicationPdu ................................................................. 95</p>
<p> </p>
<p>Table 6-44 </p>
<p> </p>
<p>Sub Containers of PduRApplicationPdu .................................................... 96</p>
<p> </p>
<p>Table 6-45 </p>
<p> </p>
<p>Container PduRApplicationPduType ......................................................... 96</p>
<p> </p>
<p>Table 6-46 </p>
<p> </p>
<p>Sub Containers of PduRApplicationPduType ............................................ 96</p>
<p> </p>
<p>Table 6-47 </p>
<p> </p>
<p>Container PduRRxIfApplicationPdu .......................................................... 96</p>
<p> </p>
<p>Table 6-48 </p>
<p> </p>
<p>Attributes of PduRRxIfApplicationPdu ....................................................... 97</p>
<p> </p>
<p>Table 6-49 </p>
<p> </p>
<p>Container PduRTxIfApplicationPdu ........................................................... 97</p>
<p> </p>
<p>Table 6-50 </p>
<p> </p>
<p>Attributes of PduRTxIfApplicationPdu ....................................................... 97</p>
<p> </p>
<p>Table 6-51 </p>
<p> </p>
<p>Container PduRRxTpApplicationPdu ........................................................ 97</p>
<p> </p>
<p>Table 6-52 </p>
<p> </p>
<p>Attributes of PduRRxTpApplicationPdu..................................................... 98</p>
<p> </p>
<p>Table 6-53 </p>
<p> </p>
<p>Container PduRTxTpApplicationPdu ......................................................... 98</p>
<p> </p>
<p>Table 6-54 </p>
<p> </p>
<p>Attributes of PduRTxTpApplicationPdu ..................................................... 98</p>
<p> </p>
<p>Table 6-55 </p>
<p> </p>
<p>Container VectorCommonData ................................................................. 99</p>
<p> </p>
<p>Table 6-56 </p>
<p> </p>
<p>Attributes of VectorCommonData .............................................................. 99</p>
<p> </p>
<p>Table 8-1 </p>
<p> </p>
<p>Glossary ................................................................................................. 104</p>
<p> </p>
<p>Table 8-2 </p>
<p> </p>
<p>Abbreviations .......................................................................................... 105</p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>12 / 106 </p>
<p><b>1 </b></p>
<p><b>Component History </b></p>
<p>The </p>
<p>component </p>
<p>history </p>
<p>gives </p>
<p>an </p>
<p>overview </p>
<p>over </p>
<p>the </p>
<p>important </p>
<p>milestones </p>
<p>that </p>
<p>are </p>
<p>supported in the different versions of the component.  </p>
<p><b>Component Version </b></p>
<p><b>New Features </b></p>
<p>2.00.00 </p>
<p><b>&gt; </b></p>
<p>Support for AUTOSAR release 2.0 </p>
<p>2.01.00 </p>
<p><b>&gt; </b></p>
<p>LIN Interface support added </p>
<p><b>&gt; </b></p>
<p>CAN TP support  added </p>
<p>2.02.00 </p>
<p><b>&gt; </b></p>
<p>Post-build configuration </p>
<p>2.03.00 </p>
<p><b>&gt; </b></p>
<p>Support for AUTOSAR release 2.1 </p>
<p><b>&gt; </b></p>
<p>FlexRay Interface and TP support </p>
<p>2.04.00 </p>
<p><b>&gt; </b></p>
<p>Interface layer gateway </p>
<p>2.05.00 </p>
<p><b>&gt; </b></p>
<p>Support for AUTOSAR release 3 (partially) </p>
<p><b>&gt; </b></p>
<p>TP layer gateway </p>
<p><b>&gt; </b></p>
<p>J1939Tp support </p>
<p><b>&gt; </b></p>
<p>API forwarding between COM and TP layer </p>
<p><b>&gt; </b></p>
<p>AUTOSAR memory and compiler abstraction </p>
<p>3.00.00 </p>
<p><b>&gt; </b></p>
<p>API change for COM &lt;-&gt; CanTp API forwarding </p>
<p><b>&gt; </b></p>
<p>AUTOSAR release 3 (PDU Router SWS Version 2.2.1) </p>
<p><b>&gt; </b></p>
<p>TP layer routing supporting ring-buffer </p>
<p>3.01.00 </p>
<p><b>&gt; </b></p>
<p>Minor improvements (see source code history) </p>
<p>3.02.00 </p>
<p><b>&gt; </b></p>
<p>Support for TMS320 </p>
<p><b>&gt; </b></p>
<p>Generator version check  </p>
<p>3.03.00 </p>
<p><b>&gt; </b></p>
<p>Interface for application  access to interface and TP layer PDUs (optional </p>
<p>AUTOSAR extension) </p>
<p>3.04.00 </p>
<p><b>&gt; </b></p>
<p>CRC Check of configuration data </p>
<p><b>&gt; </b></p>
<p>Application access to PDU Router services using the modules ApplIf and </p>
<p>ApplTp </p>
<p>3.05.00 </p>
<p><b>&gt; </b></p>
<p>Intra ECU communication for TP PDUs </p>
<p>3.06.00 </p>
<p><b>&gt; </b></p>
<p>IPDUM support added </p>
<p>3.07.00 </p>
<p><b>&gt; </b></p>
<p>MOST Interface support added </p>
<p><b>&gt; </b></p>
<p>MOST TP support  added </p>
<p>3.08.00 </p>
<p><b>&gt; </b></p>
<p>Multiple Configuration </p>
<p>3.09.00 </p>
<p><b>&gt; </b></p>
<p>LIN TP support  added </p>
<p><b>&gt; </b></p>
<p>Optional CanTp API as specified by AUTOSAR 4.0 </p>
<p><b>&gt; </b></p>
<p>MOST TP support added </p>
<p>3.10.00 </p>
<p><b>&gt; </b></p>
<p>SoAd TP support added </p>
<p>3.11.00 </p>
<p><b>&gt; </b></p>
<p>API forwarding between COM and CanNm, FrNm layer </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>13 / 106 </p>
<p><b>Component Version </b></p>
<p><b>New Features </b></p>
<p><b>&gt; </b></p>
<p>CddDobt support added </p>
<p>3.12.00 </p>
<p><b>&gt; </b></p>
<p>Minor Changes </p>
<p>3.13.00 </p>
<p><b>&gt; </b></p>
<p>Minor Changes </p>
<p>3.14.00 </p>
<p><b>&gt; </b></p>
<p>TP Receive Cancellation for CanTp, LinTp, FrTp </p>
<p><b>&gt; </b></p>
<p>TP Transmit Cancellation for CanTp, LinTp, FrTp </p>
<p><b>&gt; </b></p>
<p>PduRoutingPathGoups </p>
<p><b>&gt; </b></p>
<p>Support for CanNm, FrNm and Nm_DirOsek </p>
<p>3.15.00 </p>
<p><b>&gt; </b></p>
<p>Support Rx for CanNm and FrNm </p>
<p><b>&gt; </b></p>
<p>Dynamic DLC Support </p>
<p><b>&gt; </b></p>
<p>Added Generic Cdd Interface </p>
<p>3.15.09 </p>
<p><b>&gt; </b></p>
<p>AR3-2457: Dynamic DLC with TriggerTransmit based Communication </p>
<p>Interfaces </p>
<p>Table 1-1  </p>
<p>Component history </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>14 / 106 </p>
<p><b>2 </b></p>
<p><b>Introduction </b></p>
<p>This document describes the functionality, API and configuration of the AUTOSAR BSW </p>
<p>module PDUR as specified in [1].  </p>
<p> </p>
<p><b>Supported AUTOSAR Release*: </b></p>
<p>3 </p>
<p><b>Supported Configuration Variants: </b></p>
<p>link-time, post-build </p>
<p><b>Vendor ID: </b></p>
<p>PDUR_VENDOR_ID </p>
<p>30 decimal </p>
<p>(= </p>
<p>Vector-Informatik, </p>
<p>according to HIS) </p>
<p><b>Module ID: </b></p>
<p>PDUR_MODULE_ID   </p>
<p>51 decimal </p>
<p>(according to ref. [4]) </p>
<p>* For the precise AUTOSAR Release 3.x please see the release specific documentation.  </p>
<p> </p>
<p>The  main  task  of  the  PDU  Router  module  is  to  abstract  from  the  type  of  bus  access </p>
<p>(Interface layer and TP layer) and from the bus type itself. Besides this, the PDU Router </p>
<p>module provides interface layer (low-level message) gateway and TP (high-level) gateway </p>
<p>functionality. The general requirements for the gateway functionality are described in [5]. </p>
<p>Since the PDU Router module has to route Rx and Tx PDUs to and from the upper- and </p>
<p>lower-  layers  and  any  software  component  uses  its  own  handle  space,  multiple  routing </p>
<p>tables  are  required.  The  PDU  Router  uses  the  input  handle  as  an  index  to  the  related </p>
<p>routing table. </p>
<p> </p>
<p> </p>
<p><b>Info</b> </p>
<p>The PDU Router does not forward I-PDUs to the NM and TP layer. According to </p>
<p>AUTOSAR [1] the interface layer (e.g. CAN IF) has to forward these I-PDUs to the NM </p>
<p>or TP module directly. </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>15 / 106 </p>
<p><b>2.1 </b></p>
<p><b>Architecture Overview </b></p>
<p>The following figure shows where the PDUR is located in the AUTOSAR architecture. </p>
<p> </p>
<p>Figure 2-1 </p>
<p>AUTOSAR architecture </p>
<p>The next figure shows the interfaces to adjacent modules of the PDUR. These interfaces </p>
<p>are described in chapter 5.  </p>
<p> </p>
<p>Figure 2-2 </p>
<p>Interfaces to adjacent modules of the PDUR </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>16 / 106 </p>
<p><b>3 </b></p>
<p><b>Functional Description </b></p>
<p><b>3.1 </b></p>
<p><b>Features </b></p>
<p>The features listed in this chapter cover the complete functionality specified in [1]. </p>
<p>The  &quot;supported&quot; and  &quot;not  supported&quot; features  are  presented  in  the  following  two  tables. </p>
<p>For further information of not supported features also see chapter 0. </p>
<p> </p>
<p>The following features described in [1] are supported: </p>
<p><b>Supported Feature </b></p>
<p>Link time configuration </p>
<p>Post-build time configuration </p>
<p>I-PDU transmission with and without confirmation and I-PDU reception </p>
<p>ECU Configuration file import and export </p>
<p>1:1 routing between upper- and lower- layer BSW modules </p>
<p>Interface Gateway Routing </p>
<p><b>&gt; </b></p>
<p>1:1 routing </p>
<p><b>&gt; </b></p>
<p>1:N routing </p>
<p><b>&gt; </b></p>
<p>Support of “trigger-transmit” and “direct” data provision </p>
<p><b>&gt; </b></p>
<p>FiFo queued routing </p>
<p>Transport Protocol Routing </p>
<p><b>&gt; </b></p>
<p>1:1 routing of physical requests </p>
<p><b>&gt; </b></p>
<p>1:N routing of functional (single frame) requests </p>
<p><b>&gt; </b></p>
<p>Forwarding of functional (single frame) requests to DCM and routing of the same Rx I-PDU </p>
<p><b>&gt; </b></p>
<p>Ring-buffer concept </p>
<p>PduR_GetVersionInfo </p>
<p>PduR_GetConfigurationId </p>
<p>PduR_CancelTransmitRequest </p>
<p>PduR_DcmChangeParameterRequest </p>
<p>Dcm_ChangeParameterConfirmation </p>
<p>Table 3-1  </p>
<p>Supported SWS features </p>
<p>The following features are additionally supported: </p>
<p><b>Supported Feature </b></p>
<p>IF Routings to MOST, CanNm, FrNm, NmOsek </p>
<p>TP Routings to Com, MOST, CddDobt, ISO10681, SoAd, J1939TP </p>
<p>Application IF and TP I-PDU Access including the prototypes of required callback functions. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>17 / 106 </p>
<p><b>Supported Feature </b></p>
<p>TP Intra ECU Communication between DCM and ApplTp (PduR_MainFunction) </p>
<p>Callout functions for IF Gateway Routing Paths </p>
<p>PduR_InitMemory() API </p>
<p>AUTOSAR TP layer CanTp to CanTp routing according to AUTOSAR 4.0 (draft) specification </p>
<p>PduR_&lt;UpperLayer&gt;CancelReceiveRequest </p>
<p>Partial Networking </p>
<p>Complex Device Driver Upper Layer Interfaces </p>
<p>Table 3-2  </p>
<p>Additionally supported features </p>
<p>The following features described in [1] are not supported: </p>
<p><b>Not Supported Feature </b></p>
<p>TP layer fan-out </p>
<p>Zero cost operation </p>
<p>Minimum Routing (Reduced state) </p>
<p>Table 3-3  </p>
<p>Not supported SWS features </p>
<p><b>3.2 </b></p>
<p><b>Initialization </b></p>
<p>Before the Pdu Router can be used it has to be initialized by PduR_Init() which performs </p>
<p>the basic initialization. Initialization, starting and stopping of the layer and its I-PDU groups </p>
<p>is  normally  driven  by  the  Communication  Manager.  If  this  software  component  is  not </p>
<p>available a similar component has to be provided by the integrator. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>18 / 106 </p>
<p><b>3.3 </b></p>
<p><b>States </b></p>
<p><b>stm PduR State Machine</b></p>
<p>Ini ti al</p>
<p><b>PDUR_UNINIT</b></p>
<p><b>PDUR_ONLINE</b></p>
<p>PduR_InitMemory</p>
<p>PduR_Init</p>
<p> </p>
<p>Figure 3-1 </p>
<p>PduR State Machine </p>
<p>The  PduR  is  initially  not  activated.  Basic  RAM  arrays  are  initialized  with  the  call  of </p>
<p>PduR_InitMemory or with the startup code of your ECU. If PduR_Initi is called with valid </p>
<p>parameters, the PduR is in the state PDUR_ONLINE and the communication can start. </p>
<p><b>3.4 </b></p>
<p><b>Main Functions </b></p>
<p>The  PduR  provides  one  function  that  has  to  be  called  cyclically  by  the  Basic  Software </p>
<p>Scheduler or a similar component. </p>
<p><b>Main Functions </b></p>
<p><b>Description </b></p>
<p>PduR_MainFunction() </p>
<p> </p>
<p>The main function is only used, if the TP intra </p>
<p>ECU communication is used. </p>
<p>Depending on the size of the I-PDU to be </p>
<p>routed it is therefore important to run the main </p>
<p>function in a low priority task with a sufficient </p>
<p>low call frequency. </p>
<p>See chapter 3.16 TP Intra ECU </p>
<p>Communication and 5.1.5 </p>
<p>PduR_MainFunction </p>
<p>Table 3-4  </p>
<p>Main functions that have to be called cyclically </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>19 / 106 </p>
<p><b>3.5 </b></p>
<p><b>Error Handling </b></p>
<p><b>3.5.1 </b></p>
<p><b>Development Error Reporting </b></p>
<p>By </p>
<p>default, </p>
<p>development </p>
<p>errors </p>
<p>are </p>
<p>reported </p>
<p>to </p>
<p>the </p>
<p>DET </p>
<p>using </p>
<p>the </p>
<p>service </p>
<p>Det_ReportError()</p>
<p>  as  specified  in  [2],  if development  error reporting  is  enabled  (i.e. </p>
<p>pre-compile parameter </p>
<p>PDUR_DEV_ERROR_DETECT==STD_ON</p>
<p>). </p>
<p>If  another  module  is  used  for  development  error  reporting,  the  function  prototype  for </p>
<p>reporting the error can be configured by the integrator, but must have the same signature </p>
<p>as the service </p>
<p>Det_ReportError()</p>
<p>. </p>
<p>The reported PDUR ID is 51. </p>
<p>The reported service IDs identify the services which are described in 5.1. Due to this, that </p>
<p>the API is partially generated, the servide IDs are assigned dynamically at generation time. </p>
<p>Please use the symbolic names generated for the services. </p>
<p> </p>
<p>The errors reported to DET are described in the following table: </p>
<p><b>ID </b></p>
<p><b>Description </b></p>
<p>((PduR_Core_Error</p>
<p>Type)0x00u) </p>
<p>PDUR_E_CONFIG_PTR_INVALID </p>
<p>This error code is only used in </p>
<p>conjunction with post-build </p>
<p>configuration: An invalid post-build </p>
<p>configuration data pointer has been </p>
<p>handled to PduR_Init(). The error is </p>
<p>either caused by a failed consistency </p>
<p>check or because a null pointer was </p>
<p>handled to PduR_Init(). </p>
<p>((PduR_Core_Error</p>
<p>Type)0x01u) </p>
<p>PDUR_E_INVALID_REQUEST </p>
<p>An API service has been used without </p>
<p>a call of PduR_Init() or PduR_Init() </p>
<p>was called while the PDU Router is in </p>
<p>any other state than PDUR_UNINIT. If </p>
<p>your system does not use a start-up </p>
<p>code to initialize global variables, </p>
<p>PduR_InitMemory() can be called </p>
<p>before PduR_Init() to avoid this </p>
<p>problem. </p>
<p>((PduR_Core_Error</p>
<p>Type)0x02u) </p>
<p>PDUR_E_PDU_ID_INVALID </p>
<p>An invalid PDU identifier was used as </p>
<p>parameter for a PDU Router API call. </p>
<p>((PduR_Core_Error</p>
<p>Type)0x03u) </p>
<p>PDUR_E_TP_TX_REQ_REJECT</p>
<p>ED </p>
<p>TP Gateway was not able to transmit a </p>
<p>TP Tx I-PDU due to an error reported </p>
<p>by the TP layer. The gateway will abort </p>
<p>the routing and not attempt a re-</p>
<p>transmission. </p>
<p>((PduR_Core_Error</p>
<p>Type)0x05u) </p>
<p>PDUR_E_DATA_PTR_INVALID </p>
<p>The Data pointer (CanSduPtr, </p>
<p>FrSduPtr, LinSduPtr or PduInfoPtr) is </p>
<p>a NULL_PTR </p>
<p>((PduR_Core_Error</p>
<p>Type)0x06u) </p>
<p>PDUR_E_TP_BUFFER_SIZE_LIM</p>
<p>IT </p>
<p>Length of requested TP buffer is larger </p>
<p>than the maximum length of all </p>
<p>configured TP buffer. The gateway will </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>20 / 106 </p>
<p><b>ID </b></p>
<p><b>Description </b></p>
<p>try to route the I-PDU using the ring-</p>
<p>buffer mechanism. This can, however, </p>
<p>result in a buffer overrun if the TP </p>
<p>layer is not able to adapt the block </p>
<p>size of the Rx connection. </p>
<p>((PduR_Core_Error</p>
<p>Type)0x07u) </p>
<p>PDUR_E_UL_BUFFER_UNDERR</p>
<p>UN </p>
<p>The provided buffer of the upperlayer </p>
<p>module is to small, should be </p>
<p>minimum the size of the CanTp FF + </p>
<p>minimum 1 byte. It is required by the </p>
<p>CanTp </p>
<p>((PduR_Core_Error</p>
<p>Type)0x08) </p>
<p>PDUR_E_ROUTING_TABLE_ID_I</p>
<p>NVALID </p>
<p>If the routing table is invalid that is </p>
<p>given to the PduR_EnableRouting or </p>
<p>PduR_DisableRouting functions </p>
<p>((PduR_Core_Error</p>
<p>Type)0xA0u) </p>
<p>PDUR_E_INVALID_CFG_DATA </p>
<p>An internal PDU Router error occurred </p>
<p>that was eventually caused by </p>
<p>incorrect or manipulated configuration </p>
<p>data. </p>
<p>((PduR_Core_Error</p>
<p>Type)0xA1u) </p>
<p>PDUR_E_UNEXPECTED_CALL </p>
<p>The indicated API was called although </p>
<p>the current PDU Router configuration </p>
<p>and internal state does not expect a </p>
<p>call to this API. </p>
<p>((PduR_Core_Error</p>
<p>Type)0xA2u) </p>
<p>PDUR_INCONSISTENT_SIZEOF</p>
<p>PDUIDTYPE </p>
<p>The size of PduIdType is consistent </p>
<p>Table 3-5  </p>
<p>Errors reported to DET </p>
<p><b>3.5.2 </b></p>
<p><b>Production Code Error Reporting </b></p>
<p>By  default,  production  code  related  errors  are  reported  to  the  DEM  using  the  service </p>
<p>Dem_ReportErrorStatus()</p>
<p> as specified in [3], if production error reporting is enabled </p>
<p>(i.e. pre-compile parameter </p>
<p>PDUR_PROD_ERROR_DETECT==STD_ON</p>
<p>). </p>
<p>If another module  is used for production  code  error reporting,  the  function  prototype for </p>
<p>reporting the error can be configured by the integrator, but must have the same signature </p>
<p>as the service </p>
<p>Dem_ReportErrorStatus()</p>
<p>. </p>
<p>The errors reported to DEM are described in the following table: </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p>PDUR_E_INIT_FAILED </p>
<p>Post-build configurations only: Invalid post-</p>
<p>build configuration data pointer detected.  </p>
<p>Either the consistency check failed during </p>
<p>PduR_Init() or a null pointer has been used as </p>
<p>configuration structure reference. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>21 / 106 </p>
<p>PDUR_E_PDU_INSTANCE_LOST </p>
<p>This error is reported in case the transmission </p>
<p>request of a FiFo queued I-PDU failed or in </p>
<p>case the queue was flushed due to an </p>
<p>overrun. </p>
<p>These events cause the loss of one or several </p>
<p>I-PDU instances which are routed using a </p>
<p>FiFo queue. The error is not reported for I-</p>
<p>PDUs that are routed without a FiFo algorithm. </p>
<p>Table 3-6  </p>
<p>Errors reported to DEM </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Info </b></p>
<p>The error code symbols have to be defined by the DEM module. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>3.6 </b></p>
<p><b>Configuration Phases </b></p>
<p><b>3.6.1 </b></p>
<p><b>Link-time </b></p>
<p>This step has to be executed independently of the PDU Router configuration variant. </p>
<p>Link-time  parameters  are  used  to  configure  the  PDU  Router  according  to  the  vehicle </p>
<p>specific  communication  properties  with  respect  to  the  number  of  used  I-PDUs  and  the </p>
<p>routing properties of each I-PDU. </p>
<p>The result of link-time configuration is a set of routing tables generated to PduR_PBcfg.c. </p>
<p>Link time specific parameters that cannot be changed at post-build time are generated to </p>
<p>PduR_Lcfg.c. </p>
<p> </p>
<p>At link-time the following properties can be changed: </p>
<p><b>&gt; </b> Number of I-PDUs that are used by each layer. </p>
<p><b>&gt; </b> The destination I-PDU handle and the destination BSW module (destination port) of </p>
<p>each routing path. </p>
<p><b>&gt; </b> Number of interface gateway routing paths. </p>
<p><b>&gt; </b> Number and properties of TP gateway routing paths and TP buffer elements. </p>
<p><b>&gt; </b> Number and properties of application PDUs </p>
<p><b>&gt; </b> Number of concurrent intra ECU communication connections (see chapter 3.16 TP Intra </p>
<p>ECU Communication for details) </p>
<p><b>&gt; </b></p>
<p>Maximum number of Tx </p>
<p>&lt;Up&gt; (DCM, COM, ApplTp)</p>
<p> connections via CanTp</p>
<p> </p>
<p><b>&gt; </b></p>
<p>Maximum number of Rx CanTp connections used by upper layers</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>22 / 106 </p>
<p> </p>
<p><b>3.6.2 </b></p>
<p><b>Link-time for post-build capable configurations </b></p>
<p>If the PDU Router module supports post-build configuration, further link time settings are </p>
<p>required.  These  settings  are  required  to  allow  the  PduR  configuration  to  be  adapted  at </p>
<p>post-build time: </p>
<p><b>&gt; </b> Configuration ID: According to AUTOSAR [1] each configuration can be labeled with a </p>
<p>unique 32bit identifier that can be retrieved by the PduR_GetConfigurationId() API. For </p>
<p>the initial configuration that is set up at link-time, this ID can be configured in the GENy </p>
<p>PDU Router GUI. </p>
<p><b>&gt; </b> Maximum Tx Buffer Number: This GENy attribute specifies maximum number of FiFo </p>
<p>queues of interface layer routing paths that shall be available at post-build time. Allow </p>
<p>unused queue elements in case adding FiFo queued routing paths shall remain an </p>
<p>option at post-build time.  </p>
<p><b>&gt; </b> Maximum TP Buffer Number: To allocate RAM resources for the buffer state machines </p>
<p>the maximum number of TP buffers has to be configured at link time. </p>
<p><b>&gt; </b> Memory Size [bytes]: This attribute specifies the RAM that will be made available to the </p>
<p>PDU Router module. In order to allow adding further routing paths at post-build time or </p>
<p>to increase the queue depth, it is necessary to reserve additional RAM resources at link-</p>
<p>time. Routing relations that require additional RAM resources at post-built time are e.g. </p>
<p>single buffer or FiFo queued routing paths. The currently required memory size can be </p>
<p>calculated automatically using the button “Compute Memory Size” or can be determined </p>
<p>according to chapter 3.6. </p>
<p><b>&gt; </b> COM Generate: This is a COM attribute. Disable the PDU specific checkbox “Generate” </p>
<p>for all Tx I-PDUs that are not required by COM but may be part of a routing path at post-</p>
<p>build time. It will not be possible to remove the Generate attribute at post-build time. Tx </p>
<p>PDUs that are part of a PDU Router interface layer routing path must not be handled by </p>
<p>COM (COM Generate is disabled).  </p>
<p><b>3.6.3 </b></p>
<p><b>Post-build </b></p>
<p>Configuring the PDU Router module at post-build time is only possible if the PDU Router </p>
<p>module supports the configuration variant “Post-build”. </p>
<p>The configuration at post-build time is similar to the link-time configuration. Interface-, TP </p>
<p>layer routing paths and TP buffer elements can be configured as long as enough (RAM) </p>
<p>resources are available. </p>
<p>The module start address must be used to specify the start address of the PDU Router </p>
<p>configuration </p>
<p>data </p>
<p>on </p>
<p>the </p>
<p>target </p>
<p>ECU. </p>
<p>The </p>
<p>address </p>
<p>is </p>
<p>required </p>
<p>for </p>
<p>the </p>
<p>post-build </p>
<p>configuration </p>
<p>process. </p>
<p>For </p>
<p>further </p>
<p>details </p>
<p>please </p>
<p>see </p>
<p>the </p>
<p>post-build </p>
<p>configuration </p>
<p>documentation [7]. </p>
<p> </p>
<p>At post-build time the following properties can be changed: </p>
<p><b>&gt; </b> Number of I-PDUs that are used by each layer. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>23 / 106 </p>
<p><b>&gt; </b> Number of interface layer routing paths and their properties (e.g. queue depth or SDU </p>
<p>length). The maximum number of routing paths is limited by the link-time parameter </p>
<p>PDUR_MEMROY_SIZE (GENy: “Memory Size [byte]”). </p>
<p><b>&gt; </b> Number of TP layer routing paths and their properties (e.g. Chunk Size). The maximum </p>
<p>number of routing paths is limited by the link-time parameter PDUR_MEMROY_SIZE </p>
<p>(GENy: “Memory Size [byte]”). </p>
<p><b>&gt; </b> Number of TP buffer elements and the buffer size. The maximum number of buffer </p>
<p>elements is limited by the link-time parameter PDUR_MAX_TX_BUFFER_NUMBER </p>
<p>(GENy: “Maximum TP Buffer Count”). The sizes of the buffer elements is limited by </p>
<p>PDUR_MEMROY_SIZE (GENy: “Memory Size [byte]”). </p>
<p><b>&gt; </b> The destination I-PDU handle and the destination BSW module (destination port) of </p>
<p>each routing path. </p>
<p><b>&gt; </b> Number and properties of application PDUs </p>
<p><b>&gt; </b> Post-build configuration ID. </p>
<p><b>&gt; </b> The start address of the module configuration in ROM can be changed at post-build </p>
<p>time. During PDU Router initialization a pointer to the configuration structure must be </p>
<p>provided. </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>Tx I-PDUs that are part of an interface layer routing path are no longer handled by </p>
<p>COM. COM Generate for Rx I-PDUs can optionally be removed in case the gateway </p>
<p>ECU application does not require their data. </p>
<p>A Tx I-PDU must not be added to a routing path at post-build time in case the I-PDU </p>
<p>was handed by COM at link time. Adding such an I-PDU to a routing path would cause </p>
<p>changes to the COM signal handle space as COM would no longer consider the </p>
<p>signals of Tx I-PDUs which are part of a routing path. </p>
<p>In case of adding an Rx I-PDU to a routing path at post-build time, the COM Generate </p>
<p>for the particular I-PDU must remain as it was in during link-time. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>24 / 106 </p>
<p><b>3.7 </b></p>
<p><b>Memory allocation </b></p>
<p>As </p>
<p>adding </p>
<p>of </p>
<p>routing </p>
<p>paths </p>
<p>at </p>
<p>post-build </p>
<p>time </p>
<p>is </p>
<p>not </p>
<p>possible </p>
<p>using </p>
<p>the </p>
<p>link-time </p>
<p>configuration variant, this section is not required if the PDU Router module does support </p>
<p>link-time configuration only. In this case the PDU Router generator is able to compute the </p>
<p>required memory size automatically at generation time. </p>
<p>In case of a PDU Router module supporting post-build configuration, routing paths and TP </p>
<p>buffers can be added at post-build time. Depending on the added configuration element, </p>
<p>this  causes  an  increased  RAM  usage  of  the  PDU  Router  module.  To  support  this, </p>
<p>additional RAM has to be allocated at link time, using the “Memory Size [byte]” attribute of </p>
<p>the PDU Router configuration dialogue in GENy. </p>
<p>Using the button “Compute Memory Size” the currently required memory size is computed </p>
<p>and  written  to  the  “Memory  Size  [byte]”  attribute.  The  following  table  allows  estimating </p>
<p>PDU Router buffer requirements in case of post-build time modification. The memory that </p>
<p>shall be reserved for post-build modification has to be added to the memory required at </p>
<p>link-time. </p>
<p>By  deleting  or  re-configuration  at  post-build  time,  it  is  also  possible  to  free  memory. </p>
<p>Memory </p>
<p>that </p>
<p>has </p>
<p>been </p>
<p>freed </p>
<p>at </p>
<p>post-build </p>
<p>time </p>
<p>is </p>
<p>usable </p>
<p>for </p>
<p>other </p>
<p>PDU </p>
<p>Router </p>
<p>configuration elements. </p>
<p><b>Feature </b></p>
<p><b>Buffer requirement [byte] </b></p>
<p>Interface layer routing path with direct data provision (no </p>
<p>queuing) </p>
<p>0 </p>
<p>Interface layer routing path with direct data provision (FiFo </p>
<p>queued) </p>
<p>Size of routed I-PDU </p>
<p>multiplied by the queue depth </p>
<p>Interface layer routing path with trigger-transmit data provision </p>
<p>(no queuing) </p>
<p>Size of routed I-PDU </p>
<p>Interface layer routing path with trigger-transmit data provision </p>
<p>(FiFo queued) </p>
<p>Size of routed I-PDU </p>
<p>multiplied by the queue depth </p>
<p>TP buffer element </p>
<p>Configured size of the TP </p>
<p>buffer element </p>
<p>TP layer routing path </p>
<p>1 </p>
<p>Application Access for I-PDUs </p>
<p>0 </p>
<p>Table 3-7  </p>
<p>Memory usage (RAM) of different PDU Router features (relevant for computing the memory size required by PDU Router) </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>25 / 106 </p>
<p><b>3.8 </b></p>
<p><b>Interface Layer Gateway </b></p>
<p>The interface layer gateway allows  low-level routing of I-PDUs provided by the interface </p>
<p>layer. If loss of data is critical, routing paths can be configured to use a Tx PDU specific </p>
<p>FiFo queue. </p>
<p><b>3.8.1 </b></p>
<p><b>Dynamic Dlc Routing </b></p>
<p>The standard behaviour of the Interface Layer Gateway is to route all the received data </p>
<p>defined  at  build  time.  If  your  delivery  is  tailored  to  use  the  PduInfoPtr  as  parameter  as </p>
<p>specified  in ASR  4  and  the  dynamic  dlc  support  is  configured  in  the  PduR  the TX  DLC </p>
<p>depends on the RX DLC, TX DLC and the intitial build in TX DLC in the configuration. </p>
<p> </p>
<p><b>DataProvision of the </b></p>
<p><b>Routing Destination </b></p>
<p><b>RoutingType </b></p>
<p><b>Description </b></p>
<p>DIRECT </p>
<p>e.g. CanIf </p>
<p>No Buffer </p>
<p>The TX DLC is equal to the RX DLC and the RX DLC </p>
<p>can be larger than in the initial build in DLC.  </p>
<p>DIRECT </p>
<p>e.g. CanIf </p>
<p>FIFO Queue </p>
<p>The TX DLC is equal or smaller than the the RX DLC. </p>
<p>If the RX DLC is smaller or equal to the initial build in </p>
<p>DLC the TX DLC equals to the RX DLC. </p>
<p>If the RX DLC is greater than the initial build in DLC the </p>
<p>TX DLC equals to the initial build in DLC and the data is </p>
<p>shortened. </p>
<p>TRIGGER_TRANSMIT </p>
<p>e.g. LinIf, FrIf </p>
<p>Single Buffer </p>
<p>The TX DLC is equal to the initial build in DLC. </p>
<p>If the RX DLC is smaller to the initial build in DLC the </p>
<p>remaining data is defined by the default value. </p>
<p>If the RX DLC is greater than the initial build in DLC the </p>
<p>TX DLC equals to the initial build in DLC. </p>
<p>If the RX DLC is greater than the initial build in DLC the </p>
<p>TX DLC equals to the initial build in DLC and the data is </p>
<p>shortened. </p>
<p>TRIGGER_TRANSMIT </p>
<p>e.g. LinIf, FrIf </p>
<p>FIFO Queue </p>
<p>The TX DLC is equal to the initial build in DLC. </p>
<p>If the RX DLC is smaller to the initial build in DLC the </p>
<p>remaining data is defined by the default value. </p>
<p>If the RX DLC is greater than the initial build in DLC the </p>
<p>TX DLC equals to the initial build in DLC. </p>
<p>If the RX DLC is greater than the initial build in DLC the </p>
<p>TX DLC equals to the initial build in DLC and the data is </p>
<p>shortened. </p>
<p>Table 3-8  </p>
<p>Dynamic DLC Interface Routing Overview </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>26 / 106 </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>The variability of the RX DLC is limited and shall be changed by different network </p>
<p>setups in Car variants and not with each reception of a message. </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>3.9 </b></p>
<p><b>Low-Level routing of TP N-PDUs </b></p>
<p>If the TP segments (N-PDUs) on the source and the destination network are identical, it is </p>
<p>possible to route TP I-PDUs using the interface layer gateway (“low-level” routing). If low-</p>
<p>level  routing  is  used,  the  (former)  N-PDU  is  no  longer  accessible  to  the  TP  layer  and </p>
<p>therefore seen as an I-PDU by the PDU Router module. </p>
<p>The advantage of low-level routing is that it is executed in the context of the interface layer </p>
<p>RxIndication and therefore introduces a minimal routing latency.  </p>
<p>Low-level routing has, however, several drawbacks which might cause that a high-level TP </p>
<p>routing is more adequate: </p>
<p><b>&gt; </b> TP protocol conversion is not possible as the frame-layout and the flow-control handling </p>
<p>must be the same on the source and the destination network. </p>
<p><b>&gt; </b> Each routing path requires a dedicated FiFo buffer. This results in a high RAM </p>
<p>consumption. The TP layer gateway shares its buffer elements among the TP routing </p>
<p>paths. </p>
<p><b>&gt; </b> No forwarding of routed TP I-PDUs to the local DCM is possible as it may be required </p>
<p>for functional requests. </p>
<p><b>&gt; </b> Eventual loss of TP parameters, such as the STmin timing and the block size, due to </p>
<p>bursts on the destination bus. Bursts are a result of queued I-PDUs which were </p>
<p>transmitted in the TxConfirmation of the previous I-PDU.  </p>
<p><b>&gt; </b> A buffer overrun in the FiFo queue causes the queue to be flushed and therefore </p>
<p>corrupts the TP communication. The TP layer gateway can avoid buffer overflows if the </p>
<p>receiving TP connection supports a dynamic block size adaptation. </p>
<p><b>3.10 </b></p>
<p><b>Buffer Types </b></p>
<p>In total four different buffer types are supported by the PDU Router. At configuration time </p>
<p>the only relevant input is the queue depth of the buffer. The queue depth specifies whether </p>
<p>a  FiFo  queue  is  used  for  the  routing  path  or  if  the  most  recently  received  data  is </p>
<p>transmitted. The queue implementation is based on [1]. </p>
<p>GENy automatically detects the type of data provision required by the Tx I-PDU (trigger-</p>
<p>transmit or direct data provision). </p>
<p><b>3.10.1 </b></p>
<p><b>Buffer overwrite routing (queue size &lt; 2) </b></p>
<p>If the queue depth is set to 1 or 0, the most recent data of each I-PDU is transmitted at any </p>
<p>time.  If </p>
<p>an  I-PDU  instance  is  received, </p>
<p>the  previous  I-PDU  instance  is  overwritten; </p>
<p>regardless of the former instance being transmitted or not. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>27 / 106 </p>
<p><b>3.10.1.1 </b></p>
<p><b>Timing aspects </b></p>
<p>The  transmission  is  triggered  directly  within  the  Rx  indication  of  the  source  I-PDU. </p>
<p>Depending on the type of bus access the transmission might be delayed or not occur at all </p>
<p>(e.g. in case of a not appropriate LIN schedule table). </p>
<p>The  PDU  Router  does  not  provide  a  mechanism  to  implement  a  rate  conversion  (e.g. </p>
<p>change the cycle time from the source to the destination channel). A rate conversion can </p>
<p>be  implemented  (at  extra  runtime  costs)  by  signal  routing  paths  using  the  COM  signal </p>
<p>gateway. </p>
<p><b>3.10.1.2 </b></p>
<p><b>Direct data provision </b></p>
<p>Direct data provision is chosen for CAN I-PDUs only. The PDU Router does not provide a </p>
<p>buffer for such routing paths (AUTOSAR: “no buffer”) as the interface layer copies the data </p>
<p>within the transmission request call. </p>
<p><b>3.10.1.3 </b></p>
<p><b>Trigger transmit data provision </b></p>
<p>The interface layer requests the data through a trigger-transmit call from the PDU Router. </p>
<p>To provide the routed data asynchronously, PDU Router uses an own buffer containing a </p>
<p>single I-PDU instance (AUTOSAR: “single buffer”). The buffer always contains the latest </p>
<p>received data. If no reception has taken place yet, the PDU Router will copy the default </p>
<p>value of the Tx I-PDU to the interface layer. </p>
<p><b>3.10.2 </b></p>
<p><b>FiFo queued routing (queue size &gt;= 2) </b></p>
<p>FiFo queued routing is used if loss of I-PDU instances is critical. The PDU Router provides </p>
<p>a dedicated FiFo queue for each Tx I-PDU – independent of the communication channel. </p>
<p>In  case  of  several  queued  I-PDUs  (with  a different  I-PDU  ID),  the  order of  transmission </p>
<p>depends upon the bus access of the driver layer and not on the relative order of I-PDU </p>
<p>reception. The FiFo queue therefore only cares for a FiFo based sorting of the instances of </p>
<p>a one I-PDU. The queue depth can be configured for each routing path independently. </p>
<p>If the transmission of an I-PDU failed, (negative return value of the interface layer transmit </p>
<p>request),  PDU  Router  removes  the  I-PDUs’  instance  from  the  queue  and  retries  the </p>
<p>transmission with the next instance – until the queue is empty or the transmission request </p>
<p>is accepted. </p>
<p>In case of a buffer overrun, all queued I-PDU instances of the affected queue are removed </p>
<p>and the newly received I-PDU is transmitted. </p>
<p><b>3.10.2.1 </b></p>
<p><b>Timing aspects </b></p>
<p>The  PDU  Router  triggers  the  transmission  of  I-PDU  instances  to  be  routed  as  soon  as </p>
<p>possible. If the queue is empty, a reception will directly cause a transmission request to the </p>
<p>interface layer. If the queue is occupied, the I-PDU instance will be added to the queue. </p>
<p>Queued  I-PDU  instances  are  transmitted  within  the  Tx  confirmation  of  the  preceding </p>
<p>instance.  </p>
<p>This  queuing  behavior  can  cause  bursts  on  the  destination  channel  (especially  CAN)  if </p>
<p>several queue instances are queued and if the driver layer does not eliminate them. </p>
<p>A rate conversion or assurance of certain STmin timing is not possible. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>28 / 106 </p>
<p><b>3.10.2.2 </b></p>
<p><b>Example for the FiFo queue handling </b></p>
<p>The  following  example </p>
<p>assumes  four  instances  (A-D)  of </p>
<p>two  CAN  I-PDUs  that  are </p>
<p>transmitted  on  the  same  destination  bus. The  source  I-PDUs  are  received  at  a  recently </p>
<p>higher rate  than  they  can  be transmitted  on  the  destination  bus. Due  to  this,  the  I-PDU </p>
<p>instance A (ID 0x0B0) is transmitted directly after reception while all other I-PDU instances </p>
<p>are queued to the I-PDU specific FiFo queues (instances B and D) or to the I-PDU specific </p>
<p>Tx buffer within the CAN IF (instance C).  </p>
<p>Within the confirmation function of instance A, the PDU Router will trigger the transmission </p>
<p>of instance B, which is written to the CAN IF transmit buffer as the transmission of instance </p>
<p>C  is  also  pending,  however  instance  C  (0x0A1)  has  a  higher  priority  than  instance  B </p>
<p>(0x0B0). The CAN IF will therefore trigger the transmission of instance C. </p>
<p>Within the confirmation of instance C, PDU Router will trigger the transmission of instance </p>
<p>D. As instance D has still a higher priority than the also buffered instance B, instance D will </p>
<p>be transmitted directly by the CAN IF. </p>
<p>As the queue of the I-PDU with CAN ID 0x0A1 is empty, no further transmission of this I-</p>
<p>PDU will be triggered in the following confirmation. This allows the transmission of instance </p>
<p>B which is still awaiting transmission. </p>
<p>CANID 0x0A1 | C</p>
<p>CANID 0x0B0 | B</p>
<p>CANID 0x0B0 | A</p>
<p>CANID 0x0A1 | D</p>
<p>CANID 0x0A1 | D</p>
<p>CANID 0x0A1 | C</p>
<p>CANID 0x0B0 | A</p>
<p>CANID 0x0B0 | B</p>
<p>CANID 0x0A1 | D</p>
<p>CANID 0x0A1 | C</p>
<p>CANID 0x0B0 | A</p>
<p>CANID 0x0B0 | B</p>
<p>t</p>
<p>t</p>
<p>I-PDU based FiFo queues</p>
<p> </p>
<p>Figure 3-2 </p>
<p>Usage of the FiFo buffer (D FiFo and TT-FiFo handling) </p>
<p><b>3.11 Transport Protocol Gateway </b></p>
<p>The TP layer gateway allows high-level routing of TP I-PDUs. In order to reduce runtime </p>
<p>and </p>
<p>memory </p>
<p>consumption, </p>
<p>the </p>
<p>gateway </p>
<p>supports </p>
<p>the </p>
<p>so </p>
<p>called </p>
<p>on-the-fly </p>
<p>routing. </p>
<p>Depending on the “Chunk Size” configuration of each routing path, the gateway starts with </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>29 / 106 </p>
<p>the  transmission  on  the  destination  network  before  the  reception  has  completed  on  the </p>
<p>source network. </p>
<p>Due to the fact that diagnostic communication usually does not take place with all ECUs at </p>
<p>the same time, a TP routing path is not associated to a dedicated buffer. In order to reduce </p>
<p>the  amount  of  RAM  required  for  queues,  the  buffers  (TP  buffer  elements)  are  assigned </p>
<p>dynamically  to  active  TP  routing  paths.  If  all  available  buffers  of  the  required  size  are </p>
<p>occupied, </p>
<p>no </p>
<p>further </p>
<p>routing </p>
<p>can </p>
<p>take </p>
<p>place.  The  TP </p>
<p>buffers </p>
<p>are </p>
<p>freed </p>
<p>again </p>
<p>after </p>
<p>completion of the routing. </p>
<p>A  TP  routing  path  has  no  reference  to  a  TP  buffer.  Instead,  TP  buffers  have  to  be </p>
<p>configured separately (see chapter 6.2.4 TP Buffers). At runtime the gateway will assign a </p>
<p>suitable buffer to an incoming TP routing path (see chapter 6.2.4). If there is no unused TP </p>
<p>buffer element available or the available TP buffers are smaller than the chunk size of the </p>
<p>routing </p>
<p>path, </p>
<p>no </p>
<p>routing </p>
<p>will </p>
<p>be </p>
<p>executed. </p>
<p>The </p>
<p>gateway </p>
<p>signalizes </p>
<p>the </p>
<p>state </p>
<p>“BUFREQ_E_BUSY” towards the TP module that will, depending on its capabilities, create </p>
<p>an appropriate flow-control frame. </p>
<p>The TP buffer is released during initialization of PDU Router module and after the routing </p>
<p>has terminated successfully or with an error.  </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Info </b></p>
<p>Depending on the number of routing paths that shall be handled by the gateway </p>
<p>synchronously, </p>
<p>the </p>
<p>number </p>
<p>of </p>
<p>configured </p>
<p>TP </p>
<p>buffer </p>
<p>elements </p>
<p>has </p>
<p>to </p>
<p>be </p>
<p>configured. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p>It might be sensible to provide a small TP buffer (e.g. 7 bytes) to allow single frame routing </p>
<p>without occupying a larger and therefore more “expensive” buffer for this task. </p>
<p><b>3.12 </b></p>
<p><b>AUTOSAR 3.0 TP API </b></p>
<p>Using the API described in [4], the TP BS will be determined solely on basis of the TP N-</p>
<p>SDU configuration and the currently available TP Buffer size. </p>
<p>If the receiving TP connection can adapt the block size (BS) dynamically (BS &gt; 0), the TP </p>
<p>chunk  size  has  a  direct  affect  on  the  BS  of  the  receiving  connection.  In  this  case,  the </p>
<p>receiving  TP  connection  will  reduce  its  BS  according  to  the  buffer  that  has  been  made </p>
<p>available in order to avoid buffer overflows.  </p>
<p>A small BS therefore results in more flow-control (FC) frames. To reduce the number of FC </p>
<p>frames  the  TP  chunk  size  can  in  turn  be  increased  to  allow  more  data  to  be  received </p>
<p>during one TP block. </p>
<p>AUTOSAR  does  not  specify  any  minimum  chunk  size  that  has  to  be  handed  to  the TP </p>
<p>layer  by  the  PDU  Router.  However,  TP  module  implementation  and  runtime  behavior </p>
<p>suggest  a  minimum  sensible  chunk  size.  The  following  assumptions  have  been  agreed </p>
<p>within Vector Informatik and do not necessarily match with third party modules. </p>
<p>The smallest sensible chunk size for I-PDUs that are transferred in segments is the size of </p>
<p>one Rx connection first frame (FF) plus one consecutive frame (CF) payload for CAN Rx </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>30 / 106 </p>
<p>TP I-PDUs. This size allows the CAN TP module to transmit a FC frame with a BS of 1 </p>
<p>after  receiving  a  FF.  When  using  Rx  I-PDUs  provided  by  the AUTOSAR  3.0  FrTp,  the </p>
<p>chunk size must be at least the size of one CF payload.  When using an FrTp according to </p>
<p>ISO10681-2, the chunk size can be of any size greater 0. </p>
<p>A smaller chunk size would result in unnecessary buffer requests from the TP layer to the </p>
<p>PDU Router module. This is currently not supported by the TP modules. Routing relations </p>
<p>between I-PDUs that are transferred as SF only require a TP chunk size of at least one Rx </p>
<p>SF payload. </p>
<p><b>3.13 </b></p>
<p><b>AUTOSAR 3.0 TP API with ISO timing optimization </b></p>
<p>If the feature to fulfill ISO timing requirements and constant block size is activated in your </p>
<p>delivery  PDUR_&lt;LoTp&gt;2PROVIDERXBUFFER_CALLS  is  generated  in  PduR_Cfg.h  to </p>
<p>STD_ON.  This  is  done  to  route  a  FF  from  a  CanTp  or  FrTp  to  another  Tp  as  fast  as </p>
<p>possible and to provide a constant TP block size. The PduR returns with the first call of </p>
<p>PduR_&lt;Lo&gt;TpProvideRxBuffer()</p>
<p>  always  a  chunk  with  the  size  of  the  configured </p>
<p>chunk  size.  The  pointer  to  the  PduR  Tp  buffer  will  be  updated  depending  on  the </p>
<p>PduInfoPtr-&gt;SduLength</p>
<p> </p>
<p>of </p>
<p>the </p>
<p>first </p>
<p>PduR_&lt;Lo&gt;TpProvideRxBuffer()</p>
<p>call. </p>
<p>The </p>
<p>wrap around in the PduR buffer is detected dynamically by the PduR at runtime. There are </p>
<p>possibly remaining bytes in the buffer due to the last Chunk might not fit into the buffer </p>
<p>caused  by  the  first  call  of </p>
<p>PduR_&lt;Lo&gt;TpProvideRxBuffer()</p>
<p>  with  6  Bytes  data.  The </p>
<p>CanTp or FrTp calls for the FF </p>
<p>PduR_&lt;Lo&gt;TpProvideRxBuffer() </p>
<p>twice. In the first call </p>
<p>of </p>
<p>PduR_&lt;Lo&gt;TpProvideRxBuffer()</p>
<p> the &lt;LoTp&gt; copies 6 Bytes data and confirms the </p>
<p>copy </p>
<p>by </p>
<p>changing </p>
<p>the </p>
<p>PduInfoPtr-&gt;SduLength</p>
<p>. </p>
<p>The </p>
<p>second </p>
<p>call </p>
<p>of </p>
<p>PduR_&lt;Lo&gt;TpProvideRxBuffer()</p>
<p> will be performed directly after the first call. This is </p>
<p>the  trigger  to  call  the </p>
<p>&lt;Lo&gt;Tp_Transmit()</p>
<p>  function  on  the  destination  network.  Both </p>
<p>PduR_&lt;Lo&gt;TpProvideRxBuffer()</p>
<p> calls will be performed in the same task context. </p>
<p>The routing of CFs is triggered if the chunk is received completely. Please take the chunk </p>
<p>size  into  account  for  the  calculation  of  the  CanTp  timing  parameters  (ST</p>
<p>min,</p>
<p>  Nas,  Nbs, </p>
<p>Ncs).  </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>31 / 106 </p>
<p><b>sd AUTOSAR 3.0 TP API with ISO timing optimization</b></p>
<p>Gateway</p>
<p>Tester</p>
<p>ECU</p>
<p>PduRGw</p>
<p>&lt;LoTp&gt;TxTp</p>
<p>&lt;LoTp&gt;RxTp</p>
<p>e.g. </p>
<p>Chunksize 224 Byte </p>
<p>Buffersize 454</p>
<p>configured timeout </p>
<p>value must be long </p>
<p>enough</p>
<p>6 Byte FF</p>
<p>further ProvideTxBuffer </p>
<p>calls </p>
<p>224 Byte Chunk</p>
<p>PduR_&lt;Lo&gt;TpProvideRxBuffer(PduIdType, TpSduLength, PduInfoType)</p>
<p>:224 Byte</p>
<p>:FC BS= 32 STmin = 20</p>
<p>PduR_&lt;Lo&gt;TpProvideRxBuffer(PduIdType, TpSduLength, PduInfoType)</p>
<p>&lt;Lo&gt;Tp_Transmit(PduIdType, PduInfoType) :Std_ReturnType</p>
<p>PduR_&lt;Lo&gt;TpProvideTxBuffer(CanTpTxPduId, PduInfoPtr, Length)</p>
<p>:6 Byte</p>
<p>:6 Byte</p>
<p>PduR_&lt;Lo&gt;TpProvideTxBuffer(CanTpTxPduId, PduInfoPtr, Length)</p>
<p>:224 Byte</p>
<p>:BUFREQ_E_NOT_OK</p>
<p>:FC BS= 32 STmin= 20</p>
<p>{~640 ms}</p>
<p>PduR_&lt;Lo&gt;TpProvideRxBuffer(PduIdType, TpSduLength, PduInfoType)</p>
<p>:224 Byte</p>
<p>&lt;Lo&gt;Tp_Transmit(PduIdType, PduInfoType) :Std_ReturnType</p>
<p>{~640 ms}</p>
<p>PduR_&lt;Lo&gt;TpProvideTxBuffer(CanTpTxPduId, PduInfoPtr, Length)</p>
<p>:FC BS=32 Stmin=20</p>
<p>:224 Byte</p>
<p>&lt;Up&gt;_RxIndication(PduIdType, NotifResultType)</p>
<p>{~640ms}</p>
<p>:FC BS=32 STmin=20</p>
<p>&lt;Lo&gt;Tp_RxIndication(PduIdType,</p>
<p>PduInfoType)</p>
<p>&lt;Lo&gt;_TpTxConfirmation(PduIdType, NotifResultType)</p>
<p>&lt;Lo&gt;TpTxConfirmation(PduId)</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>32 / 106 </p>
<p>Figure 3-3 </p>
<p>Tp timeout behavior depending on the configured chunk size </p>
<p><b>3.14 </b></p>
<p><b>AUTOSAR 4.0 CAN TP API </b></p>
<p>The  APIs  for  the  Transport  Protocol  modules  has  been  redesigned  in  AUTOSAR  4.0. </p>
<p>Advantages of the AUTOSAR 4.0 TP API are that the copy process of data is moved into </p>
<p>the PduR data can be copied more efficient. </p>
<p>Therefore  the  APIs  are  not  compatible </p>
<p>to  earlier  AUTOSAR  releases.  A  conversion </p>
<p>mechanism </p>
<p>provides </p>
<p>the </p>
<p>compatibility </p>
<p>to </p>
<p>Upper </p>
<p>Layer </p>
<p>with </p>
<p>earlier </p>
<p>interface </p>
<p>implementations. </p>
<p>The maximum number of active parallel Upper Layer Rx and Tx API Forwardings has to be </p>
<p>configured.  Depending  on  the  number  of  routing  paths  that  shall  be  handled  by  the </p>
<p>gateway  synchronously,  the  maximum  number  has  to  be  configured  in  GENy.  See  in </p>
<p>chapter 6.2.1 PduR Properties Figure 6-3 </p>
<p>PduR CAN TP 4.0 Conversion Properties. </p>
<p><b>3.15 </b></p>
<p><b>Tp error handling </b></p>
<p>If  one  of  the  two  TP  components  that  are  involved  in  a  TP  data  transfer  stops  its </p>
<p>transmission  or  reception  due  to  an  error  (e.g.  a  Timeout)  then  the  corresponding  TP-</p>
<p>routing relation and buffer-element will be released.  </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Info </b></p>
<p>There is no AUTOSAR mechanism the particular other TP component side could be </p>
<p>notified of the error during the transmission </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p>Therefore  the  next    PduR_&lt;LoTp&gt;ProvideRxBuffer  /      PduR_&lt;LoTp&gt;CopyRxData  or  </p>
<p>PduR_&lt;LoTp&gt;ProvideTxBuffer  /    PduR_&lt;LoTp&gt;CopyTxData  of  the  particular  other  TP </p>
<p>results in a PduR DET error with an error code &quot; PDUR_E_UNEXPECTED_CALL &quot; (Table </p>
<p>3-5  </p>
<p>Errors  reported  to  DET).  This  error  could  be  ignored  due  to  the  return  value </p>
<p>&quot;BUFREQ_E_NOT_OK&quot; of PduR_&lt;LoTp&gt;ProvideRxBuffer/ PduR_&lt;LoTp&gt;CopyRxData or </p>
<p>PduR_&lt;LoTp&gt;ProvideTxBuffer/ PduR_&lt;LoTp&gt;CopyTxData leads to a consitent release of </p>
<p>the Tp connection. A new transmission is possible at any time.  </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Info </b></p>
<p>If an error occurs frequently it could be a hint to check and optimize the TP </p>
<p>routing parameters (e.g. timeout parameter).  </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>3.16 TP Intra ECU Communication </b></p>
<p>To realize an ECU internal diagnostic test or similar applications, the PDU Router module </p>
<p>supports  ECU  internal  TP  I-PDU  communication.  For  the  involved  modules  the  API </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>33 / 106 </p>
<p>behavior is similar to normal bus communication even though the PDU is not transmitted </p>
<p>on any network. </p>
<p>Intra  ECU  communication  allows  a  TP  communication  between  the  two  upper  layer </p>
<p>modules ApplTp and DCM. Thereby the following communication scenarios are supported: </p>
<p><b>&gt; </b> Routing of a ApplTp Tx I-PDU to the DCM module as a DCM Rx PDU </p>
<p><b>&gt; </b> Routing of a DCM Tx I-PDU to the ApplTp interface as an ApplTp Rx PDU </p>
<p>The PDU Router supports 1:1 routing paths for intra ECU communication only. I.e. a I-PDU </p>
<p>involved in intra ECU communication may only have a single destination PDU. </p>
<p>Intra  ECU  TP  I-PDU  communication  is  executed  asynchronously  by  the  PDU  Router </p>
<p>module. </p>
<p>I.e. </p>
<p>the </p>
<p>transmission </p>
<p>request </p>
<p>is </p>
<p>executed </p>
<p>within </p>
<p>the </p>
<p>next </p>
<p>call </p>
<p>of </p>
<p>PduR_MainFunction(). </p>
<p><b>sd Internal TP PDU communication ov er VPB</b></p>
<p>&lt;Up1&gt; module 1</p>
<p>&lt;Up2&gt; module 2</p>
<p>SchM</p>
<p>PduR</p>
<p>&lt;Up1&gt; and &lt;Up2&gt; are </p>
<p>a placeholder for either</p>
<p>DCM or ApplTp</p>
<p>PduR_&lt;Up1&gt;Transmit()</p>
<p>PduR_Core_VpbTransmit()</p>
<p>PduR_MainFunction()</p>
<p>&lt;Up1&gt;_ProvideTxBuffer()</p>
<p>&lt;Up2&gt;_ProvideRxBuffer()</p>
<p>MemCopyRamToRam()</p>
<p>&lt;Up1&gt;_TxConfirmation()</p>
<p>&lt;Up2&gt;_RxIndication()</p>
<p>PduR_MainFunction()</p>
<p> </p>
<p>Figure 3-4 </p>
<p>Sequence diagram of the TP intra ECU communication </p>
<p>As illustrated in Figure 3-4, the intra ECU PDU data is copied from the source interface </p>
<p>(&lt;Up1&gt;) </p>
<p>to </p>
<p>the </p>
<p>destination </p>
<p>interface </p>
<p>(&lt;Up2&gt;) </p>
<p>in </p>
<p>a </p>
<p>single </p>
<p>chunk </p>
<p>within </p>
<p>PduR_MainFunction(). </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>34 / 106 </p>
<p>The PDU Router requires a small state machine for any intra ECU communication that is </p>
<p>executed. The  RAM  resources of  such  a  state machine  are  assigned dynamically  to  an </p>
<p>incoming transmission  request at  runtime.  In  case no more  resources  are  available,  the </p>
<p>transmission request is rejected and no routing executed. The number of concurrent intra </p>
<p>ECU communication channels is configurable at link-time. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>35 / 106 </p>
<p><b>4 </b></p>
<p><b>Integration </b></p>
<p>This chapter gives necessary information for the integration of the MICROSAR PDUR into </p>
<p>an application environment of an ECU. </p>
<p><b>4.1 </b></p>
<p><b>Scope of Delivery </b></p>
<p>The delivery of the PDUR contains the files which are described in the chapters 4.1.1 and </p>
<p>4.1.2: </p>
<p><b>4.1.1 </b></p>
<p><b>Static Files </b></p>
<p><b>File Name </b></p>
<p><b>Source </b></p>
<p><b>Code </b></p>
<p><b>Delivery </b></p>
<p><b>Object </b></p>
<p><b>Code </b></p>
<p><b>Delivery </b></p>
<p><b>Description </b></p>
<p>PduR.c </p>
<p></p>
<p> </p>
<p> </p>
<p>This is the source file of the PduR. </p>
<p>PduR.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the header file of the PduR which contains </p>
<p>global API declarations. </p>
<p>PduR_CanIf.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the interface header of the PduR to the CAN </p>
<p>Interface. </p>
<p>PduR_LinIf.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the interface header of the PduR to the LIN </p>
<p>Interface. </p>
<p>PduR_FrIf.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the interface header of the PduR to the </p>
<p>Flexray Interface. </p>
<p>PduR_MostIf.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the interface header of the PduR to the MOST </p>
<p>Interface. </p>
<p>PduR_CanNm.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the interface header of the PduR to the CAN </p>
<p>Network Management. </p>
<p>PduR_NmOsek.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the interface header of the PduR to the OSEK </p>
<p>Network Management. </p>
<p>PduR_FrNm.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the interface header of the PduR to the </p>
<p>Flexray Network Management. </p>
<p>PduR_IpduM.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the interface header of the PduR to the IPDU </p>
<p>Multiplexor. </p>
<p>PduR_CanTp.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the interface header of the PduR to the CAN </p>
<p>Transport Protocol. </p>
<p>PduR_LinTp.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the interface header of the PduR to the LIN </p>
<p>Transport Protocol. </p>
<p>PduR_FrTp.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the interface header of the PduR to the </p>
<p>Flexray Transport Protocol. </p>
<p>PduR_MostTp.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the interface header of the PduR to the MOST </p>
<p>Transport Protocol. </p>
<p>PduR_J1939Tp.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the interface header of the PduR to the J1939 </p>
<p>Transport Protocol. </p>
<p>PduR_SoAd.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the interface header of the PduR to the MOST </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>36 / 106 </p>
<p><b>File Name </b></p>
<p><b>Source </b></p>
<p><b>Code </b></p>
<p><b>Delivery </b></p>
<p><b>Object </b></p>
<p><b>Code </b></p>
<p><b>Delivery </b></p>
<p><b>Description </b></p>
<p>Transport Protocol. </p>
<p>PduR_CddDobt.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the interface header of the PduR to the Dobt </p>
<p>Complex Device Driver. </p>
<p>PduR_Com.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the interface header of the PduR to </p>
<p>Communication. </p>
<p>PduR_Dcm.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the interface header of the PduR to the </p>
<p>Diagnostic Communication Manager. </p>
<p>PduR_ApplIf.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the interface header of the PduR to the </p>
<p>Application IF PDU Interface. </p>
<p>PduR_ApplTp.h </p>
<p></p>
<p> </p>
<p></p>
<p> </p>
<p>This is the interface header of the PduR to the </p>
<p>Application Transport Protocol Interface. </p>
<p>Table 4-1  </p>
<p>Static files </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Info </b></p>
<p>Depending on the tailoring of the delivery, not all files might be delivered. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p><b>4.1.2 </b></p>
<p><b>Dynamic Files </b></p>
<p>The dynamic files are generated by the configuration tool GENy. </p>
<p><b>File Name </b></p>
<p><b>Description </b></p>
<p>PduR_Cfg.h </p>
<p>This file contains pre-compile time configuration switches </p>
<p>PduR_Cfg.c </p>
<p>This file is currently not used by the PDU Router. File is empty. </p>
<p>PduR_Lcfg.c </p>
<p>This file contains link time configuration data such as allocation of RAM </p>
<p>resources or function-pointer tables. </p>
<p>PduR_PBcfg.c </p>
<p>This file contains post-build configuration data such as routing tables. </p>
<p>PduR_Notifications.h </p>
<p>This file is not specified by AUTOSAR and is generated only if the routing </p>
<p>callout feature has been enabled. The file contains the prototypes for the </p>
<p>configured callout functions. </p>
<p>PduR_Types.h </p>
<p>This is the header file of the PduR which contains general types and </p>
<p>defines. </p>
<p>PduR_&lt;UL&gt;.h </p>
<p>This is the interface header of the PduR to an Upper Layer Module. </p>
<p>Table 4-2  </p>
<p>Generated files </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>37 / 106 </p>
<p><b>4.2 </b></p>
<p><b>Include Structure </b></p>
<p><b>class File Structure</b></p>
<p>«File»</p>
<p><b>PduR.c</b></p>
<p>«File»</p>
<p><b>PduR.h</b></p>
<p>«File»</p>
<p><b>PduR_&lt;UpTp&gt;.h</b></p>
<p>«File»</p>
<p><b>PduR_&lt;UpIf&gt;.h</b></p>
<p>«File»</p>
<p><b>PduR_&lt;LoIf&gt;.h</b></p>
<p>«File»</p>
<p><b>PduR_&lt;LoTp&gt;.h</b></p>
<p><b>Upper Layer</b></p>
<p><b>Core</b></p>
<p><b>Lower Layer</b></p>
<p>«File»</p>
<p><b>PduR_Types.h</b></p>
<p><b>Environment</b></p>
<p>«File»</p>
<p><b>PduR_MemMap.inc</b></p>
<p>«File»</p>
<p><b>PduR_Compiler_Cfg.h</b></p>
<p><b>GenData / </b></p>
<p><b>Config</b></p>
<p>«File»</p>
<p><b>PduR_Lcfg.c</b></p>
<p>«File»</p>
<p><b>PduR_PBcfg.c</b></p>
<p>«File»</p>
<p><b>PduR_Cfg.h</b></p>
<p>«File»</p>
<p><b>MemMap.h</b></p>
<p><b>Others</b></p>
<p>«File»</p>
<p><b>Dem.h</b></p>
<p>«File»</p>
<p><b>Det.h</b></p>
<p>«File»</p>
<p><b>PduR_Cfg.c</b></p>
<p>«File»</p>
<p><b>PduR_PBcfg.h</b></p>
<p>«File»</p>
<p><b>Dem_IntErrId.h</b></p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p>«include»</p>
<p> </p>
<p>Figure 4-1 </p>
<p>Include structure </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Info </b></p>
<p>Depending on the tailoring of the delivery, the include structure may differ. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>38 / 106 </p>
<p> </p>
<p><b>4.3 </b></p>
<p><b>Critical Sections </b></p>
<p>The AUTOSAR standard provides with the BSW Scheduler a BSW module, which handles </p>
<p>entering and leaving critical sections. The Vector MICROSAR  PDUR supports additional </p>
<p>solutions to handle these sections. </p>
<p>Critical sections are supported by the following two alternatives: </p>
<p><b>&gt; </b> the BSW Scheduler </p>
<p><b>&gt; </b> the Vector Standard Library (VStdLib) </p>
<p><b>4.4 </b></p>
<p><b>Application Access </b></p>
<p>In </p>
<p>order </p>
<p>to </p>
<p>access </p>
<p>application </p>
<p>PDUs </p>
<p>the </p>
<p>application </p>
<p>has </p>
<p>to </p>
<p>include </p>
<p>the </p>
<p>header </p>
<p>PduR_ApplIf.h </p>
<p>in </p>
<p>order </p>
<p>to </p>
<p>receive </p>
<p>and </p>
<p>transmit </p>
<p>interface </p>
<p>layer </p>
<p>PDUs. </p>
<p>The </p>
<p>header </p>
<p>PduR_ApplTp.h provides similar APIs for TP layer PDU access.  </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Info </b></p>
<p>The application access implementation assumes that the implementation of the PDU </p>
<p>Router callback functions takes place in the same memory section as the PDU Router </p>
<p>is mapped to. See the header files PduR_ApplIf.h and PduR_ApplTp.h for details on </p>
<p>the used memory mapping. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>39 / 106 </p>
<p><b>5 </b></p>
<p><b>API Description </b></p>
<p>For an interfaces overview please see Figure 2-2. </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Info </b></p>
<p>Not all API functionalities might be available within your delivery. The supported </p>
<p>functionality was derived from the questionnaire at integration time of your delivery. If </p>
<p>required API functionality is not available in your delivery, please contact Vector </p>
<p>Informatik. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>5.1 </b></p>
<p><b>Services provided by PDUR </b></p>
<p><b>5.1.1 </b></p>
<p><b>PduR_Init </b></p>
<p><b>Prototype </b></p>
<p>void <b>PduR_Init </b>(const PduR_PBConfigType *ConfigPtr) </p>
<p><b>Parameter </b></p>
<p>ConfigPtr </p>
<p>Pointer to the PDUR configuration data, if </p>
<p>PDUR_SELECTABLE_INIT_POINTER is defined to STD_ON. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This function initializes the PDUR and performs configuration consistency checks. If the initialization is </p>
<p>performed sucessfully the PduR is in the state PDUR_ONLINE else PDUR_UNINIT. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is used by the Ecu State Manager </p>
<p> </p>
<p><b>Caution</b> </p>
<p>PduR_Init shall not pre-empt any PDUR function.  </p>
<p>Call Context </p>
<p>The function must be called on task level and has not to be interrupted by other administrative function </p>
<p>calls. </p>
<p>Table 5-1  </p>
<p>PduR_Init </p>
<p><b>5.1.2 </b></p>
<p><b>PduR_InitMemory </b></p>
<p><b>Prototype </b></p>
<p>void <b>PduR_InitMemory </b>(void) </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>40 / 106 </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>The function initialises variables, which cannot be initialised with the startup code. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application. </p>
<p>Call Context </p>
<p>The function must be called on task level. </p>
<p>Table 5-2  </p>
<p>PduR_InitMemory </p>
<p><b>5.1.3 </b></p>
<p><b>PduR_GetVersionInfo </b></p>
<p><b>Prototype </b></p>
<p>void <b>PduR_GetVersionInfo </b>(Std_VersionInfoType *versioninfo) </p>
<p><b>Parameter </b></p>
<p>versioninfo </p>
<p>Pointer to where to store the version information of the PDUR. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>Returns the version information of the PDUR. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level. </p>
<p>Table 5-3  </p>
<p>PduR_GetVersionInfo </p>
<p><b>5.1.4 </b></p>
<p><b>PduR_GetConfigurationId </b></p>
<p><b>Prototype </b></p>
<p>uint32 <b>PduR_GetConfigurationId </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>uint32 </p>
<p>uint32 </p>
<p><b>Functional Description </b></p>
<p>Provides the unique identifier of the PDUR configuration. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>41 / 106 </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the Application. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level. </p>
<p>Table 5-4  </p>
<p>PduR_GetConfigurationId </p>
<p><b>5.1.5 </b></p>
<p><b>PduR_MainFunction </b></p>
<p><b>Prototype </b></p>
<p>void <b>PduR_MainFunction </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This function performs the processing of the ECU internal TP communication. </p>
<p>The call cycle of this function affects the delay in the ECU internal TP communication. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the BSW Scheduler. </p>
<p>Call Context </p>
<p>The function must be called on task level. </p>
<p>Table 5-5  </p>
<p>PduR_MainFunction </p>
<p><b>5.1.6 </b></p>
<p><b>PduR_EnableRouting </b></p>
<p><b>Prototype </b></p>
<p>void <b>PduR_EnableRouting </b>(PduR_RoutingPathGroupIdType id) </p>
<p><b>Parameter </b></p>
<p>id </p>
<p>Identification of the routing path group. Routing path groups are defined in the </p>
<p>PDU router configuration. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This function enables a routing path group. If the routing path group does not exist or is already enabled, </p>
<p>the function returns with no action. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the BSW Mode Manager. </p>
<p>Call Context </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>42 / 106 </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>PduR_EnableRouting or PduR_DisableRouting calls for the same id. </p>
<p>Table 5-6  </p>
<p>PduR_EnableRouting </p>
<p><b>5.1.7 </b></p>
<p><b>PduR_DisableRouting </b></p>
<p><b>Prototype </b></p>
<p>void <b>PduR_DisableRouting </b>(PduR_RoutingPathGroupIdType id) </p>
<p><b>Parameter </b></p>
<p>id </p>
<p>Identification of the routing path group. Routing path groups are defined in the </p>
<p>PDU router configuration. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This function disables a routing path group. If the routing path group does not exist or is already disbled, </p>
<p>the function returns with no action. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the BSW Mode Manager. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>PduR_EnableRouting or PduR_DisableRouting calls for the same id. </p>
<p>Table 5-7  </p>
<p>PduR_DisableRouting </p>
<p><b>5.1.7.1 </b></p>
<p><b>PduR_CanTpStartOfReception </b></p>
<p><b>Prototype </b></p>
<p>BufReq_ReturnType <b>PduR_CanTpStartOfReception </b>(PduIdType CanTpRxPduId, </p>
<p>PduLengthType TpSduLength, PduLengthType *BufferSizePtr) </p>
<p><b>Parameter </b></p>
<p>CanTpRxPduId </p>
<p>ID of the CanTp I-PDU that will be received. </p>
<p>TpSduLength </p>
<p>Length of the entire CanTp TP SDU which will be received </p>
<p>BufferSizePtr </p>
<p>Pointer to the receive buffer in the receiving module. </p>
<p> This parameter will be used to compute Block Size (BS) in the transport </p>
<p>protocol module. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>43 / 106 </p>
<p><b>Return code </b></p>
<p>BufReq_ReturnType </p>
<p>BufReq_ReturnType BUFREQ_OK Connection has been accepted. </p>
<p>RxBufferSizePtr indicates the available receive buffer. </p>
<p>BUFREQ_E_NOT_OK The PDU Router is in the PDUR_UNINIT state </p>
<p>or the CanTpRxPduId is not valid </p>
<p>or the CanTpRxPduId is not forwarded in this identity </p>
<p>or the PduInfoPtr is not valid </p>
<p>or the request was not accepted by the upper layer. </p>
<p>BUFREQ_E_BUSY Currently no buffer of the requested size is available. The </p>
<p>request was not accepted by the upper layer. </p>
<p><b>Functional Description </b></p>
<p>This function will be called by the CanTp at the start of receiving an I-PDU. The I-PDU might be fragmented </p>
<p>into multiple N-PDUs (FF with one or more following CFs) or might consist of a single N-PDU (SF). </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by CanTp. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>PduR_CanTpStartOfReception calls for the same CanTpRxPduId. </p>
<p>Table 5-8  </p>
<p>PduR_CanTpStartOfReception </p>
<p><b>5.1.8 </b></p>
<p><b>PduR_CanTpCopyRxData </b></p>
<p><b>Prototype </b></p>
<p>BufReq_ReturnType <b>PduR_CanTpCopyRxData </b>(PduIdType CanTpRxPduId, </p>
<p>PduInfoType *PduInfoPtr, PduLengthType *BufferSizePtr) </p>
<p><b>Parameter </b></p>
<p>CanTpRxPduId </p>
<p>ID of the CanTp I-PDU that will be received. </p>
<p>PduInfoPtr </p>
<p>Pointer to the buffer (SduDataPtr) and its length (SduLength) containing the </p>
<p>data to be copied by PDU Router module in case of gateway or upper layer </p>
<p>module in case of reception. </p>
<p>BufferSizePtr </p>
<p>Available receive buffer after data has been copied. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>44 / 106 </p>
<p><b>Return code </b></p>
<p>BufReq_ReturnType </p>
<p>BufReq_ReturnType </p>
<p>BUFREQ_OK Buffer request accomplished successful. </p>
<p>BUFREQ_E_NOT_OK The PDU Router is in the PDUR_UNINIT state </p>
<p>or the CanTpRxPduId is not valid </p>
<p>or the CanTpRxPduId is not forwarded in this identity </p>
<p>or the PduInfoPtr is not valid </p>
<p>or the request was not accepted by the upper layer. </p>
<p>BUFREQ_E_BUSY Currently no buffer of the requested size is available. It's </p>
<p>up the requestor to retry request for a certain time. The request was not </p>
<p>accepted by the upper layer. </p>
<p>BUFREQ_E_OVFL The upper TP module is not able to receive the number of </p>
<p>bytes. The request was not accepted by the upper layer. </p>
<p><b>Functional Description </b></p>
<p>This function is called by the CanTp if data has to be to copied to the receiving module. Several calls may </p>
<p>be made during one transportation of an I-PDU. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by CanTp. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>PduR_CanTpCopyRxData calls for the same CanTpRxPduId. </p>
<p>Table 5-9  </p>
<p>PduR_CanTpCopyRxData </p>
<p><b>5.1.9 </b></p>
<p><b>PduR_CanTpCopyTxData </b></p>
<p><b>Prototype </b></p>
<p>BufReq_ReturnType <b>PduR_CanTpCopyTxData </b>(PduIdType CanTpTxPduId, </p>
<p>PduInfoType *PduInfoPtr, RetryInfoType *RetryInfoPtr, PduLengthType </p>
<p>*TxDataCntPtr) </p>
<p><b>Parameter </b></p>
<p>CanTpTxPduId </p>
<p>ID of the CanTp I-PDU that will be transmitted. </p>
<p>PduInfoPtr </p>
<p>Pointer to the destination buffer and the number of bytes to copy. </p>
<p> In case of gateway the PDU Router module will copy otherwise the source </p>
<p>upper layer module will copy the data. If no enough transmit data is available, </p>
<p>no data is copied. The transport protocol module will retry. </p>
<p> A size of copy size of 0 can be used to indicate state changes in the retry </p>
<p>parameter. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>45 / 106 </p>
<p>RetryInfoPtr </p>
<p>This parameter is used to retransmit data because problems occurred in </p>
<p>transmitting it the last time. If the I-PDU is transmitted from a local module the </p>
<p>PDU router module will just forward the parameter value without check. If the </p>
<p>I-PDU is gatewayed from another bus the PDU Router module will make the </p>
<p>following interpretation: </p>
<p> If the transmitted TP I-PDU does not support the retry feature a NULL_PTR </p>
<p>can be provided. </p>
<p> Alternatively TpDataState can indicate TP_NORETRY. </p>
<p> Both indicate that the copied transmit data can be removed from the buffer </p>
<p>after it has been copied. </p>
<p> If the retry feature is used by the TX I-PDU, RetryInfoPtr must point to a valid </p>
<p>RetryInfoType element. If TpDataState indicates TP_CONFPENDING the </p>
<p>previously copied data must remain in the TP buffer to be available for error </p>
<p>recovery. </p>
<p> TP_DATACONF indicates that all data, that have been copied so far, are </p>
<p>confirmed and can be removed from the TP buffer. Data copied by this API call </p>
<p>are excluded and will be confirmed later. </p>
<p> TP_DATARETRY indicates that this API call shall copy already copied data in </p>
<p>order to recover from an error. </p>
<p> In this case TxTpDataCnt specifies the offset of the first byte to be copied by </p>
<p>the API call. </p>
<p>TxDataCntPtr </p>
<p>Indicates the remaining number of bytes that are available in the PduR Tx </p>
<p>buffer. </p>
<p> AvailableTxDataCntPtr can be used by TP modules that support dynamic </p>
<p>payload lengths (e.g. Iso FrTp) to determine the size of the following CFs. </p>
<p><b>Return code </b></p>
<p>BufReq_ReturnType </p>
<p>BufReq_ReturnType </p>
<p>BUFREQ_OK The data has been copied to the transmit buffer successful. </p>
<p>BUFREQ_E_NOT_OK The PDU Router is in the PDUR_UNINIT state </p>
<p>or the CanTpTxPduId is not valid </p>
<p>or the CanTpTxPduId is not forwarded in this identity </p>
<p>or the PduInfoPtr is not valid </p>
<p>or the request was not accepted by the upper layer and no data has been </p>
<p>copied. </p>
<p>BUFREQ_E_BUSY The request cannot be processed because the TX data is </p>
<p>not available and no data has been copied. The TP layer might retry later the </p>
<p>copy process. </p>
<p><b>Functional Description </b></p>
<p>This function is called by the CanTp to query the transmit data of an I-PDU segment. </p>
<p>Each call to this function copies the next part of the transmit data until TpDataState indicates </p>
<p>TP_DATARETRY. In this case the API restarts to copy the data beginning at the location indicated by </p>
<p>TpTxDataCnt. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by CanTp. </p>
<p>Call Context </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>46 / 106 </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>PduR_CanTpCopyTxData calls for the same CanTpTxPduId. </p>
<p>Table 5-10  </p>
<p>PduR_CanTpCopyTxData </p>
<p><b>5.1.10 </b></p>
<p><b>PduR_CddDobtSetCanTpState </b></p>
<p><b>Prototype </b></p>
<p>void <b>PduR_CddDobtSetCanTpState </b>(boolean CddDobtState) </p>
<p><b>Parameter </b></p>
<p>CddDobtState </p>
<p>TRUE: CddDobt is active. </p>
<p> FALSE: CddDobt is not active. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>The function is called by CddDobt to switch configured CanTp calls API to CddDobt forwardings. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by CddDobt. </p>
<p>Call Context </p>
<p>The must be called in the context of CddDobt_PduRCanTpCallout function. </p>
<p>Table 5-11  </p>
<p>PduR_CddDobtSetCanTpState </p>
<p><b>5.1.11 </b></p>
<p><b>Provided Interfaces to Lower Communication Interface Layers </b></p>
<p>This chapter describes the interfaces provided to Lower Layers using the Communication </p>
<p>Interface (e.g. CanIf, LinIf, FrIf). Replace the tag &lt;LoIf&gt; by the MSN of the Upper Layer. </p>
<p><b>5.1.11.1 </b></p>
<p><b>PduR_&lt;LoIf&gt;RxIndication </b></p>
<p><b>Prototype </b></p>
<p>void <b>PduR_&lt;LoIf&gt;RxIndication </b>(PduIdType &lt;LoIf&gt;RxPduId, </p>
<p>PDUR_RXINDICATION_TYPE PDUR_RXINDICATION_PARA) </p>
<p><b>Parameter </b></p>
<p>&lt;LoIf&gt;RxPduId </p>
<p>Handle ID of the received &lt;LoIf&gt; I-PDU. </p>
<p>PDUR_RXINDICATION_P</p>
<p>ARA </p>
<p>SduPtr Pointer to the received I-PDU data. </p>
<p> This Parameter is used, if PDUR_USE_PDUINFOTYPE is defined to </p>
<p>STD_OFF. </p>
<p> PduInfoPtr Payload information of the received I-PDU (pointer to data and </p>
<p>data length). </p>
<p> This Parameter is used, if PDUR_USE_PDUINFOTYPE is defined to </p>
<p>STD_ON. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>47 / 106 </p>
<p><b>Functional Description </b></p>
<p>The function is called by the &lt;LoIf&gt; to indicate the complete reception of a &lt;LoIf&gt; I-PDU. The PDU Router </p>
<p>evaluates the &lt;LoIf&gt; I-PDU handle and performs appropriate handle and port conversion. The call is routed </p>
<p>to an upper IF module using the appropriate I-PDU handle of the destination layer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by &lt;LoIf&gt;. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>PduR_&lt;LoIf&gt;RxIndication calls for the same &lt;LoIf&gt;RxPduId. </p>
<p>Table 5-12  </p>
<p>PduR_&lt;LoIf&gt;RxIndication </p>
<p><b>5.1.11.2 </b></p>
<p><b>PduR_&lt;LoIf&gt;TxConfirmation </b></p>
<p><b>Prototype </b></p>
<p>void <b>PduR_&lt;LoIf&gt;TxConfirmation </b>(PduIdType &lt;LoIf&gt;TxPduId) </p>
<p><b>Parameter </b></p>
<p>&lt;LoIf&gt;TxPduId </p>
<p>Handle ID of the transmitted &lt;LoIf&gt; I-PDU. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>The function is called by the &lt;LoIf&gt; to indicate the complete transmission of a &lt;LoIf&gt; I-PDU. The PDU </p>
<p>Router evaluates the &lt;LoIf&gt; I-PDU handle and performs appropriate handle and port conversion. The call </p>
<p>is routed to an upper IF module using the appropriate I-PDU handle of the destination layer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by &lt;LoIf&gt;. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>PduR_&lt;LoIf&gt;TxConfirmation calls for the same &lt;LoIf&gt;TxPduId. </p>
<p>Table 5-13  </p>
<p>PduR_&lt;LoIf&gt;TxConfirmation </p>
<p><b>5.1.11.3 </b></p>
<p><b>PduR_&lt;LoIf&gt;TriggerTransmit </b></p>
<p><b>Prototype </b></p>
<p>PDUR_TRIGGERTRANSMIT_RETURN <b>PduR_&lt;LoIf&gt;TriggerTransmit </b>(PduIdType </p>
<p>&lt;LoIf&gt;TxPduId, PDUR_TRIGGERTRANSMIT_TYPE PDUR_TRIGGERTRANSMIT_PARA) </p>
<p><b>Parameter </b></p>
<p>&lt;LoIf&gt;TxPduId </p>
<p>Handle ID of the &lt;LoIf&gt; I-PDU that will be transmitted. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>48 / 106 </p>
<p>PDUR_TRIGGERTRANS</p>
<p>MIT_PARA </p>
<p>SduPtr Pointer to the I-PDU data buffer of the &lt;LoIf&gt; IF that will be </p>
<p>transmitted. </p>
<p> This Parameter is used, if PDUR_USE_PDUINFOTYPE is defined to </p>
<p>STD_OFF. </p>
<p> PduInfoPtr Payload information of the &lt;LoIf&gt; I-PDU that will be transmitted </p>
<p>(pointer to data and data length). </p>
<p> This Parameter is used, if PDUR_USE_PDUINFOTYPE is defined to </p>
<p>STD_ON. </p>
<p><b>Return code </b></p>
<p>PDUR_TRIGGERTRANS</p>
<p>MIT_RETURN </p>
<p>PDUR_TRIGGERTRANSMIT_RETURN none No return value. </p>
<p>This return value is used, if PDUR_USE_PDUINFOTYPE is defined to </p>
<p>STD_OFF. </p>
<p>Std_ReturnType This return value is used, if PDUR_USE_PDUINFOTYPE is </p>
<p>defined to STD_ON. E_OK: The SDU has been copied and the SduLength </p>
<p>indicates the number of copied bytes. </p>
<p>E_NOT_OK: The SDU has not been copied and the SduLength has not been </p>
<p>set. </p>
<p><b>Functional Description </b></p>
<p>The function is called by the &lt;LoIf&gt; to request the &lt;LoIf&gt; TX I-PDU data before transmission. The PDU </p>
<p>Router evaluates the &lt;LoIf&gt; I-PDU handle and performs appropriate handle and port conversion. The call </p>
<p>is routed to an upper IF module using the appropriate I-PDU handle of the destination layer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by &lt;LoIf&gt;. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>PduR_&lt;LoIf&gt;TriggerTransmit calls for the same &lt;LoIf&gt;TxPduId. </p>
<p>Table 5-14  </p>
<p>PduR_&lt;LoIf&gt;TriggerTransmit </p>
<p><b>5.1.12 </b></p>
<p><b>Provided Interfaces to Lower Transport Protocol Layers </b></p>
<p>This  chapter  describes  the  interfaces  provided  to  Lower  Layers  using  the  Transport </p>
<p>Protocol  (e.g.  CanTp,  LinTp,  FrTp).  Replace  the  tag  &lt;LoTp&gt;  by  the  MSN  of  the  Upper </p>
<p>Layer. </p>
<p><b>5.1.12.1 </b></p>
<p><b>PduR_&lt;LoTp&gt;ProvideRxBuffer </b></p>
<p><b>Prototype </b></p>
<p>BufReq_ReturnType <b>PduR_&lt;LoTp&gt;ProvideRxBuffer </b>(PduIdType &lt;LoTp&gt;RxPduId, </p>
<p>PduLengthType TpSduLength, PduInfoTypeApplPtr *PduInfoPtr) </p>
<p><b>Parameter </b></p>
<p>&lt;LoTp&gt;RxPduId </p>
<p>ID of the &lt;LoTp&gt; I-PDU that will be received. </p>
<p>TpSduLength </p>
<p>Length of the entire &lt;LoTp&gt; TP SDU which will be received </p>
<p>PduInfoPtr </p>
<p>Pointer to pointer to PduInfoStructure containing SDU data pointer and SDU </p>
<p>length of a receive buffer. If the return value is not equal to BUFREQ_OK, </p>
<p>PduInfoPtr is undefined and shall not be used. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>49 / 106 </p>
<p><b>Return code </b></p>
<p>BufReq_ReturnType </p>
<p>BufReq_ReturnType </p>
<p>BUFREQ_OK Buffer request accomplished successful </p>
<p>BUFREQ_E_NOT_OK The PDU Router is in the PDUR_UNINIT state </p>
<p>or the &lt;LoTp&gt;TxPduId is not valid </p>
<p>or the &lt;LoTp&gt;TxPduId is not forwarded in this identity </p>
<p>or the PduInfoPtr is not valid </p>
<p>or the request was not accepted by the destination upper layer. </p>
<p>BUFREQ_E_BUSY Currently no buffer available </p>
<p>BUFREQ_E_OVFL The upper TP module is not able to receive number of </p>
<p>TpSduLength bytes and no buffer is provided. </p>
<p><b>Functional Description </b></p>
<p>The function is called by the &lt;LoTp&gt; to receive a &lt;LoTp&gt; SDU. The PDU Router evaluates the &lt;LoTp&gt; I-</p>
<p>PDU handle and performs appropriate handle and port conversion. The call is routed to an upper TP </p>
<p>module using the appropriate I-PDU handle of the destination layer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by &lt;LoTp&gt;. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>PduR_&lt;LoTp&gt;ProvideRxBuffer calls for the same &lt;LoTp&gt;RxPduId. </p>
<p>Table 5-15  </p>
<p>PduR_&lt;LoTp&gt;ProvideRxBuffer </p>
<p><b>5.1.12.2 </b></p>
<p><b>PduR_&lt;LoTp&gt;RxIndication </b></p>
<p><b>Prototype </b></p>
<p>void <b>PduR_&lt;LoTp&gt;RxIndication </b>(PduIdType &lt;LoTp&gt;RxPduId, NotifResultType </p>
<p>Result) </p>
<p><b>Parameter </b></p>
<p>&lt;LoTp&gt;RxPduId </p>
<p>ID of the &lt;LoTp&gt; I-PDU that will be received. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>50 / 106 </p>
<p>Result </p>
<p>Result of the TP reception </p>
<p> NTFRSLT_OK The TP reception has been completed successfully. </p>
<p> NTFRSLT_E_NOT_OK The PDU Router is in the PDUR_UNINIT state </p>
<p> or the &lt;LoTp&gt;RxPduId is not valid </p>
<p> or the &lt;LoTp&gt;RxPduId is not forwarded in this identity </p>
<p> or the request was not accepted by the destination upper layer. </p>
<p> NTFRSLT_E_TIMEOUT_A The TP reception has not been completed </p>
<p>successfully. </p>
<p> NTFRSLT_E_TIMEOUT_Cr The TP reception has not been completed </p>
<p>successfully. </p>
<p> NTFRSLT_E_WRONG_SN The TP reception has not been completed </p>
<p>successfully. </p>
<p> NTFRSLT_E_UNEXP_PDU The TP reception has not been completed </p>
<p>successfully. </p>
<p> NTFRSLT_E_NO_BUFFER The TP reception has not been completed </p>
<p>successfully. </p>
<p> NTFRSLT_E_CANCELLATION_OK The TP reception has been cancelled </p>
<p>successfully. </p>
<p> NTFRSLT_E_CANCELLATION_NOT_OK The TP reception has not been </p>
<p>cancelled. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>The function is called by the &lt;LoTp&gt; to indicate the complete receiption of a &lt;LoTp&gt; SDU or to report an </p>
<p>error that occurred during reception. The PDU Router evaluates the &lt;LoTp&gt; I-PDU handle and performs </p>
<p>appropriate handle and port conversion. The call is routed to an upper TP module using the appropriate I-</p>
<p>PDU handle of the destination layer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by &lt;LoTp&gt;. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>PduR_&lt;LoTp&gt;RxIndication calls for the same &lt;LoTp&gt;RxPduId. </p>
<p>Table 5-16  </p>
<p>PduR_&lt;LoTp&gt;RxIndication </p>
<p><b>5.1.12.3 </b></p>
<p><b>PduR_&lt;LoTp&gt;ProvideTxBuffer </b></p>
<p><b>Prototype </b></p>
<p>BufReq_ReturnType <b>PduR_&lt;LoTp&gt;ProvideTxBuffer </b>(PduIdType &lt;LoTp&gt;TxPduId, </p>
<p>PduInfoTypeApplPtr *PduInfoPtr, uint16 Length) </p>
<p><b>Parameter </b></p>
<p>&lt;LoTp&gt;TxPduId </p>
<p>ID of the &lt;LoTp&gt; I-PDU that will be transmitted. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>51 / 106 </p>
<p>PduInfoPtr </p>
<p>Pointer to pointer to PduInfoStructure containing SDU data pointer and SDU </p>
<p>length of a transmit buffer. If the return value is not equal to BUFREQ_OK, </p>
<p>PduInfoPtr is undefined and shall not be used. </p>
<p>Length </p>
<p>Exact length of the requested transmit buffer. </p>
<p> It shall not exceed the number of bytes still to be sent. This parameter is </p>
<p>needed by the transport protocol to perform error recovery mechanisms. If no </p>
<p>error recovery is configured for this PduId, Length may be zero, which </p>
<p>indicates that the provided buffer can be of arbitrary size (larger than zero). </p>
<p><b>Return code </b></p>
<p>BufReq_ReturnType </p>
<p>BufReq_ReturnType </p>
<p>BUFREQ_OK Buffer request accomplished successful. </p>
<p>BUFREQ_E_NOT_OK The PDU Router is in the PDUR_UNINIT state </p>
<p>or the &lt;LoTp&gt;TxPduId is not valid </p>
<p>or the &lt;LoTp&gt;TxPduId is not forwarded in this identity </p>
<p>or the PduInfoPtr is not valid </p>
<p>or the request was not accepted by the destination upper layer. </p>
<p>BUFREQ_E_BUSY Currently no buffer of the requested size is available </p>
<p><b>Functional Description </b></p>
<p>The function is called by the &lt;LoTp&gt; to request a &lt;LoTp&gt; TX SDU before transmission. The called module </p>
<p>has to copy the data to be transmitted to the destination of PduInfoPtr. The PDU Router evaluates the </p>
<p>&lt;LoTp&gt; I-PDU handle and performs appropriate handle and port conversion. The call is routed to an upper </p>
<p>TP module using the appropriate I-PDU handle of the destination layer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by &lt;LoTp&gt;. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>PduR_&lt;LoTp&gt;ProvideTxBuffer calls for the same &lt;LoTp&gt;TxPduId. </p>
<p>Table 5-17  </p>
<p>PduR_&lt;LoTp&gt;ProvideTxBuffer </p>
<p><b>5.1.12.4 </b></p>
<p><b>PduR_&lt;LoTp&gt;TxConfirmation </b></p>
<p><b>Prototype </b></p>
<p>void <b>PduR_&lt;LoTp&gt;TxConfirmation </b>(PduIdType &lt;LoTp&gt;TxPduId, </p>
<p>NotifResultType Result) </p>
<p><b>Parameter </b></p>
<p>&lt;LoTp&gt;TxPduId </p>
<p>ID of the &lt;LoTp&gt; I-PDU that will be transmitted. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>52 / 106 </p>
<p>Result </p>
<p>Result of the TP transmission </p>
<p> NTFRSLT_OK The TP transmission has been completed successfully. </p>
<p> NTFRSLT_E_NOT_OK The PDU Router is in the PDUR_UNINIT state </p>
<p> or the &lt;LoTp&gt;TxPduId is not valid </p>
<p> or the &lt;LoTp&gt;TxPduId is not forwarded in this identity </p>
<p> or the request was not accepted by the destination upper layer. </p>
<p> NTFRSLT_E_TIMEOUT_A The TP transmission has not been completed </p>
<p>successfully. </p>
<p> NTFRSLT_E_TIMEOUT_Bs The TP transmission has not been completed </p>
<p>successfully. </p>
<p> NTFRSLT_E_INVALID_FS The TP transmission has not been completed </p>
<p>successfully. </p>
<p> NTFRSLT_E_WFT_OVRN The TP transmission has not been completed </p>
<p>successfully. </p>
<p> NTFRSLT_E_NO_BUFFER The TP transmission has not been completed </p>
<p>successfully. </p>
<p> NTFRSLT_E_CANCELLATION_OK The TP transmission has been cancelled </p>
<p>successfully. </p>
<p> NTFRSLT_E_CANCELLATION_NOT_OK The TP transmission has not been </p>
<p>cancelled. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>The function is called by the &lt;LoTp&gt; to confirm a successful transmission of a &lt;LoTp&gt; TX SDU or to report </p>
<p>an error that occurred during transmission. The PDU Router evaluates the &lt;LoTp&gt; I-PDU handle and </p>
<p>performs appropriate handle and port conversion. The call is routed to an upper TP module using the </p>
<p>appropriate I-PDU handle of the destination layer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by &lt;LoTp&gt;. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>PduR_&lt;LoTp&gt;TxConfirmation calls for the same &lt;LoTp&gt;TxPduId. </p>
<p>Table 5-18  </p>
<p>PduR_&lt;LoTp&gt;TxConfirmation </p>
<p><b>5.1.12.5 </b></p>
<p><b>PduR_&lt;LoTp&gt;ChangeParameterConfirmation </b></p>
<p><b>Prototype </b></p>
<p>void <b>PduR_&lt;LoTp&gt;ChangeParameterConfirmation </b>(PduIdType &lt;LoTp&gt;RxPduId, </p>
<p>NotifResultType Result) </p>
<p><b>Parameter </b></p>
<p>&lt;LoTp&gt;RxPduId </p>
<p>ID of the &lt;LoTp&gt; I-PDU that parameter has been changed. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>53 / 106 </p>
<p>Result </p>
<p>Result of the TP parameter change </p>
<p> NTFRSLT_PARAMETER_OK The parameter change has been executed </p>
<p>successfully. </p>
<p> NTFRSLT_E_RX_ON The parameter change request has not been executed </p>
<p>successfully due to an ongoing reception. </p>
<p> NTFRSLT_E_VALUE_NOT_OK The parameter change request has not been </p>
<p>executed successfully due to a wrong value. </p>
<p> NTFRSLT_E_PARAMETER_NOT_OK The PDU Router is in the </p>
<p>PDUR_UNINIT state </p>
<p> or the &lt;LoTp&gt;RxPduId is not valid </p>
<p> or the &lt;LoTp&gt;TxPduId is not forwarded in this identity </p>
<p> or the parameter change was not accepted by the destination lower layer. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>The function is called by the &lt;LoTp&gt; to confirm a successful parameter change or to report an error that </p>
<p>occurred during transmission. The PDU Router evaluates the &lt;LoTp&gt; I-PDU handle and performs </p>
<p>appropriate handle and port conversion. The call is routed to an upper TP module using the appropriate I-</p>
<p>PDU handle of the destination layer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by &lt;LoTp&gt;. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>PduR_&lt;LoTp&gt;TxConfirmation calls for the same &lt;LoTp&gt;TxPduId. </p>
<p>Table 5-19  </p>
<p>PduR_&lt;LoTp&gt;ChangeParameterConfirmation </p>
<p><b>5.1.13 </b></p>
<p><b>Provided Interfaces to Upper Layers </b></p>
<p>This chapter describes the interfaces provided to Upper Layers (e.g. Com, Dcm, IpduM, </p>
<p>ApplIf, ApplTp and Cdds). Replace the tag &lt;Up&gt; by the MSN of the Upper Layer. </p>
<p><b>5.1.13.1 </b></p>
<p><b>PduR_&lt;Up&gt;Transmit </b></p>
<p><b>Prototype </b></p>
<p>Std_ReturnType <b>PduR_&lt;Up&gt;Transmit </b>(PduIdType ComTxPduId, const </p>
<p>PduInfoType *PduInfoPtr) </p>
<p><b>Parameter </b></p>
<p>&lt;Up&gt;TxPduId </p>
<p>ID of the &lt;Up&gt; I-PDU to be transmitted </p>
<p>PduInfoPtr </p>
<p>Payload information of the I-PDU (pointer to data and data length) </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>54 / 106 </p>
<p><b>Return code </b></p>
<p>Std_ReturnType </p>
<p>Std_ReturnType </p>
<p>E_OK The request was accepted by the PDU Router and by the destination </p>
<p>layer. </p>
<p>E_NOT_OK The PDU Router is in the PDUR_UNINIT state </p>
<p>or the &lt;Up&gt;TxPduId is not valid </p>
<p>or the &lt;Up&gt;TxPduId is not forwarded in this identity </p>
<p>or the PduInfoPtr is not valid </p>
<p>or the request was not accepted by the destination layer. </p>
<p><b>Functional Description </b></p>
<p>The function serves to request the transmission of an IF or TP layer I-PDU. </p>
<p>The PDU Router evaluates the &lt;Up&gt; I-PDU handle and performs appropriate handle and port conversion. </p>
<p>The call is routed to a lower IF module using the appropriate I-PDU handle of the destination layer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by &lt;Up&gt;. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>PduR_&lt;Up&gt;Transmit calls for the same &lt;Up&gt;TxPduId. </p>
<p>Table 5-20  </p>
<p>PduR_&lt;Up&gt;Transmit </p>
<p><b>5.1.14 </b></p>
<p><b>Provided Interfaces to Upper Transport Protocol Layers </b></p>
<p>This  chapter  describes  the  interfaces  provided  to  Upper  Layers  (e.g.  Dcm, ApplTp  and </p>
<p>Cdds). Replace the tag &lt;UpTp&gt; by the MSN of the Upper Layer. </p>
<p><b>5.1.14.1 </b></p>
<p><b>PduR_&lt;UpTp&gt;ChangeParameterRequest </b></p>
<p><b>Prototype </b></p>
<p>Std_ReturnType <b>PduR_&lt;UpTp&gt;ChangeParameterRequest </b>(PduIdType </p>
<p>&lt;UpTp&gt;RxPduId, TPParameterType parameter, uint16 value) </p>
<p><b>Parameter </b></p>
<p>&lt;UpTp&gt;RxPduId </p>
<p>ID of the &lt;UpTp&gt; I-PDU where the parameter has to be changed </p>
<p>parameter </p>
<p>The TP parameter that shall be changed. </p>
<p>value </p>
<p>The new value for the TP parameter. </p>
<p><b>Return code </b></p>
<p>Std_ReturnType </p>
<p>Std_ReturnType </p>
<p>E_OK The request was accepted by the PDU Router and by the destination </p>
<p>layer. </p>
<p>E_NOT_OK The PDU Router is in the PDUR_UNINIT state </p>
<p>or the &lt;UpTp&gt;TxPduId is not valid </p>
<p>or the &lt;UpTp&gt;TxPduId is not forwarded in this identity </p>
<p>or the request was not accepted by the TP layer. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>55 / 106 </p>
<p><b>Functional Description </b></p>
<p>The function serves to change a specific transport protocol parameter (e.g. block-size). </p>
<p>The PDU Router evaluates the &lt;UpTp&gt; I-PDU handle and performs appropriate handle and port </p>
<p>conversion. The call is routed to a lower TP module using the appropriate I-PDU handle of the destination </p>
<p>layer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by &lt;UpTp&gt;. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>PduR_&lt;UpTp&gt;ChangeParameterRequest calls for the same &lt;UpTp&gt;RxPduId. </p>
<p>Table 5-21  </p>
<p>PduR_&lt;UpTp&gt;ChangeParameterRequest </p>
<p><b>5.1.14.2 </b></p>
<p><b>PduR_&lt;UpTp&gt;ReadParameterRequest </b></p>
<p><b>Prototype </b></p>
<p>Std_ReturnType <b>PduR_&lt;UpTp&gt;ReadParameterRequest </b>(PduIdType </p>
<p>&lt;UpTp&gt;RxPduId, TPParameterType parameter, uint16 *valuePtr) </p>
<p><b>Parameter </b></p>
<p>&lt;UpTp&gt;RxPduId </p>
<p>ID of the &lt;UpTp&gt; I-PDU where the parameter has to be changed </p>
<p>parameter </p>
<p>The TP parameter that shall be read. </p>
<p>valuePtr </p>
<p>The pointer to buffer to return the parameter value. </p>
<p><b>Return code </b></p>
<p>Std_ReturnType </p>
<p>Std_ReturnType </p>
<p>E_OK The request was accepted by the PDU Router and by the destination </p>
<p>layer. </p>
<p>E_NOT_OK The PDU Router is in the PDUR_UNINIT state </p>
<p>or the &lt;UpTp&gt;TxPduId is not valid </p>
<p>or the &lt;UpTp&gt;TxPduId is not forwarded in this identity </p>
<p>or the request was not accepted by the TP layer. </p>
<p><b>Functional Description </b></p>
<p>The function serves to read a specific transport protocol parameter (e.g. block-size). </p>
<p>The PDU Router evaluates the &lt;UpTp&gt; I-PDU handle and performs appropriate handle and port </p>
<p>conversion. The call is routed to a lower TP module using the appropriate I-PDU handle of the destination </p>
<p>layer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by &lt;UpTp&gt;. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>PduR_&lt;UpTp&gt;ReadParameterRequest calls for the same &lt;UpTp&gt;RxPduId. </p>
<p>Table 5-22  </p>
<p>PduR_&lt;UpTp&gt;ReadParameterRequest </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>56 / 106 </p>
<p><b>5.1.14.3 </b></p>
<p><b>PduR_&lt;UpTp&gt;CancelReceiveRequest </b></p>
<p><b>Prototype </b></p>
<p>Std_ReturnType <b>PduR_&lt;UpTp&gt;CancelReceiveRequest </b>(PduIdType </p>
<p>&lt;UpTp&gt;RxPduId) </p>
<p><b>Parameter </b></p>
<p>&lt;UpTp&gt;RxPduId </p>
<p>ID of the RX &lt;UpTp&gt; I-PDU to be cancelled </p>
<p><b>Return code </b></p>
<p>Std_ReturnType </p>
<p>Std_ReturnType </p>
<p>E_OK The cancellation request was accepted by the PDU Router and by the </p>
<p>TP layer. </p>
<p>E_NOT_OK The PDU Router is in the PDUR_UNINIT state </p>
<p>or the &lt;UpTp&gt;RxPduId is not valid </p>
<p>or the &lt;UpTp&gt;RxPduId is not forwarded in this identity </p>
<p>or the request was not accepted by the TP layer. </p>
<p><b>Functional Description </b></p>
<p>The function serves to cancel the reception of a TP layer I-PDU. </p>
<p>The PDU Router evaluates the &lt;UpTp&gt; I-PDU handle and performs appropriate handle and port </p>
<p>conversion. The call is routed to a lower TP module using the appropriate I-PDU handle of the destination </p>
<p>layer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by &lt;UpTp&gt;. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>PduR_&lt;UpTp&gt;CancelReceiveRequest calls for the same &lt;UpTp&gt;RxPduId. </p>
<p>Table 5-23  </p>
<p>PduR_&lt;UpTp&gt;CancelReceiveRequest </p>
<p><b>5.1.14.4 </b></p>
<p><b>PduR_&lt;UpTp&gt;CancelTransmitRequest </b></p>
<p><b>Prototype </b></p>
<p>Std_ReturnType <b>PduR_&lt;UpTp&gt;CancelTransmitRequest </b>(PduIdType </p>
<p>&lt;UpTp&gt;TxPduId) </p>
<p><b>Parameter </b></p>
<p>&lt;UpTp&gt;TxPduId </p>
<p>ID of the TX &lt;UpTp&gt; I-PDU to be cancelled </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>57 / 106 </p>
<p><b>Return code </b></p>
<p>Std_ReturnType </p>
<p>Std_ReturnType </p>
<p>E_OK The cancellation request was accepted by the PDU Router and by the </p>
<p>TP layer. </p>
<p>E_NOT_OK The PDU Router is in the PDUR_UNINIT state </p>
<p>or the &lt;UpTp&gt;TxPduId is not valid </p>
<p>or the &lt;UpTp&gt;TxPduId is not forwarded in this identity </p>
<p>or the request was not accepted by the TP layer. </p>
<p><b>Functional Description </b></p>
<p>The function serves to cancel the transmission of a TP layer I-PDU. </p>
<p>The PDU Router evaluates the &lt;UpTp&gt; I-PDU handle and performs appropriate handle and port </p>
<p>conversion. The call is routed to a lower TP module using the appropriate I-PDU handle of the destination </p>
<p>layer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by &lt;UpTp&gt;. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>PduR_&lt;UpTp&gt;CancelTransmitRequest calls for the same &lt;UpTp&gt;TxPduId. </p>
<p>Table 5-24  </p>
<p>PduR_&lt;UpTp&gt;CancelTransmitRequest </p>
<p><b>5.1.15 </b></p>
<p><b> [Service Name] </b></p>
<p><b>5.2 </b></p>
<p><b>Services used by PDUR </b></p>
<p>In the following table services provided by other components, which are used by the PDUR </p>
<p>are listed. For details about prototype and functionality refer to the documentation of the </p>
<p>providing component. </p>
<p><b>Component </b></p>
<p><b>API </b></p>
<p>DET </p>
<p>Det_ReportError </p>
<p>DEM </p>
<p>Dem_ReportErrorStatus </p>
<p>EcuM </p>
<p>EcuM_GeneratorCompatibilityError </p>
<p>CddDobt </p>
<p>CddDobt_Transmit </p>
<p>CddDobt_PduRCanTpCallout </p>
<p>Upper Layer with Communication Interface (e.g. </p>
<p>COM, Dcm, IpduM, ApplIf, Cdds) </p>
<p>&lt;Up&gt;_RxIndication </p>
<p>&lt;Up&gt;_TxConfirmation </p>
<p>&lt;Up&gt;_TriggerTransmit </p>
<p>Upper Layer with Transport Protocol Interface </p>
<p>(e.g. COM, Dcm, ApplTp, Cdds) </p>
<p>&lt;Up&gt;_TpRxIndication </p>
<p>&lt;Up&gt;_TpProvideRxBuffer </p>
<p>&lt;Up&gt;_TpProvideTxBuffer </p>
<p>&lt;Up&gt;_TpTxConfirmation </p>
<p>&lt;Up&gt;_ChangeParameterConfirmation * </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>58 / 106 </p>
<p><b>Component </b></p>
<p><b>API </b></p>
<p>Lower Layer with Communication Interface (e.g. </p>
<p>CanIf, LinIf, FrIf, IpduM, CanNm) </p>
<p>&lt;Lo&gt;_Transmit </p>
<p>Lower Layer with Transport Protocol Interface </p>
<p>(e.g. CanTp, LinTp, FrTp) </p>
<p>&lt;Lo&gt;_Transmit </p>
<p>&lt;Lo&gt;_ChangeParameterRequest * </p>
<p>&lt;Lo&gt;_ReadParameterRequest * </p>
<p>&lt;Lo&gt;_CancelReceiveRequest * </p>
<p>&lt;Lo&gt;_CancelTransmitRequest * </p>
<p>SchM </p>
<p>SchM_Enter_PduR </p>
<p>SchM_Exit_PduR </p>
<p>Table 5-25  </p>
<p>Services used by the PDUR </p>
<p>* The interface is not available for every layer. </p>
<p><b>5.3 </b></p>
<p><b>Dependencies to other BSW Modules used by PDUR </b></p>
<p>To allow reliable gateway operation, the following module settings are required by the PDU </p>
<p>Router. The configuration is executed automatically by the PDU Router where ever this is </p>
<p>possible. </p>
<p><b>Component </b></p>
<p><b>Description </b></p>
<p>CanIf </p>
<p><b>Transmit Buffer: </b>To avoid loss of I-PDUs due to an occupied Tx hardware </p>
<p>object the CAN IF must use an own Tx buffer for each I-PDU. </p>
<p>LinIf </p>
<p><b>Enable PduR Confirmation: </b>In case of FiFo queued routing paths, the PDU </p>
<p>Router relays on the confirmation of any transmitted I-PDU. </p>
<p>FrIf </p>
<p><b>Immediate Tx: </b>This transmission mode can only be used if the transmission </p>
<p>request is synchronized to the FlexRay bus time. As the time of routing (which </p>
<p>is triggered by the reception of an I-PDU) is not guaranteed to be synchronous </p>
<p>with the FlexRay scheduling, this option may not be used and is disabled by </p>
<p>GENy for all Tx I-PDUs of a routing path. </p>
<p>Com </p>
<p><b>COM Generate: </b>This COM Attribute specifies if the I-PDU is handed by COM </p>
<p>or not. If the I-PDU attribute is not checked, no signal access and other COM </p>
<p>features will be provided by COM. For details, see the </p>
<p>TechnicalReference_Il_AsrCom.pdf. </p>
<p><b>Tx COM I-PDU: </b>Tx I-PDUs that are part of a routing path must not be handled </p>
<p>by COM. As there must be only a single transmitting BSW module for any I-</p>
<p>PDU. The COM Generate is disabled automatically when a Tx I-PDU is added </p>
<p>to a routing path. </p>
<p><b>Rx COM I-PDU: </b>Rx I-PDUs that are part of a routing path can also be handled </p>
<p>by COM. In order to optimize runtime of the communication stack (and </p>
<p>especially of the Rx indication), COM Generate can be activated manually for </p>
<p>Rx I-PDUs that are not used by the application. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>59 / 106 </p>
<p><b>5.3.1 </b></p>
<p><b>Callout Functions </b></p>
<p>At its configurable interfaces the PDUR defines callout functions. The declarations of the </p>
<p>callout functions are provided by the BSW module, i.e. the PDUR. It is the integrator's task </p>
<p>to  provide  the  corresponding  function  definitions.  The  definitions  of  the  callouts  can  be </p>
<p>adjusted to the system's needs. The PDUR callout function declarations are described in </p>
<p>the following tables: </p>
<p><b>5.3.2 </b></p>
<p><b>IF Routing Callout </b></p>
<p><b>Prototype </b></p>
<p>boolean</p>
<p> </p>
<p><b>&lt;Configured IF Routing Callout&gt;</b></p>
<p> </p>
<p>(PduInfoType *pPduInfo )</p>
<p> </p>
<p><b>Parameter </b></p>
<p>pPduInfo </p>
<p>Structure containing a pointer to the data that will be routed (SduDataPtr) and </p>
<p>the length of the data that will be routed (SduLength). </p>
<p><b>Return code </b></p>
<p>boolean </p>
<p>TRUE if the routing shall be processed, else FALSE. </p>
<p><b>Functional Description </b></p>
<p>This feature is an extension of the AUTOSAR 3.0 feature set. Its functionality has been derived from </p>
<p>Bugzilla #18729 “RFC – Additional Callout to control Pdu Gatewayed by PduR”.  </p>
<p>The gateway callout function allows controlling PDU gateway activity. Further more that API can be used to </p>
<p>set internal ECU states based on routing activity. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>The Feature must be enabled at pre-compile time. </p>
<p><b>&gt; </b></p>
<p>The Callout functions can be added and removed at link time. </p>
<p><b>&gt; </b></p>
<p>It is not supported to remove callout functions at post-build time </p>
<p><b>&gt; </b></p>
<p>This function is asynchronous. </p>
<p><b>&gt; </b></p>
<p>This function is reentrant for different pPduInfo handles. </p>
<p>Expected Caller Context </p>
<p><b>&gt; </b></p>
<p>The function can be called on interrupt and task level and is not to be interrupted by other calls for the </p>
<p>same pPduInfo parameter. </p>
<p>Table 5-26  </p>
<p>IF Routing Callout </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>60 / 106 </p>
<p><b>6 </b></p>
<p><b>Configuration </b></p>
<p>In  the  PDUR  the  attributes  can  be  configured  according  to/  with  the  following  methods/ </p>
<p>tools: </p>
<p><b>&gt; </b> Configuration in GENy for a detailed description see 6.1, 6.2, 6.3, 6.4 </p>
<p><b>&gt; </b> Configuration in EcuC Data Base for a detailed description see 6.5 </p>
<p><b>6.1 </b></p>
<p><b>Configuration Variants </b></p>
<p>The PDUR supports the configuration variants </p>
<p><b>&gt;</b></p>
<p><b> </b></p>
<p>VARIANT-LINK-TIME </p>
<p><b>&gt;</b></p>
<p><b> </b></p>
<p>VARIANT-POST-BUILD </p>
<p>The configuration classes of the PDUR parameters depend on the supported configuration </p>
<p>variants. For their definitions please see the PduR_bswmd.arxml file. </p>
<p><b>6.2 </b></p>
<p><b>Configuration with GENy </b></p>
<p>The PDUR is configured with the help of the configuration tool GENy. </p>
<p>Three types of routing paths are supported by PDU Router, API forwarding, Interface layer- </p>
<p>and TP layer routing paths. API forwarding routing paths is connecting a lower-layer I-PDU </p>
<p>with an I-PDU of an upper layer and vice versa (e.g. the forwarding of a CAN IF I-PDU to </p>
<p>COM). These routing paths are used for stack internal communication only. </p>
<p>Interface and TP layer routing paths can be observed externally as they route incoming I-</p>
<p>PDUs to one or several external I-PDUs. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Info </b></p>
<p>If the PDU Router module is intended to be used with BSW modules from other </p>
<p>vendors please contact Vector Informatik. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>6.2.1 </b></p>
<p><b>PduR Properties </b></p>
<p>Depending  on  the  configuration  variant  and  the  tailoring  made  by  Vector  Informatik  at </p>
<p>delivery time not all settings are configurable or visible. </p>
<p>If  the  TP  and/or  interface  layer  gateway  have  not  been  licensed,  the  tree  elements  for </p>
<p>routing paths and TP buffer elements are displayed anyway. When right clicking on one of </p>
<p>the elements a menu is illustrated that seems to allow adding related elements. However, if </p>
<p>the requested feature is not active the request to add such an element is of no effect. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>61 / 106 </p>
<p> </p>
<p>Figure 6-1 </p>
<p>PduR Configuration </p>
<p> </p>
<p>Figure 6-2 </p>
<p>PduR Parameters </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>62 / 106 </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>The default </p>
<p>value is </p>
<p>written in bold </p>
<p><b>Description </b></p>
<p>Configuration Variant </p>
<p>Enum </p>
<p> </p>
<p>Supported configuration variant of the PDU </p>
<p>Router delivery. This setting is pre-configured </p>
<p>by Vector Informatik: </p>
<p>2) Link-Time Configuration: Similar to the </p>
<p>AUTOSAR post-build time configuration but </p>
<p>optimized regarding runtime and usability. </p>
<p>Configuration tables are linked to the code </p>
<p>directly without requiring indirection over the </p>
<p>post-build configuration structure. This </p>
<p>configuration variant does not support post-</p>
<p>build time configuration. </p>
<p>3) Post-Build Time Configuration: This variant </p>
<p>allows post-build configuration of parameters </p>
<p>generated to PduR_PBcfg.c. </p>
<p>Version Info API </p>
<p>Boolean </p>
<p> </p>
<p>If the checkbox is enabled, the PDU Router </p>
<p>provides an API to retrieve the PDU Router </p>
<p>version by the service function </p>
<p>PduR_GetVersionInfo(). </p>
<p>Development Error </p>
<p>Detection </p>
<p>Boolean </p>
<p> </p>
<p>If the checkbox is enabled, the PDU Router </p>
<p>performs runtime consistency checks that can </p>
<p>help to detect development errors. Errors are </p>
<p>reported to the Development Error Tracer </p>
<p>(DET). </p>
<p>Typically this error checking is not included in </p>
<p>production code. </p>
<p>Production Error </p>
<p>Detection </p>
<p>Boolean </p>
<p> </p>
<p>If the checkbox is enabled, the PDU Router </p>
<p>performs runtime checks for critical errors. </p>
<p>Detected errors are reported to the Diagnostics </p>
<p>Event Manager (DEM). </p>
<p>These error checks are required by AUTOSAR </p>
<p>for development and production code and are </p>
<p>only disabled upon customer request. </p>
<p>User Config File </p>
<p>String </p>
<p> </p>
<p>The content of the user configuration file is </p>
<p>appended to the generated PduR_Cfg.h file. By </p>
<p>means of the user configuration file it is </p>
<p>possible to modify or extend the PDU Router </p>
<p>configuration beyond the generator capabilities. </p>
<p>Module Start Address </p>
<p>String </p>
<p> </p>
<p>This attribute is relevant for configuration at </p>
<p>post-build time only. The attribute indicates the </p>
<p>start address of the post-build configuration </p>
<p>structure within ROM. The address is used by </p>
<p>the post-build generator to compute absolute </p>
<p>addresses required to access referenced </p>
<p>configuration tables. </p>
<p>Configuration ID </p>
<p>Integer </p>
<p> </p>
<p>The configuration ID is only relevant for </p>
<p>configurations with post-build capability and can </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>63 / 106 </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>The default </p>
<p>value is </p>
<p>written in bold </p>
<p><b>Description </b></p>
<p>be configured at link and post-build time to a </p>
<p>user specific value that allows identifying the </p>
<p>current PDU Router configuration by the API </p>
<p>PduR_GetVersionInfo(). </p>
<p>Memory Size [byte] </p>
<p>Integer </p>
<p> </p>
<p>This link-time parameter specifies how much </p>
<p>RAM the PDU Router module will allocate for its </p>
<p>PDU buffers. The size must be at least of the </p>
<p>size required by the current link-time </p>
<p>configuration. Additional RAM might be </p>
<p>allocated to allow further RAM consumption at </p>
<p>post-build time. See chapter 3.6 for details. </p>
<p>Please not that the configured number does not </p>
<p>specify the complete RAM consumption of PDU </p>
<p>Router as the module uses further memory for </p>
<p>global variables. </p>
<p>Please note that the memory size does not </p>
<p>indicate the over all RAM consumption of the </p>
<p>PDU Router. </p>
<p>Compute Memory Size </p>
<p>Action </p>
<p> </p>
<p>This button allows computing the current </p>
<p>memory size that is used by the PDU Router </p>
<p>module buffer. The value will be written to the </p>
<p>“Memory Size [byte]” Attribute. </p>
<p>Maximum Tx Buffer </p>
<p>Number </p>
<p>Integer </p>
<p> </p>
<p>If FiFo queues are used, the maximum number </p>
<p>of FiFo queues must be configured to allow </p>
<p>adding further FiFo queues at post-build </p>
<p>configuration time. </p>
<p>Create Interface Layer </p>
<p>Routing Path </p>
<p>Action </p>
<p> </p>
<p>Creates a manual (user defined) interface layer </p>
<p>routing path. </p>
<p>FiFo Tx Buffer Support </p>
<p> </p>
<p> </p>
<p>This switch is available in GENy for deliveries </p>
<p>supporting library and post-build time </p>
<p>configuration. The switch specifies whether the </p>
<p>gateway shall support FiFo queued routing or </p>
<p>not. </p>
<p>Routing Callout </p>
<p>Support </p>
<p>Boolean </p>
<p> </p>
<p>If set, the PDU Router module provides IF </p>
<p>routing callouts. </p>
<p>Maximum TP Buffer </p>
<p>Number </p>
<p>Integer </p>
<p> </p>
<p>Allows the user to specify the maximum number </p>
<p>of TP buffer elements that are configurable at </p>
<p>post-build time. The value must not be smaller </p>
<p>that the number configured at link time. </p>
<p>Create TP Layer </p>
<p>Routing Path </p>
<p>Action </p>
<p> </p>
<p>Creates a manual (user defined) TP layer </p>
<p>routing path. </p>
<p>Create TP Buffer </p>
<p>Element </p>
<p>Action </p>
<p> </p>
<p>Creates a TP buffer element as required by TP </p>
<p>layer routing paths. </p>
<p>Table 6-1  </p>
<p>PduR Properties </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>64 / 106 </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>The default </p>
<p>value is </p>
<p>written in bold </p>
<p><b>Description </b></p>
<p>Maximum Tx ApplTp </p>
<p>connections via CanTp </p>
<p>Integer </p>
<p> </p>
<p>Specifies the maximum number of concurrent </p>
<p>CanTp Tx connection that can be hold by </p>
<p>ApplTp. Only connections transmitted via </p>
<p>CanTp have to be considered. </p>
<p>Maximum Tx COM </p>
<p>connections via CanTp </p>
<p>Integer </p>
<p> </p>
<p>Specifies the maximum number of concurrent </p>
<p>CanTp Tx connection that can be hold by Com. </p>
<p>Only connections transmitted via CanTp have </p>
<p>to be considered. </p>
<p>Maximum Tx DCM </p>
<p>connections via CanTp </p>
<p>Integer </p>
<p> </p>
<p>Specifies the maximum number of concurrent </p>
<p>CanTp Tx connection that can be hold by Dcm. </p>
<p>Only connections transmitted via CanTp have </p>
<p>to be considered. </p>
<p>Maximum Rx CanTp </p>
<p>connections used by </p>
<p>upper layers </p>
<p>Integer </p>
<p> </p>
<p>Specifies the maximum number of concurrent </p>
<p>CanTp Rx connections that can be forwarded to </p>
<p>an upper layer (i.e. DCM, COM, ApplTp). The </p>
<p>value excludes CanTp connections used for TP </p>
<p>layer routing relations. </p>
<p>The configuration is required for the API style </p>
<p>conversion that is carried out as the upper layer </p>
<p>modules still uses the AUTOSAR 3.x compliant </p>
<p>API. </p>
<p>Figure 6-3 </p>
<p>PduR CAN TP 4.0 Conversion Properties </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>65 / 106 </p>
<p><b>6.2.2 </b></p>
<p><b>Automatic Routing Path Configuration </b></p>
<p><b>6.2.2.1 </b></p>
<p><b>Interface and Transport Protocol API Forwarding </b></p>
<p>All API forwarding routing information is automatically derived from upper- (i.e. COM and </p>
<p>DCM) and lower- layers (e.g. CAN IF or FR TP) using the GENy  framework. The same </p>
<p>applies for the TP intra ECU communication. </p>
<p> </p>
<p>Figure 6-4 </p>
<p>IF and TP Routing Paths visualize API Forwardings </p>
<p> </p>
<p>Figure 6-5 </p>
<p>API Forwarding Parameters </p>
<p><b>6.2.2.2 </b></p>
<p><b>Interface Gateway Routing Paths </b></p>
<p>Depending on OEM requirements GENy can detect and configure interface layer routing </p>
<p>paths automatically. The rules for finding and creating routing paths are OEM dependent </p>
<p>(i.e. according to similar CAN IDs in a certain range...).  </p>
<p>Automatic routing paths do not allow modification of the source and destination I-PDU and </p>
<p>cannot be  deleted from  the  configuration.  Please note that deletion  of automatic  routing </p>
<p>paths is not possible even as the “Remove routing path” menu is illustrated. </p>
<p>Automatic routings relation can, however, be disabled by clearing the “Generate” flag. </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Edit </b></p>
<p>If not pre-configured by OEM requirements, the memory size of each interface layer </p>
<p>routing path has to be configured manually. </p>
<p>Re- check all routing path settings after a database update as the update can cause </p>
<p>creation of new routing paths. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>66 / 106 </p>
<p> </p>
<p><b>6.2.2.3 </b></p>
<p><b> Transport Protocol Gateway Routing Paths </b></p>
<p>Depending on OEM requirements GENy can detect TP layer routing paths automatically. </p>
<p>The  rules  for  finding  and  creating  routing  paths  are  OEM  dependent  (i.e.  according  to </p>
<p>similar CAN IDs in a certain range...).  </p>
<p>Automatic routing paths do not allow modification of the source and destination I-PDU and </p>
<p>cannot be  deleted from  the  configuration.  Please note that deletion  of automatic  routing </p>
<p>paths is not possible even as the “Remove routing path” menu is illustrated. </p>
<p>Automatic routings relation can, however, be disabled by clearing the “Generate” flag. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>67 / 106 </p>
<p><b>6.2.3 </b></p>
<p><b>Manual Gateway Routing Path Configuration </b></p>
<p><b>6.2.3.1 </b></p>
<p><b>Creating a routing path </b></p>
<p>To create an IF or TP routing path right click on the “IF Gateway Routing Paths” or “TP </p>
<p>Gateway  Routing  Paths”  item  in  the  GENy  modules  tree  and  select  “Add  new  Gateway </p>
<p>Routing Path”. </p>
<p> </p>
<p>Figure 6-6 </p>
<p>Creation of an interface layer routing path </p>
<p>A blank routing path will be added to the “Interface Layer Routing Relations” or “TP Layer </p>
<p>Routing Relations” list where further settings have to be made. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Info </b></p>
<p>1:N routing paths are configured by N independent 1:1 routing paths using the same </p>
<p>source I-PDU. </p>
<p>Interface Routing: Please note that all properties of N Interface routing relations must </p>
<p>be equal – except the source I-PDU reference. </p>
<p>Function Requests: It is also possible to forward a functional request to the local DCM </p>
<p>and to route the same PDU to one or several destination PDUs using the TP gateway. </p>
<p>Physical Requests: must always be routed in a 1:1 manner and can either be routed to </p>
<p>another TP I-PDU or can be forwarded to DCM.  </p>
<p>N:1 routing paths where several source I-PDUs are mapped to one destination I-PDU </p>
<p>are not supported. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>6.2.3.2 </b></p>
<p><b>Removing a routing path </b></p>
<p>In  order  to  delete  an  IF  or  TP  routing  path,  right  click  on  the  routing  path  and  select </p>
<p>“Remove routing path”. The routing path will be deleted permanently. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>68 / 106 </p>
<p> </p>
<p>Figure 6-7 </p>
<p>Removing a Routing Path </p>
<p><b>6.2.3.3 </b></p>
<p><b>Interface Gateway Routing Paths </b></p>
<p>An IF gateway routing path requires the following configuration settings. Depending on the </p>
<p>type of routing path, not all attributes are configurable. </p>
<p> </p>
<p>Figure 6-8 </p>
<p>IF Gateway Routing Path Parameters </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>The default </p>
<p>value is </p>
<p>written in bold </p>
<p><b>Description </b></p>
<p>Generate </p>
<p>Boolean </p>
<p><b>True </b></p>
<p>False </p>
<p><b>&gt; </b></p>
<p>True: the routing path will be generated </p>
<p><b>&gt; </b></p>
<p>False: The generator will ignore the routing path. </p>
<p>This option can be used to temporarily deactivate </p>
<p>a routing path without deleting it. </p>
<p>Name </p>
<p>Object </p>
<p> </p>
<p>Select the Source I-PDU of the routing path. </p>
<p>The drop down list displays all IF I-PDUs that </p>
<p>are assigned to the PduR or to no module at all. </p>
<p>I-PDUs that are handled by other module such </p>
<p>as XCP or TP cannot be routed by the interface </p>
<p>layer gateway and are not included in the drop </p>
<p>down list. </p>
<p>Port </p>
<p>String </p>
<p> </p>
<p>Visualizes the port of the source I-PDU. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>69 / 106 </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>The default </p>
<p>value is </p>
<p>written in bold </p>
<p><b>Description </b></p>
<p>I-PDU Size [bytes] </p>
<p>Integer </p>
<p> </p>
<p>The size indicates the payload length of the </p>
<p>source I-PDU. The gateway always routes the </p>
<p>greatest common number of bytes from the </p>
<p>source I-PDU to the destination I-PDU. </p>
<p>Name </p>
<p>Object </p>
<p> </p>
<p>Select the Destination I-PDU of the routing </p>
<p>path. The drop down list displays all IF I-PDUs </p>
<p>that are assigned to the PduR or to no module </p>
<p>at all. I-PDUs that are handled by other module </p>
<p>such as NM, XCP or TP cannot be routed by </p>
<p>the interface layer gateway and are not </p>
<p>included in the drop down list. </p>
<p>Port </p>
<p>String </p>
<p> </p>
<p>Visualizes the port of the destination I-PDU. </p>
<p>I-PDU Size [bytes] </p>
<p>Integer </p>
<p> </p>
<p>The size indicates the payload length of the </p>
<p>destination I-PDU. The gateway always routes </p>
<p>the greatest common number of bytes from the </p>
<p>source I-PDU to the destination I-PDU. </p>
<p>Callout Function </p>
<p>String </p>
<p> </p>
<p>Configure a callout function that is invoked </p>
<p>before the IF routing is performed. It is possible </p>
<p>to configure one callout function for several </p>
<p>routing paths. If no callout function has been </p>
<p>configured, the routing will be executed always. </p>
<p>In case of a 1:N routing a callout function can </p>
<p>be configured independently for each of the N </p>
<p>routing paths. During routing, the callout </p>
<p>functions will be called for any of the N routing </p>
<p>paths independently of the returned values. </p>
<p>Tx Buffer Depth </p>
<p>[number of SDUs] </p>
<p>Integer </p>
<p> </p>
<p>This option allows specifying the depth of the </p>
<p>PDU Router queue.  </p>
<p>A depth of 0 or 1 defines a routing without the </p>
<p>usage of a FiFo queue. This queuing strategy </p>
<p>will always transmit the latest data and will </p>
<p>overwrite data that has not been transmitted if a </p>
<p>new instance has been received. </p>
<p>A depth greater than 2 defines a FiFo queued </p>
<p>routing with flush-on-overrun behavior. I.e. in </p>
<p>case of a buffer overrun, the buffer will be </p>
<p>flushed before the latest I-PDU is added to the </p>
<p>queue.  </p>
<p>The maximum queue depth is limited to 255 I-</p>
<p>PDUs for each Tx queue. </p>
<p>Data Provision </p>
<p>Enum </p>
<p> </p>
<p>The type of data provision is chosen </p>
<p>automatically depending on the destination I-</p>
<p>PDU: </p>
<p><b>&gt; </b></p>
<p>Direct: Direct data provision is chosen for all CAN </p>
<p>IF I-PDUs and FlexRay IF PDUs that use the </p>
<p>immediate transmission. Each queued I-PDU is </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>70 / 106 </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>The default </p>
<p>value is </p>
<p>written in bold </p>
<p><b>Description </b></p>
<p>transmitted once until the queue is empty or an </p>
<p>error occurs. If the queue is empty no further </p>
<p>transmission requests are issued. On a CAN bus </p>
<p>this results in the I-PDU no longer being </p>
<p>transmitted. On a FlexRay bus, the I-PDU update </p>
<p>bit remains cleared until new data is queued. </p>
<p><b>&gt; </b></p>
<p>TriggerTransmit: Trigger Transmit data provision </p>
<p>is configured for all LIN, FlexRay and MOST IF I-</p>
<p>PDUs that do no use the immediate transmission. </p>
<p>Each queued I-PDU is transmitted once until the </p>
<p>queue is empty or an error occurs. If the queue is </p>
<p>empty no further transmission requests are </p>
<p>issued. On a LIN bus, this results in the last I-</p>
<p>PDU instance being transmitted in each frame </p>
<p>slot until the schedule table is changed or new </p>
<p>data is received. On a FlexRay bus, the I-PDU </p>
<p>update bit remains cleared until new data is </p>
<p>queued. </p>
<p>Default Value </p>
<p>String </p>
<p> </p>
<p>The default value is only relevant to the routing </p>
<p>paths that use the trigger-transmit data </p>
<p>provision. The value is used by PDU Router if </p>
<p>the interface layer (i.e. LIN IF, FR IF, MOST IF) </p>
<p>requests an SDU before the source I-PDU was </p>
<p>received for the first time.  </p>
<p>If possible the value is retrieved automatically </p>
<p>(e.g. from LIN .ldf files). If the default value is </p>
<p>configured manually, the following format has to </p>
<p>be used: </p>
<p><b>&gt; </b></p>
<p>Each byte is configured separately using </p>
<p>hexadecimal values (e.g. 0x1A) </p>
<p><b>&gt; </b></p>
<p>The bytes are separated by a space symbol </p>
<p><b>&gt; </b></p>
<p>For each SDU byte one default value element is </p>
<p>required </p>
<p>Example: </p>
<p>0x12 0x23 0xAB 0xFF </p>
<p>Table 6-2  </p>
<p>IF Gateway Routing Path Parameters </p>
<p><b>6.2.3.4 </b></p>
<p><b>Transport Protocol Gateway Routing Paths </b></p>
<p>A TP gateway routing path requires the following configuration settings. Depending on the </p>
<p>type of routing path, not all attributes are configurable. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>71 / 106 </p>
<p> </p>
<p>Figure 6-9 </p>
<p>TP Gateway Routing Path Parameters </p>
<p> </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>The default </p>
<p>value is </p>
<p>written in bold </p>
<p><b>Description </b></p>
<p>Generate </p>
<p>Boolean </p>
<p><b>True </b></p>
<p>False </p>
<p><b>&gt; </b></p>
<p>True: the routing path will be generated </p>
<p><b>&gt; </b></p>
<p>False: The generator will ignore the routing path. </p>
<p>This option can be used to temporarily deactivate </p>
<p>a routing path without deleting it. </p>
<p>Name </p>
<p>Object </p>
<p> </p>
<p>Select the Source I-PDU of the routing path. </p>
<p>The drop down list displays all TP layer I-PDUs </p>
<p>that are available for routing. The TP SDUs </p>
<p>have to be configured in the TP. </p>
<p>I-PDUs of addressing type “Physical” (physical </p>
<p>requests) that are received by an Upper Layer </p>
<p>must not be routed. </p>
<p>Port </p>
<p>String </p>
<p> </p>
<p>Visualizes the port of the source I-PDU. </p>
<p>Name </p>
<p>Object </p>
<p> </p>
<p>Select the Destination I-PDU of the routing </p>
<p>path. The drop down list displays all TP layer I-</p>
<p>PDUs that are available for routing. The TP </p>
<p>SDUs have to be configured in the TP. </p>
<p>Destination I-PDUs that are transmitted by an </p>
<p>Upper Layer must not be routed. </p>
<p>Port </p>
<p>String </p>
<p> </p>
<p>Visualizes the port of the destination I-PDU. </p>
<p>TP Chunk Size </p>
<p>Integer </p>
<p> </p>
<p>The TP chunk size determines the number of </p>
<p>bytes that must be received before the </p>
<p>transmission of the destination I-PDU is </p>
<p>triggered. Thus, this parameter can be used to </p>
<p>determine whether an I-PDU shall be routed </p>
<p>“on-the-fly” (chunk size &lt; I-PDU length) or </p>
<p>“store-and-forward” (chunk size &gt;= I-PDU </p>
<p>length). This Parameter has to be configured on </p>
<p>each routing relation. </p>
<p>1:N routing paths require an equal  “TP Chunk </p>
<p>Size” for all N routing paths. </p>
<p>Table 6-3  </p>
<p>TP Gateway Routing Path Parameters </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>72 / 106 </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>Routing relations of functional requests (1:1 and 1:N) require a “TP Chunk Size” of at </p>
<p>least the size of the largest request that will to be routed by this routing path. </p>
<p>If this is not given, routing and forwarding of the Rx I-PDU to DCM will fail. </p>
<p>In case of 1:N routing paths, the “TP Chunk Size” of all N routing paths with the same </p>
<p>source I-PDU must have the same size.  </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>73 / 106 </p>
<p><b>6.2.4 </b></p>
<p><b>TP Buffers </b></p>
<p>The TP gateway requires at least one buffer element to allow the routing of TP I-PDUs. </p>
<p>The size of the largest TP SDU that can be routed by the TP gateway is restricted by the </p>
<p>size of the largest TP buffer element configured. </p>
<p>The number buffer elements that are to be configured depend on the number of TP I-PDUs </p>
<p>that shall be routable at the same time. For each 1:N routing path only one buffer element </p>
<p>has to be encountered. As the buffer elements are not connected with a routing path, the </p>
<p>number of configured buffer elements can be smaller than the number of routing paths.  </p>
<p>The  size  of  each  buffer  element  is  configured  individually  and  therefore  allows  fine </p>
<p>adaptations according to the use case. The sizes of the configured buffer depend, first of </p>
<p>all, on the chunk sizes of the configured routing paths. When the gateway assigns a buffer </p>
<p>element to a routing path it is required that the assigned buffer has at least the size of the </p>
<p>TP chunk size. </p>
<p>Increase the PduR buffer size to adapt a high bus load on the reception side to a lower </p>
<p>bandwidth on the transmit side. </p>
<p>Since there is no connection between a routing path and a buffer element at configuration </p>
<p>time, the gateway can allocate the buffer elements dynamically at runtime. </p>
<p>Thereby the gateway uses the following rules to choose one of the configured TP buffers. </p>
<p>If the size of the incoming I-PDU is smaller than the configured TP chunk size the smallest </p>
<p>available buffer is used that can hold the complete I-PDU. </p>
<p>Otherwise, the chosen buffer has at least the size of the TP chunk.  </p>
<p>Among the potential buffers the gateway tries to find a buffer with at least the size of the I-</p>
<p>PDU that is to be routed. If such a buffer could not be found the next smaller unused buffer </p>
<p>is assigned to the routing path. </p>
<p>If no buffer can be found the buffer request is rejected and no routing of the received TP I-</p>
<p>PDU takes place. </p>
<p>To allow parallel reception and transmission of a TP I-PDU, it is recommended that buffers </p>
<p>are provided with a size of at least twice the size of the TP chunk size. The doubled size </p>
<p>allows  the  gateway  to  first  fill  one  part  of  the  buffer,  than  start  the  transmission  of  the </p>
<p>received data while using the second buffer part for further reception. </p>
<p>Due to the ring-buffer mechanism, it is not required that a buffer element with the size of </p>
<p>the largest expected TP I-PDU is configured. A buffer smaller than the routed I-PDU can, </p>
<p>however, result in wait-frames or a buffer-overflow if the destination connection is slower </p>
<p>that the source connection. A buffer overflow can be avoided if the receiving TP connection </p>
<p>allows dynamic adaptation of the block size (BS) (e.g. CanTp connection with BS greater </p>
<p>0). If a BS of 0 is used by some of the source TP connections, the configured buffer sizes </p>
<p>should be dimensioned in a way that buffer overflows are avoided. </p>
<p>To avoid allocation of a large and thus expensive buffer to a small TP I-PDU (e.g. single </p>
<p>frame I-PDUs), it is advisable to configure at least one small buffer with the size of a single </p>
<p>frame payload (e.g. 7 bytes) due to a buffer is locked until the routing is finished. </p>
<p>To provide fast buffer for the reception Tp, the PduR could route systematically each single </p>
<p>buffer-chunk  that  has  been  received,  if  “PdurBalanceRoutingTime”  is  configured. This  is </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>74 / 106 </p>
<p>done  independently from the  amount  of  buffer chucks  that have been  actually  received. </p>
<p>This optimization is important if the transmit side is slower than the receiver side. </p>
<p><b>6.2.4.1 </b></p>
<p><b>Creating a TP Buffer </b></p>
<p>To create a TP  Buffer, right click on the “TP Buffers” tree in the GENy module tree and </p>
<p>select “Add new TP Buffer”. </p>
<p> </p>
<p>Figure 6-10 </p>
<p>Creating a TP Buffer </p>
<p><b>6.2.4.2 </b></p>
<p><b>Removing a TP Buffer </b></p>
<p>To remove a TP Buffer, right click on the TP Buffer and select “Remove buffer element”. </p>
<p>The buffer element will be deleted permanently. </p>
<p> </p>
<p>Figure 6-11 </p>
<p>Remove a TP Buffer </p>
<p><b>6.2.4.3 </b></p>
<p><b>TP Buffer Properties </b></p>
<p>A blank buffer element will be added to the TP Buffer list. Initially the buffer has a length of </p>
<p>0 bytes which is an invalid value. The generator ignores TP buffer elements with a size of </p>
<p>0. To configure the size of a TP buffer element select the element from the TP buffer tree </p>
<p>and key in the required buffer size in bytes. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>75 / 106 </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>The default </p>
<p>value is </p>
<p>written in bold </p>
<p><b>Description </b></p>
<p>Length [byte] </p>
<p>Integer </p>
<p> </p>
<p>Configure the size in bytes number of the TP </p>
<p>Buffer. </p>
<p>If the feature to fulfill ISO timing requirements is </p>
<p>activated in your delivery </p>
<p>PDUR_&lt;LoTp&gt;PROVIDERXBUFFER_CALLS </p>
<p>is generated in PduR_Cfg.h to STD_ON the </p>
<p>assigned buffer shall have at least the size of </p>
<p>the TP chunk size + First Frame length of the </p>
<p>TPs. </p>
<p>Table 6-4  </p>
<p>TP Buffer Properties </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>76 / 106 </p>
<p><b>6.2.5 </b></p>
<p><b>IF and TP Application Access </b></p>
<p>This PDU Router feature can be used to access lower layer I-PDUs directly from above </p>
<p>the PDU Router. The feature is an optional extension to the AUTOSAR standard. </p>
<p>The  GENy  GUI  allows  assigning  lower  layer  PDUs  to  the  application  by  choosing  the </p>
<p>appropriate  PDU  and  assigning  the  handled  ID.  The  configured  handle  ID  is  used  to </p>
<p>identify  a  PDU  through  the  application  interface.  The  application  can,  for  compatibility </p>
<p>reasons, specify the handle ID for Rx and Tx application I-PDUs. </p>
<p><b>6.2.5.1 </b></p>
<p><b>Creating an Application I-PDU </b></p>
<p>Four different types of application access PDUs can be configured: Rx and Tx interface </p>
<p>layer I-PDUs as well as Rx and Tx TP layer I-PDUs. Each type represented in an own tree </p>
<p>element in the GENy GUI. </p>
<p> </p>
<p>Figure 6-12 </p>
<p>Creating an Application Access I-PDU </p>
<p>An application access PDU is created by right clicking on the appropriate tree element and </p>
<p>choosing “Add [Rx|Tx] [IF|TP] layer PDU”. A blank (invalid) element will be added to the </p>
<p>tree.  </p>
<p><b>6.2.5.2 </b></p>
<p><b>Removing an Application I-PDU </b></p>
<p>Application access PDUs can be removed by right clicking on the appropriate element and </p>
<p>choosing “Remove [Rx|Tx] [IF|TP] layer PDU”. </p>
<p> </p>
<p>Figure 6-13 </p>
<p>Removing an Application Access I-PDU </p>
<p><b>6.2.5.3 </b></p>
<p><b>Application I-PDU Properties </b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>77 / 106 </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>The default </p>
<p>value is </p>
<p>written in bold </p>
<p><b>Description </b></p>
<p>Name </p>
<p>String </p>
<p> </p>
<p>Select the PDU that shall be accessible for the </p>
<p>application. The chosen PDU must not be used </p>
<p>by any other higher layer such as COM or </p>
<p>DCM. </p>
<p>Handle Id </p>
<p>Integer </p>
<p> </p>
<p>The handle Id can be determined by the </p>
<p>application. The handle space for any type of </p>
<p>application access PDUs must be zero based </p>
<p>and continuous. </p>
<p>Table 6-5  </p>
<p>Application Access I-PDU Properties </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>78 / 106 </p>
<p><b>6.3 </b></p>
<p><b>Intra ECU Communication </b></p>
<p>To enable intra ECU communication, the GENy module “PduR Intra ECU Communication” </p>
<p>has  to  be  enabled  in  the  GENy  modules  list  first.  In  general  this  module  is  enabled </p>
<p>automatically when enabling the “PduR” module. Please note that the module “PduR Intra </p>
<p>ECU communication has no channel dependency and is therefore enabled or disabled for </p>
<p>all channels at the same time. </p>
<p> </p>
<p>Figure 6-14 </p>
<p>Enabling intra ECU communication in GENy </p>
<p>This  GENy  module  allows  creating  TP  I-PDU  objects  that  can  be  used  for  intra  ECU </p>
<p>communication.  Semantically  these  objects  are  identical  to  e.g.  CanTp  or  FrTp  I-PDUs. </p>
<p>Once  created  the  intra  ECU  I-PDUs  can  be  referred from upper  layer modules  such as </p>
<p>DCM or ApplTp. </p>
<p>Two different types of intra ECU I-PDUs can be created: </p>
<p><b>&gt; </b> Request I-PDUs: Can be configured as DCM Rx I-PDUs and ApplTp Tx I-PDUs. </p>
<p><b>&gt; </b> Response I-PDUs: Can be configured as ApplTp Rx I-PDUs and DCM Tx I-PDUs. </p>
<p>As the handling of request and response intra ECU communication TP I-PDUs is similar, </p>
<p>only the handling of request I-PDUs is depicted here. </p>
<p><b>6.3.1.1 </b></p>
<p><b>Creating Intra ECU communication TP I-PDUs </b></p>
<p>Before  a  communication  relation  can  be  configured  in  the ApplTp  interface  or  the  DCM </p>
<p>module, it is required to create an internal PDU. </p>
<p>To create an internal PDU open the GENy module “PduR Intra ECU Communication” and </p>
<p>right mouse click on the related PDU collection. Choose “Add new internal TP I-PDU”. </p>
<p>  </p>
<p> </p>
<p>Figure 6-15 </p>
<p>Creating Intra ECU communication TP I-PDUs </p>
<p>A new PDU is created that can thereafter be selected referred from DCM connections or </p>
<p>the ApplTp interface. The name of an internal PDU can be modified by the user if required. </p>
<p>It is up to the user to ensure that the name of a created PDU is unique within the ECU </p>
<p>configuration. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>79 / 106 </p>
<p><b>6.3.1.2 </b></p>
<p><b>Removing Intra ECU communication TP I-PDUs </b></p>
<p>To remove an I-PDU used for internal communication, right click on the PDU to be deleted </p>
<p>and  choose  “Remove  internal  TP  I-PDU”.  The  PDU  will  be  deleted  permanently  and </p>
<p>removed from all entities that referred to it. </p>
<p> </p>
<p>Figure 6-16 </p>
<p>Removing Intra ECU communication TP I-PDUs </p>
<p><b>6.3.1.3 </b></p>
<p><b>Intra ECU communication Properties </b></p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>The default </p>
<p>value is </p>
<p>written in bold </p>
<p><b>Description </b></p>
<p>Maximum TP Connection </p>
<p>Number </p>
<p>Integer </p>
<p>1 </p>
<p>Defines the maximum number of TP I-PDUs that can </p>
<p>be transferred concurrently using intra ECU </p>
<p>communication. The feature is relevant for allowing </p>
<p>two upper layer components (i.e. ApplTp and DCM) </p>
<p>to communicate with each other. </p>
<p>Configuration Time Base </p>
<p>[sec] </p>
<p>Float </p>
<p>0.001 </p>
<p>Configure the cycle time in which </p>
<p>PduR_MainFunction() has to be called. </p>
<p>Rx Buffer Response </p>
<p>Timeout [sec] </p>
<p>Float </p>
<p>0.2 </p>
<p>Configure maximum time of consecutive </p>
<p>ProvideRxBuffer calls with the return value </p>
<p>BUFREQ_E_BUSY. If the timeout timer is expired, </p>
<p>the Intra ECU communication connection will be </p>
<p>terminated. </p>
<p>Tx Buffer Response </p>
<p>Timeout [sec] </p>
<p>Float </p>
<p>0.2 </p>
<p>Configure maximum time of consecutive </p>
<p>ProvideTxBuffer calls with the return value </p>
<p>BUFREQ_E_BUSY. If the timeout timer is expired, </p>
<p>the Intra ECU communication connection will be </p>
<p>terminated. </p>
<p>Table 6-6  </p>
<p>Intra ECU communication Properties </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>80 / 106 </p>
<p><b>6.4 </b></p>
<p><b>Object Explorer </b></p>
<p>The “Object Explorer” tree can be used to filter Gateway Routing Paths based on names </p>
<p>and special filter commands. The filter can be used for IF and TP Gateway Routing Paths.  </p>
<p> </p>
<p> </p>
<p>Figure 6-17 </p>
<p>Object Explorer in GENy </p>
<p> </p>
<p>Figure 6-18 </p>
<p>Object Explorer Properties </p>
<p><b>Attribute Name </b></p>
<p><b>Value Type </b></p>
<p><b>Values </b></p>
<p>The default </p>
<p>value is </p>
<p>written in bold </p>
<p><b>Description </b></p>
<p>Filter Pattern </p>
<p>String </p>
<p> </p>
<p><b>&gt; </b></p>
<p>Name based search:   The object explorer lists all </p>
<p>routing paths that contain the filter pattern string. </p>
<p>Thereby the routing path name and the source </p>
<p>and destination PDU name are evaluated. </p>
<p><b>&gt; </b></p>
<p>Special search commands: The filter provides </p>
<p>some special search commands that can be used </p>
<p>to search for a dedicated class of routing paths: </p>
<p><b>&gt; </b></p>
<p>%auto: shows all automatic routing paths (i.e. </p>
<p>routing paths that have been detected by OEM </p>
<p>specific rules). </p>
<p><b>&gt; </b></p>
<p>%man: shows all manual routing paths (i.e. </p>
<p>routing paths imported from an EcuC file or </p>
<p>created by the user manually). </p>
<p><b>&gt; </b></p>
<p>%disabled: filters all routing paths which cannot </p>
<p>be generated (generate flag is disabled). </p>
<p>Table 6-7  </p>
<p>Object Explorer Properties </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>81 / 106 </p>
<p><b>6.5 </b></p>
<p><b>Configuration in EcuC Data Base </b></p>
<p>The </p>
<p>following </p>
<p>chapters </p>
<p>contain </p>
<p>the </p>
<p>detailed </p>
<p>description </p>
<p>of </p>
<p>the </p>
<p>EcuC </p>
<p>configuration </p>
<p>parameters for the PduR. </p>
<p> </p>
<p><b>6.5.1 </b></p>
<p><b>PduR </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduR </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR </p>
<p><b>Multiplicity </b></p>
<p>0...1 </p>
<p><b>Description </b></p>
<p>Configuration of the PduR (PDU Router) module. </p>
<p>Table 6-8  </p>
<p>Container PduR </p>
<p> </p>
<p><b>6.5.1.1 </b></p>
<p><b>PduRBswModules </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduRBswModules </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRBswModules </p>
<p><b>Multiplicity </b></p>
<p>0...* </p>
<p><b>Description </b></p>
<p>Each container describes a specific BSW module (upper/CDD/lower/IpduM) </p>
<p>that the PDU Router shall interface to. </p>
<p>Table 6-9  </p>
<p>Container PduRBswModules </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>PduRCommunicatio</p>
<p>nInterface </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Specifies if the BSW module supports the </p>
<p>Communication Interface APIs or not. Value </p>
<p>true the APIs are supported. </p>
<p>PduRLowerModule </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>The PduRLowerModule will decide who will call </p>
<p>the APIs and who will implement the APIs. </p>
<p>PduRTransportProto</p>
<p>col </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>The PDU Router module shall use the API </p>
<p>parameters specified for transport protocol </p>
<p>interface. </p>
<p>PduRTriggertransmit </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Specifies if the BSW module supports the </p>
<p>TriggerTransmit API or not. Value true the API is </p>
<p>supported. </p>
<p>PduRUpperModule </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>The PduRUpperModule will decide who will call </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>82 / 106 </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>false </p>
<p>the APIs and who will implement the APIs. </p>
<p>PduRCancelReceiv</p>
<p>e </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Specifies if the Transport protocol module </p>
<p>supports the CancelReceive API or not. Value </p>
<p>true the API is supported. </p>
<p>PduRCancelTransmi</p>
<p>t </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Specifies if the BSW module supports the </p>
<p>CancelTransmit API or not. Value true the API is </p>
<p>supported. </p>
<p>PduRChangeParam</p>
<p>eterRequestApi </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Specifies if the BSW module supports the </p>
<p>CancelTransmit API or not. Value true the API is </p>
<p>supported. </p>
<p>Table 6-10  </p>
<p>Attributes of PduRBswModules </p>
<p> </p>
<p><b>6.5.1.2 </b></p>
<p><b>PduRGeneral </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduRGeneral </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGeneral </p>
<p><b>Multiplicity </b></p>
<p>1...1 </p>
<p><b>Description </b></p>
<p>This container is a subcontainer of PduR and specifies the general </p>
<p>configuration parameters of the PDU Router. </p>
<p>Table 6-11  </p>
<p>Container PduRGeneral </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>PduRCanIfSupport </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Enable / Disable PduR support for the BSW </p>
<p>module CanIf. This parameter must be </p>
<p>preconfigured. </p>
<p>PduRCanTpSupport </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Enable / Disable PduR support for the BSW </p>
<p>module CanTp. This parameter must be </p>
<p>preconfigured. </p>
<p>PduRMostTpSuppor</p>
<p>t </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Enable / Disable PduR support for the module </p>
<p>MostTp. This parameter must be preconfigured. </p>
<p>This feature is an extension to the PduR </p>
<p>module. </p>
<p>PduRMostIfSupport </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Enable / Disable PduR support for the module </p>
<p>MostIf. This parameter must be preconfigured. </p>
<p>This feature is an extension to the PduR </p>
<p>module. </p>
<p>PduRComSupport </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>Enable / Disable PduR support for the BSW </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>83 / 106 </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>false </p>
<p>module Com. This parameter must be </p>
<p>preconfigured. </p>
<p>PduRDcmSupport </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Enable / Disable PduR support for the BMW </p>
<p>module Dcm. This parameter must be </p>
<p>preconfigured. </p>
<p>PduRDevErrorDetec</p>
<p>t </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Enable / Disable BSW module Development </p>
<p>Error Detection and Notification. </p>
<p>PduRFifoTxBufferSu</p>
<p>pport </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Enable / Disable PduR support for FIFOs </p>
<p>transmit buffers; required only for gateway </p>
<p>operations. </p>
<p>PduRFrIfSupport </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Enable / Disable PduR support for the BSW </p>
<p>module FlexrayIf. This parameter must be </p>
<p>preconfigured. </p>
<p>PduRFrTpSupport </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Enable / Disable PduR support for the BSW </p>
<p>module FlexrayTp. This parameter must be </p>
<p>preconfigured. </p>
<p>PduRGatewayOper</p>
<p>ation </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Enable / Disable PduR support for gateway </p>
<p>operations. If, Tp gateways support inclusive. </p>
<p>The .dlls, the Gw_AsrPduRGw.dll (If) and </p>
<p>Gw_AsrPduRGwTp.dll (Tp) must be available. </p>
<p>This switch allows disabling the gateway </p>
<p>feature for configurations that include the </p>
<p>gateway. </p>
<p>PduRIpduMSupport </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Enable / Disable PduR support for the Lower </p>
<p>layer interface of the BSW module IPdu </p>
<p>Multiplexer. This parameter must be </p>
<p>preconfigured. </p>
<p>PduRIpduMUpSupp</p>
<p>ort </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Enable / Disable PduR support for the upper </p>
<p>layer interface of the BSW module IPdu </p>
<p>Multiplexer. This parameter must be </p>
<p>preconfigured. </p>
<p>PduRLinIfSupport </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Enable / Disable PduR support for the BSW </p>
<p>module LinIf. This parameter must be </p>
<p>preconfigured. </p>
<p>PduRLinTpSupport </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Enable / Disable PduR support for the BSW </p>
<p>module LinTp. This parameter must be </p>
<p>preconfigured. </p>
<p>PduRMemorySize </p>
<p>1...1 </p>
<p>Integer </p>
<p><b>0 </b>- n </p>
<p>Reserves buffer. Should post build </p>
<p>configurations require additional buffer, it should </p>
<p>be allocated at linktime. Parameter required for </p>
<p>gateway operation only. </p>
<p>PduRMulticastFromI</p>
<p>fSupport </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Configuration parameter to enable or disable </p>
<p>PDU Router support for multicasts from an </p>
<p>interface module to upper layer modules or </p>
<p>lower layer interface modules; if </p>
<p>PDUR_ZERO_COST_OPERATION is enabled, </p>
<p>this parameter has to be disabled. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>84 / 106 </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>PduRMulticastFrom</p>
<p>TpSupport </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Configuration parameter to enable or disable </p>
<p>PDU Router support for multicasts from a TP </p>
<p>module to upper layer modules or lower layer </p>
<p>TP modules; if </p>
<p>PDUR_ZERO_COST_OPERATION is enabled, </p>
<p>this parameter has to be disabled. </p>
<p>PduRMulticastToIfS</p>
<p>upport </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>This Parameter is not used by the PduR </p>
<p>currently. </p>
<p>Configuration parameter to enable or disable </p>
<p>PDU Router support for multicasts from an </p>
<p>upper layer module to interface modules; if </p>
<p>PDUR_ZERO_COST_OPERATION is enabled, </p>
<p>this parameter has to be disabled. </p>
<p>PduRMulticastToTp</p>
<p>Support </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>This Parameter is not used by the PduR </p>
<p>currently. </p>
<p>Configuration parameter to enable or disable </p>
<p>PDU Router support for multicasts from an </p>
<p>upper layer module to TP modules; if </p>
<p>PDUR_ZERO_COST_OPERATION is enabled, </p>
<p>this parameter has to be disabled. </p>
<p>PduRSbTxBufferSu</p>
<p>pport </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>This Parameter is not used by the PduR </p>
<p>currently. </p>
<p>Configuration parameter to enable or disable </p>
<p>PDU Router support for single buffers as PDU </p>
<p>transmit buffers; if </p>
<p>PDUR_GATEWAY_OPERATION is disabled, </p>
<p>this parameter has to be disabled. </p>
<p>PduRVersionInfoApi </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Activates/Deactivates the Version Info API. </p>
<p>PduRZeroCostOper</p>
<p>ation </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>This Parameter is not used by the PduR </p>
<p>currently. </p>
<p>All routing paths are implicitly defined and the </p>
<p>communication modules directly above or </p>
<p>below the PDU Router shall directly call each </p>
<p>other without using PDU Router functions (zero </p>
<p>cost operation). The configuration parameters </p>
<p>PDUR_SINGLE_IF and PDUR_SINGLE_TP </p>
<p>are used to specify the related lower layer </p>
<p>module. </p>
<p>PduRPBStartAddres</p>
<p>s </p>
<p>0...1 </p>
<p>Integer </p>
<p>not specified </p>
<p>This is the start address of the memory block in </p>
<p>ROM where the post build configuration data is </p>
<p>located. Required for variant post-build only. </p>
<p>PduRProdErrorDete</p>
<p>ct </p>
<p>0...1 </p>
<p>Boolean </p>
<p><b>true </b></p>
<p>false </p>
<p>Enable to report production relevant errors to </p>
<p>the Diagnostics Event Manager (DEM). If </p>
<p>disabled no errors will be reported to DEM. </p>
<p>PduRRouting2CSFS</p>
<p>upport </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>Enable / Disable support for the BSW module </p>
<p>CanTp 4.0 API. Accepts a new routing request </p>
<p>for a single frame while the previous is being </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>85 / 106 </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>routed. </p>
<p>PduRUserConfigura</p>
<p>tionFile </p>
<p>0...1 </p>
<p>String </p>
<p>not specified </p>
<p>Choose a user configuration file whose content </p>
<p>will be appended to the generated PduR_Cfg.h </p>
<p>at the end overwritting configuration settings in </p>
<p>PduR_Cfg.h. </p>
<p>PduRMaxNumberOf</p>
<p>RxCanTpPdus </p>
<p>0...1 </p>
<p>Integer </p>
<p>1 - 65535 </p>
<p>Define the maximum number of CanTp </p>
<p>Routings possible. </p>
<p>PduRMaxNumberOf</p>
<p>RxFrTpPdus </p>
<p>0...1 </p>
<p>Integer </p>
<p>1 - 65535 </p>
<p>Define the maximum number of FrTp Routings </p>
<p>possible. </p>
<p>PduRJ1939Support </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>Enable / Disable PduR support for the module </p>
<p>J1939Tp. This parameter must be </p>
<p>preconfigured. This feature is an extension to </p>
<p>the PduR module. </p>
<p>PduRApplIfSupport </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>Enable / Disable PduR support for direct </p>
<p>application access to If layer PDUs in the PduR. </p>
<p>This parameter must be preconfigured. This </p>
<p>feature is an extension to the PduR module. </p>
<p>PduRApplTpSupport </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>Enable / Disable PduR support for direct </p>
<p>application access to Tp layer PDUs in the </p>
<p>PduR. This parameter must be preconfigured. </p>
<p>This feature is an extension to the PduR </p>
<p>module. </p>
<p>PduRSoAdTpSuppo</p>
<p>rt </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>Enable / Disable PduR support for module </p>
<p>SoAd interface access to Tp layer PDUs. This </p>
<p>feature is an extension to the PduR module. </p>
<p>PduRApplTpReceiv</p>
<p>eCancellation </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>Enable / Disable PduR support for the </p>
<p>Application's cancel Tp receive request feature. </p>
<p>This feature is an extension to the PduR </p>
<p>module. </p>
<p>PduRDcmReceiveC</p>
<p>ancellation </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>Enable / Disable PduR support for the BSW </p>
<p>module Dcm's cancel receive request feature. </p>
<p>This feature is an extension to the PduR 3.0 </p>
<p>module. </p>
<p>PduRFrTpReceiveC</p>
<p>ancellation </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>Enable / Disable PduR support for the BSW </p>
<p>module FrTp's cancel receive request feature. </p>
<p>This feature is an extension to the PduR 3.0 </p>
<p>module. </p>
<p>PduRCanTpReceive</p>
<p>Cancellation </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>Enable / Disable PduR support for the BSW </p>
<p>module CanTp's cancel receive request feature. </p>
<p>This feature is an extension to the PduR 3.0 </p>
<p>module. </p>
<p>PduRLinTpReceive</p>
<p>Cancellation </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>Enable / Disable PduR support for the BSW </p>
<p>module LinTp's cancel receive request feature. </p>
<p>This feature is an extension to the PduR 3.0 </p>
<p>module. </p>
<p>PduRApplTpTransm</p>
<p>itCancellation </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>Enable / Disable PduR support for the </p>
<p>Application's cancel Tp transmit request </p>
<p>feature. This feature is an extension to the </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>86 / 106 </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>PduR module. </p>
<p>PduRDcmTransmitC</p>
<p>ancellation </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>Enable / Disable PduR support for the BSW </p>
<p>module Dcm's cancel transmit request feature. </p>
<p>This feature is an extension to the PduR </p>
<p>module. </p>
<p>PduRFrTpTransmitC</p>
<p>ancellation </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>Enable / Disable PduR support for the BSW </p>
<p>module FrTp's cancel transmit request feature. </p>
<p>This feature is an extension to the PduR </p>
<p>module. </p>
<p>PduRCanTpTransmi</p>
<p>tCancellation </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>Enable / Disable PduR support for the BSW </p>
<p>module CanTp's cancel transmit request </p>
<p>feature. This feature is an extension to the </p>
<p>PduR module. </p>
<p>PduRLinTpTransmit</p>
<p>Cancellation </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>Enable / Disable PduR support for the BSW </p>
<p>module LinTp's cancel transmit request feature. </p>
<p>This feature is an extension to the PduR </p>
<p>module. </p>
<p>PduRCanNmSuppor</p>
<p>t </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Enable / Disable PduR support for module </p>
<p>CanNm interface access to If layer PDUs. This </p>
<p>feature is an extension to the PduR module. </p>
<p>PduRNmOsekSupp</p>
<p>ort </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Enable / Disable PduR support for module </p>
<p>NmOsek interface access to If layer PDUs. This </p>
<p>feature is an extension to the PduR module. </p>
<p>PduRFrNmSupport </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p>false </p>
<p>Enable / Disable PduR support for module </p>
<p>FrNm interface access to If layer PDUs. This </p>
<p>feature is an extension to the PduR module. </p>
<p>PduRMaxRoutingPa</p>
<p>thGroups </p>
<p>0...1 </p>
<p>Integer </p>
<p>0 - 65535 </p>
<p>Defines the maximum number of </p>
<p>PduRRoutingPathGroups in one Identity. </p>
<p>PduRMaxRoutingPa</p>
<p>thsInRPGs </p>
<p>0...1 </p>
<p>Integer </p>
<p>0 - 65535 </p>
<p>Defines the maximum number of </p>
<p>PduRRoutingPaths in PduRRoutingPathGroups </p>
<p>in one Identity. </p>
<p>PduRRoutingPathGr</p>
<p>oupSupport </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>Enable / Disable PduR support for </p>
<p>PduRRoutingPathGroups. </p>
<p>PduRFrTp2Provide</p>
<p>RxBufferCalls </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>Enable / Disable PduR support for CanTp to </p>
<p>support two ProvideRxBuffer calls </p>
<p>PduRCanTp2Provid</p>
<p>eRxBufferCalls </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>Enable / Disable PduR support for CanTp to </p>
<p>support two ProvideRxBuffer calls. </p>
<p>PduRUsePduInfoTy</p>
<p>pe </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>If this feature is activated, PduInfoPtr instead of </p>
<p>SduPtr is used for the APIs </p>
<p>PduR_&lt;Lo&gt;RxIndication, </p>
<p>PduR_&lt;Lo&gt;TriggerTransmit, </p>
<p>&lt;Up&gt;_RxIndication and &lt;Up&gt;_TriggerTransmit. </p>
<p>PduRBalanceRoutin</p>
<p>gTime </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>Multiple Chunks of the TP buffer are blocked by </p>
<p>the Tx TP until the data is transmitted. The Rx </p>
<p>TP has to wait until the buffer is free. The TP </p>
<p>timings have to take this effect into account and </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>87 / 106 </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>the timings have to be very tolerant and the </p>
<p>routing latency is reduced. Due to this, the TP </p>
<p>transmission shall be managed by the PDUR </p>
<p>with chunks to provide fast buffer for the </p>
<p>reception TP. </p>
<p>PduRDynamicDlcSu</p>
<p>pport </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>If this feature is activated, the received data </p>
<p>length (PduInfoPtr-&gt;SduLength) is checked in </p>
<p>the function PduR_&lt;Lo&gt;RxIndication and only </p>
<p>completely received bytes are processed. </p>
<p>Table 6-12  </p>
<p>Attributes of PduRGeneral </p>
<p> </p>
<p><b>6.5.1.3 </b></p>
<p><b>PduRGlobalConfig </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduRGlobalConfig </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGlobalConfig </p>
<p><b>Multiplicity </b></p>
<p>1...1 </p>
<p><b>Description </b></p>
<p>This container contains the global configuration parameter of the PduR.  </p>
<p>It is a MultipleConfigurationContainer, i.e. this container and its sub-</p>
<p>containers exit once per configuration set. </p>
<p>Table 6-13  </p>
<p>Container PduRGlobalConfig </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>PduRConfigurationI</p>
<p>d </p>
<p>0...1 </p>
<p>Integer </p>
<p>not specified </p>
<p>Unique post-build configuration identifier. </p>
<p>Table 6-14  </p>
<p>Attributes of PduRGlobalConfig </p>
<p> </p>
<p><b>Sub Container </b></p>
<p><b>Multiplicity </b></p>
<p>PduRRoutingTable </p>
<p>1...1 </p>
<p>PduRTpBufferTable </p>
<p>0...1 </p>
<p>PduRTxBufferTable </p>
<p>0...1 </p>
<p>PduRApplicationAccess </p>
<p>0...1 </p>
<p>Table 6-15  </p>
<p>Sub Containers of PduRGlobalConfig </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>88 / 106 </p>
<p> </p>
<p><b>6.5.1.4 </b></p>
<p><b>PduRRoutingTable </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduRRoutingTable </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGlobalConfig\PduRRoutingTable </p>
<p><b>Multiplicity </b></p>
<p>1...1 </p>
<p><b>Description </b></p>
<p>PDU Router routing table is a subcontainer ofPduR. This container shall only </p>
<p>be considered by the PDU Router Configuration Generator if </p>
<p>PduRGeneral/PDUR_ZERO_COST_OPERATION is disabled. </p>
<p>Table 6-16  </p>
<p>Container PduRRoutingTable </p>
<p> </p>
<p><b>Sub Container </b></p>
<p><b>Multiplicity </b></p>
<p>PduRRoutingPath </p>
<p>0...* </p>
<p>PduRRoutingPathGroup </p>
<p>0...* </p>
<p>Table 6-17  </p>
<p>Sub Containers of PduRRoutingTable </p>
<p> </p>
<p><b>6.5.1.5 </b></p>
<p><b>PduRRoutingPath </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduRRoutingPath </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGlobalConfig\PduRRoutingTable\PduRRoutingPath </p>
<p><b>Multiplicity </b></p>
<p>0...* </p>
<p><b>Description </b></p>
<p>This container is a subcontainer of PduRRoutingTable and specifies the </p>
<p>routing path of a PDU. </p>
<p>Table 6-18  </p>
<p>Container PduRRoutingPath </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>SduLength </p>
<p>0...1 </p>
<p>Integer </p>
<p>0 - 255 </p>
<p>This Parameter is not used. </p>
<p>Length of PDU data (SDU). Only required if a </p>
<p>Tx buffer is configured. </p>
<p>TpChunkSize </p>
<p>0...1 </p>
<p>Integer </p>
<p>1... </p>
<p><b>7 </b></p>
<p>...65535 </p>
<p>Chunk size for routing on the fly. Defines the </p>
<p>number of bytes which shall be received before </p>
<p>transmission on the destination bus may start. </p>
<p>Only required for TP gateway PDUs. The </p>
<p>TpChunkSize shall not be larger than the length </p>
<p>of the related TP Buffer. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>89 / 106 </p>
<p>Table 6-19  </p>
<p>Attributes of PduRRoutingPath </p>
<p> </p>
<p><b>Sub Container </b></p>
<p><b>Multiplicity </b></p>
<p>PduRDefaultValue </p>
<p>0...1 </p>
<p>PduRDestPdu </p>
<p>1...* </p>
<p>PduRSrcPdu </p>
<p>1...1 </p>
<p>Table 6-20  </p>
<p>Sub Containers of PduRRoutingPath </p>
<p> </p>
<p><b>6.5.1.6 </b></p>
<p><b>PduRDefaultValue </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduRDefaultValue </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGlobalConfig\PduRRoutingTable\PduRRoutingPath</p>
<p>\PduRDefaultValue </p>
<p><b>Multiplicity </b></p>
<p>0...1 </p>
<p><b>Description </b></p>
<p>This container is a subcontainer of PduRRoutingPath and specifies the </p>
<p>default value of the I-PDU. Only required for gateway operation and if at </p>
<p>least one PDU specified by PduRDestPdu uses TriggerTransmit Data </p>
<p>provision. </p>
<p>Represented as an array of IntegerParamDef. </p>
<p>Table 6-21  </p>
<p>Container PduRDefaultValue </p>
<p> </p>
<p><b>Sub Container </b></p>
<p><b>Multiplicity </b></p>
<p>PduRDefaultValueElement </p>
<p>0...* </p>
<p>Table 6-22  </p>
<p>Sub Containers of PduRDefaultValue </p>
<p> </p>
<p><b>6.5.1.7 </b></p>
<p><b>PduRDefaultValueElement </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduRDefaultValueElement </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGlobalConfig\PduRRoutingTable\PduRRoutingPath</p>
<p>\PduRDefaultValue\PduRDefaultValueElement </p>
<p><b>Multiplicity </b></p>
<p>0...* </p>
<p><b>Description </b></p>
<p>Each value element is represented by the element and the position in an </p>
<p>array. </p>
<p>Table 6-23  </p>
<p>Container PduRDefaultValueElement </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>90 / 106 </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>DefaultValueElemen</p>
<p>t </p>
<p>1...1 </p>
<p>Integer </p>
<p>0 - 255 </p>
<p>The default value consists of a number of </p>
<p>elements. Each element is one byte long and </p>
<p>the number of elements is specified by </p>
<p>SduLength. The position of this parameter in </p>
<p>the container is specified by the </p>
<p>ElementBytePosition parameter. </p>
<p>ElementBytePositio</p>
<p>n </p>
<p>1...1 </p>
<p>Integer </p>
<p>not specified </p>
<p>This parameter specifies the byte position of the </p>
<p>element within the default value. </p>
<p>Table 6-24  </p>
<p>Attributes of PduRDefaultValueElement </p>
<p> </p>
<p><b>6.5.1.8 </b></p>
<p><b>PduRDestPdu </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduRDestPdu </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGlobalConfig\PduRRoutingTable\PduRRoutingPath</p>
<p>\PduRDestPdu </p>
<p><b>Multiplicity </b></p>
<p>1...* </p>
<p><b>Description </b></p>
<p>This container is a subcontainer of PduRRoutingPath and specifies one </p>
<p>destination for the PDU to be routed. </p>
<p>Table 6-25  </p>
<p>Container PduRDestPdu </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>DataProvision </p>
<p>0...1 </p>
<p>Enumerati</p>
<p>on </p>
<p>DIRECT </p>
<p>TRIGGER_</p>
<p>TRANSMIT </p>
<p>Specifies how data are provided: direct (as part </p>
<p>of the Transmit call) or via the TriggerTransmit </p>
<p>callback function. Only required for non-TP </p>
<p>gateway PDUs. </p>
<p>RoutingCallout </p>
<p>0...1 </p>
<p>Function </p>
<p>not specified </p>
<p>Configure a callout function implemented by the </p>
<p>application and triggered on the routing event. </p>
<p>The return value from the function determines if </p>
<p>the routing   </p>
<p>was executed (E_OK) or canceled </p>
<p>(E_NOT_OK). The prototype of the function is </p>
<p>provided in PduR_Notifications.h. </p>
<p>DisableRouting </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>This parameter allows to suspend a routing </p>
<p>without deleting it. If the parameter is not </p>
<p>present or set to false, the routing will be </p>
<p>generated and active. This parameter is </p>
<p>evaluated for TP- and interface layer routing </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>91 / 106 </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>relations. </p>
<p>PduRCddDobtSwitc</p>
<p>h </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>True, if the Tx CanTp Port can be used by </p>
<p>CddDobt. </p>
<p>DestPduRef </p>
<p>1...1 </p>
<p>Reference </p>
<p>not specified </p>
<p>Destination PDU reference; reference to unique </p>
<p>PDU identifier which shall be used by the PDU </p>
<p>Router instead of the source PDU ID when </p>
<p>calling the related function of the destination </p>
<p>module. </p>
<p>TxBufferRef </p>
<p>0...1 </p>
<p>Reference </p>
<p>not specified </p>
<p>Specifies the assigned transmit buffer. Only </p>
<p>required for specific non-TP gateway PDUs. </p>
<p>Table 6-26  </p>
<p>Attributes of PduRDestPdu </p>
<p> </p>
<p><b>6.5.1.9 </b></p>
<p><b>PduRSrcPdu </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduRSrcPdu </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGlobalConfig\PduRRoutingTable\PduRRoutingPath</p>
<p>\PduRSrcPdu </p>
<p><b>Multiplicity </b></p>
<p>1...1 </p>
<p><b>Description </b></p>
<p>This container is a subcontainer of PduRRoutingPath and specifies the </p>
<p>source of the PDU to be routed. </p>
<p>Table 6-27  </p>
<p>Container PduRSrcPdu </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>HandleId </p>
<p>1...1 </p>
<p>Integer </p>
<p>0 - 65535 </p>
<p>PDU identifier assigned by PDU Router. </p>
<p>PduRCddDobtSwitc</p>
<p>h </p>
<p>0...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>True, if the Rx CanTp Port can be used by </p>
<p>CddDobt. </p>
<p>SrcPduRef </p>
<p>1...1 </p>
<p>Reference </p>
<p>not specified </p>
<p>Source PDU reference; reference to unique </p>
<p>PDU identifier which shall be used for the </p>
<p>requested PDU Router operation. </p>
<p>Table 6-28  </p>
<p>Attributes of PduRSrcPdu </p>
<p> </p>
<p><b>6.5.1.10 </b></p>
<p><b>PduRRoutingPathGroup </b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>92 / 106 </p>
<p><b>Container Name </b></p>
<p>PduRRoutingPathGroup </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGlobalConfig\PduRRoutingTable\PduRRoutingPath</p>
<p>Group </p>
<p><b>Multiplicity </b></p>
<p>0...* </p>
<p><b>Description </b></p>
<p>This container groups routing path destinations. Destinations areused </p>
<p>instead of routing paths since a routing path can be 1:n. It isdesirable to be </p>
<p>able to enable/disable a specific bus (i.e. adestination) rather than a routing </p>
<p>path. Of course it is possible tocreate groups that covers specific routing </p>
<p>paths as well. Enabling anddisabling of routing path groups are made using </p>
<p>the PduR API </p>
<p>Table 6-29  </p>
<p>Container PduRRoutingPathGroup </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>PduRRoutingPathGr</p>
<p>oupId </p>
<p>1...1 </p>
<p>Integer </p>
<p>0 - 65535 </p>
<p>Identification of the routing group. The </p>
<p>identification will be used by the </p>
<p>PduR_EnableRouting() / </p>
<p>PduR_DisableRouting() API in the PDU Router </p>
<p>module API. GENy: The numerical value used </p>
<p>as the ID of this Pdu Group. The </p>
<p>PduRRoutingPathGroupId is required by the </p>
<p>PduR </p>
<p>PduRIsEnabledAtIni</p>
<p>t </p>
<p>1...1 </p>
<p>Boolean </p>
<p>true </p>
<p><b>false </b></p>
<p>If set to true this routing path group will be </p>
<p>enabled after initialization of the PDU Router </p>
<p>module. </p>
<p>PduRRoutingPathR</p>
<p>ef </p>
<p>1...* </p>
<p>Reference </p>
<p>not specified </p>
<p>This container is a subcontainer of </p>
<p>PduRRoutingPath and specifies the default </p>
<p>value of the I-PDU. Only required for gateway </p>
<p>operation and if at least one PDU specified by </p>
<p>PduRDestPdu uses TriggerTransmit Data </p>
<p>provision. </p>
<p>Represented as an array of IntegerParamDef. </p>
<p>Table 6-30  </p>
<p>Attributes of PduRRoutingPathGroup </p>
<p> </p>
<p><b>6.5.1.11 </b></p>
<p><b>PduRTpBufferTable </b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>93 / 106 </p>
<p><b>Container Name </b></p>
<p>PduRTpBufferTable </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGlobalConfig\PduRTpBufferTable </p>
<p><b>Multiplicity </b></p>
<p>0...1 </p>
<p><b>Description </b></p>
<p>This container is a subcontainer of PduR and contains the definition of all TP </p>
<p>buffers (only required for PDU Router gateway operation). This container </p>
<p>shall only be considered by the PDU Router Configuration Generator if </p>
<p>PduRGeneral/PDUR_GATEWAY_OPERATION is enabled. </p>
<p>Table 6-31  </p>
<p>Container PduRTpBufferTable </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>PduRMaxTpBufferN</p>
<p>umber </p>
<p>1...1 </p>
<p>Integer </p>
<p>0 - 65535 </p>
<p>Maximum number of TP buffers. </p>
<p>Table 6-32  </p>
<p>Attributes of PduRTpBufferTable </p>
<p> </p>
<p><b>Sub Container </b></p>
<p><b>Multiplicity </b></p>
<p>PduRTpBuffer </p>
<p>0...* </p>
<p>Table 6-33  </p>
<p>Sub Containers of PduRTpBufferTable </p>
<p> </p>
<p><b>6.5.1.12 </b></p>
<p><b>PduRTpBuffer </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduRTpBuffer </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGlobalConfig\PduRTpBufferTable\PduRTpBuffer </p>
<p><b>Multiplicity </b></p>
<p>0...* </p>
<p><b>Description </b></p>
<p>This container is a subcontainer of PduRTpBufferTable and specifies a TP </p>
<p>buffer. </p>
<p>Table 6-34  </p>
<p>Container PduRTpBuffer </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>Length </p>
<p>1...1 </p>
<p>Integer </p>
<p>1 - 65535 </p>
<p>Length of the TP buffer. </p>
<p>Table 6-35  </p>
<p>Attributes of PduRTpBuffer </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>94 / 106 </p>
<p> </p>
<p><b>6.5.1.13 </b></p>
<p><b>PduRTxBufferTable </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduRTxBufferTable </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGlobalConfig\PduRTxBufferTable </p>
<p><b>Multiplicity </b></p>
<p>0...1 </p>
<p><b>Description </b></p>
<p>This container is a subcontainer of PduR and contains the definition of all </p>
<p>transmit buffers (used by specific non-TP PDUs; only required for PDU </p>
<p>Router gateway operation). This container shall only be considered by the </p>
<p>PDU Router Configuration Generator if </p>
<p>PduRGeneral/PDUR_GATEWAY_OPERATION is enabled. </p>
<p>Table 6-36  </p>
<p>Container PduRTxBufferTable </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>PduRMaxTxBufferN</p>
<p>umber </p>
<p>1...1 </p>
<p>Integer </p>
<p>0 - 65535 </p>
<p>Maximum number of transmit buffers. </p>
<p>Table 6-37  </p>
<p>Attributes of PduRTxBufferTable </p>
<p> </p>
<p><b>Sub Container </b></p>
<p><b>Multiplicity </b></p>
<p>PduRTxBuffer </p>
<p>0...* </p>
<p>Table 6-38  </p>
<p>Sub Containers of PduRTxBufferTable </p>
<p> </p>
<p><b>6.5.1.14 </b></p>
<p><b>PduRTxBuffer </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduRTxBuffer </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGlobalConfig\PduRTxBufferTable\PduRTxBuffer </p>
<p><b>Multiplicity </b></p>
<p>0...* </p>
<p><b>Description </b></p>
<p>This container is a subcontainer of PduRTxBufferTable and specifies a </p>
<p>transmit buffer for a non-TP PDU. </p>
<p>Table 6-39  </p>
<p>Container PduRTxBuffer </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>95 / 106 </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>Depth </p>
<p>1...1 </p>
<p>Integer </p>
<p>0 - 255 </p>
<p>Specifies the depth of the buffer </p>
<p>Length </p>
<p>1...1 </p>
<p>Integer </p>
<p>1 - 255 </p>
<p>This Parameter is not used. </p>
<p>Length of the buffer. </p>
<p>Table 6-40  </p>
<p>Attributes of PduRTxBuffer </p>
<p> </p>
<p><b>6.5.1.15 </b></p>
<p><b>PduRApplicationAccess </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduRApplicationAccess </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGlobalConfig\PduRApplicationAccess </p>
<p><b>Multiplicity </b></p>
<p>0...1 </p>
<p><b>Description </b></p>
<p>Provides Rx and Tx PDUs that can be accessed by the application directly </p>
<p>from the PDU Router.  </p>
<p>For any Rx and Tx PDU the reference to the global PDU and the PDU ID has </p>
<p>to be specified. </p>
<p>This feature is an optional Vector Informatik extension to the AUTOSAR </p>
<p>standard. Please note that this feature can only be used if it has been </p>
<p>licensed in the configuration tool. </p>
<p>Table 6-41  </p>
<p>Container PduRApplicationAccess </p>
<p> </p>
<p><b>Sub Container </b></p>
<p><b>Multiplicity </b></p>
<p>PduRApplicationPdu </p>
<p>0...* </p>
<p>Table 6-42  </p>
<p>Sub Containers of PduRApplicationAccess </p>
<p> </p>
<p><b>6.5.1.16 </b></p>
<p><b>PduRApplicationPdu </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduRApplicationPdu </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGlobalConfig\PduRApplicationAccess\PduRApplica</p>
<p>tionPdu </p>
<p><b>Multiplicity </b></p>
<p>0...* </p>
<p><b>Description </b></p>
<p> </p>
<p>Table 6-43  </p>
<p>Container PduRApplicationPdu </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>96 / 106 </p>
<p><b>Sub Container </b></p>
<p><b>Multiplicity </b></p>
<p>PduRApplicationPduType </p>
<p>1...1 </p>
<p>Table 6-44  </p>
<p>Sub Containers of PduRApplicationPdu </p>
<p> </p>
<p><b>6.5.1.17 </b></p>
<p><b>PduRApplicationPduType </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduRApplicationPduType </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGlobalConfig\PduRApplicationAccess\PduRApplica</p>
<p>tionPdu\PduRApplicationPduType </p>
<p><b>Multiplicity </b></p>
<p>1...1 </p>
<p><b>Description </b></p>
<p> </p>
<p>Table 6-45  </p>
<p>Container PduRApplicationPduType </p>
<p> </p>
<p><b>Sub Container </b></p>
<p><b>Multiplicity </b></p>
<p>PduRRxIfApplicationPdu </p>
<p>0...1 </p>
<p>PduRTxIfApplicationPdu </p>
<p>0...1 </p>
<p>PduRRxTpApplicationPdu </p>
<p>0...1 </p>
<p>PduRTxTpApplicationPdu </p>
<p>0...1 </p>
<p>Table 6-46  </p>
<p>Sub Containers of PduRApplicationPduType </p>
<p> </p>
<p><b>6.5.1.18 </b></p>
<p><b>PduRRxIfApplicationPdu </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduRRxIfApplicationPdu </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGlobalConfig\PduRApplicationAccess\PduRApplica</p>
<p>tionPdu\PduRApplicationPduType\PduRRxIfApplicationPdu </p>
<p><b>Multiplicity </b></p>
<p>0...1 </p>
<p><b>Description </b></p>
<p> </p>
<p>Table 6-47  </p>
<p>Container PduRRxIfApplicationPdu </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>PduRHandleId </p>
<p>1...1 </p>
<p>Integer </p>
<p><b>0 </b>- 65535 </p>
<p>Handle ID that is used by the application to </p>
<p>access this PDU. The handle space must be </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>97 / 106 </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>contineous and zero based. </p>
<p>PduRPduRef </p>
<p>1...1 </p>
<p>Reference </p>
<p>not specified </p>
<p>Reference to the global PDU. Establishes a link </p>
<p>to the PduRRoutingPaths source interface layer </p>
<p>I-PDU. </p>
<p>Table 6-48  </p>
<p>Attributes of PduRRxIfApplicationPdu </p>
<p> </p>
<p><b>6.5.1.19 </b></p>
<p><b>PduRTxIfApplicationPdu </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduRTxIfApplicationPdu </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGlobalConfig\PduRApplicationAccess\PduRApplica</p>
<p>tionPdu\PduRApplicationPduType\PduRTxIfApplicationPdu </p>
<p><b>Multiplicity </b></p>
<p>0...1 </p>
<p><b>Description </b></p>
<p>The handle ID of this routing path is configured by the related </p>
<p>PduRRoutingPath that can be found by means of the </p>
<p>Table 6-49  </p>
<p>Container PduRTxIfApplicationPdu </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>PduRHandleId </p>
<p>1...1 </p>
<p>Integer </p>
<p><b>0 </b>- 65535 </p>
<p>Handle ID that is used by the application to </p>
<p>access this PDU. The handle space must be </p>
<p>contineous and zero based. </p>
<p>PduRPduRef </p>
<p>1...1 </p>
<p>Reference </p>
<p>not specified </p>
<p>Reference to the global PDU. Establishes a link </p>
<p>to the PduRRoutingPaths destination interface </p>
<p>layer PDU. </p>
<p>Table 6-50  </p>
<p>Attributes of PduRTxIfApplicationPdu </p>
<p> </p>
<p><b>6.5.1.20 </b></p>
<p><b>PduRRxTpApplicationPdu </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduRRxTpApplicationPdu </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGlobalConfig\PduRApplicationAccess\PduRApplica</p>
<p>tionPdu\PduRApplicationPduType\PduRRxTpApplicationPdu </p>
<p><b>Multiplicity </b></p>
<p>0...1 </p>
<p><b>Description </b></p>
<p> </p>
<p>Table 6-51  </p>
<p>Container PduRRxTpApplicationPdu </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>98 / 106 </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>PduRHandleId </p>
<p>1...1 </p>
<p>Integer </p>
<p><b>0 </b>- 65535 </p>
<p>Handle ID that is used by the application to </p>
<p>access this PDU. The handle space must be </p>
<p>contineous and zero based. </p>
<p>PduRPduRef </p>
<p>1...1 </p>
<p>Reference </p>
<p>not specified </p>
<p>Reference to the global PDU. Establishes a link </p>
<p>to the PduRRoutingPaths source TP layer PDU. </p>
<p>Please note that TP PDUs which have been </p>
<p>referenced here must not be involved in any </p>
<p>other routing path. </p>
<p>Table 6-52  </p>
<p>Attributes of PduRRxTpApplicationPdu </p>
<p> </p>
<p><b>6.5.1.21 </b></p>
<p><b>PduRTxTpApplicationPdu </b></p>
<p> </p>
<p><b>Container Name </b></p>
<p>PduRTxTpApplicationPdu </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\PduRGlobalConfig\PduRApplicationAccess\PduRApplica</p>
<p>tionPdu\PduRApplicationPduType\PduRTxTpApplicationPdu </p>
<p><b>Multiplicity </b></p>
<p>0...1 </p>
<p><b>Description </b></p>
<p> </p>
<p>Table 6-53  </p>
<p>Container PduRTxTpApplicationPdu </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>PduRHandleId </p>
<p>1...1 </p>
<p>Integer </p>
<p><b>0 </b>- 65535 </p>
<p>Handle ID that is used by the application to </p>
<p>access this PDU. The handle space must be </p>
<p>contineous and zero based. </p>
<p>PduRPduRef </p>
<p>1...1 </p>
<p>Reference </p>
<p>not specified </p>
<p>Reference to the global PDU. Establishes a link </p>
<p>to the PduRRoutingPaths destination TP layer </p>
<p>PDU. Please note that TP PDUs which have </p>
<p>been referenced here must not be involved in </p>
<p>any other routing path. </p>
<p>Table 6-54  </p>
<p>Attributes of PduRTxTpApplicationPdu </p>
<p> </p>
<p><b>6.5.1.22 </b></p>
<p><b>VectorCommonData </b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>99 / 106 </p>
<p><b>Container Name </b></p>
<p>VectorCommonData </p>
<p><b>Path </b></p>
<p>\MICROSAR\PduR\VectorCommonData </p>
<p><b>Multiplicity </b></p>
<p>1...1 </p>
<p><b>Description </b></p>
<p> </p>
<p>Table 6-55  </p>
<p>Container VectorCommonData </p>
<p> </p>
<p><b>Attribute Name </b></p>
<p><b>Multi-</b></p>
<p><b>plicity </b></p>
<p><b>Value </b></p>
<p><b>Type </b></p>
<p><b>Values </b></p>
<p>Default value is </p>
<p>typed bold</p>
<p><b> </b></p>
<p><b>Description </b></p>
<p>BswmdVersion </p>
<p>1...1 </p>
<p>String </p>
<p><b>3.16.00 </b></p>
<p>Version of the BSWMD file that has been used </p>
<p>to set up the ECU configuration </p>
<p>Table 6-56  </p>
<p>Attributes of VectorCommonData </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>100 / 106 </p>
<p><b>7 </b></p>
<p><b>AUTOSAR Standard Compliance </b></p>
<p><b>7.1 </b></p>
<p><b>Deviations </b></p>
<p><b>&gt; </b> The PDU Router ignores the return value of LIN IF transmission requests. This violates </p>
<p>the PDU Router specification, however; there is no other way to overcome this problem </p>
<p>without violating a SWS requirement.  </p>
<p>The problem’s origin is that LinIf_Transmit() always indicates an error in case of </p>
<p>triggering the transmission of an unconditional LIN frame (LINIF341).  </p>
<p>On the other hand, the PDU Router is designed in a way to not differentiate between the </p>
<p>destination bus type when triggering the transmission of an I-PDU (PDUR255, </p>
<p>PDUR256). </p>
<p><b>&gt; </b> Gateway Tp Routing: </p>
<p>If currently no buffer available, the PDU Router rejects a buffer request if the transport </p>
<p>protocol (CAN, LIN or FR) requests a buffer. An automatic retry mechanism is not </p>
<p>supported. </p>
<p> </p>
<p>This means the functions PduR_&lt;Lo&gt;TpProvideRxBuffer return </p>
<p>“BUFREQ_E_NOT_OK” instate of “BUFREQ_E_BUSY” in case of no buffer available </p>
<p>currently.  </p>
<p></p>
<p> Partial deviation of PDUR350 (Can), PDUR372 (Fr), PDUR394 (LIN).  </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>Counter measure: The Application has to configure a sufficient number of buffer </p>
<p>elements (e.g. number of possible parallel routings) to avoid that all buffers are busy. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>7.2 </b></p>
<p><b>Limitations </b></p>
<p><b>&gt; </b> N:1 routing: routing of several source I-PDU to one or several destination I-PDUs is not </p>
<p>supported for TP layer routing paths. </p>
<p><b>&gt; </b> M:N routing: mapping of several source PDUs to several destination PDUs is not </p>
<p>supported. </p>
<p><b>&gt; </b> Routing between interface layer I-PDUs with different sizes on Rx and Tx side. If the </p>
<p>destination I-PDU has a greater bit count than the source I-PDU it is not specified by </p>
<p>AUTOSAR ([1]) how this should be handled. Therefore PDU Router currently does not </p>
<p>support such routing paths.  In case of the source I-PDU being larger than the </p>
<p>destination I-PDU, solely the byte count of the destination I-PDU is routed. </p>
<p><b>&gt; </b> TP or interface layer routing (gateway use case) using a destination I-PDU that is also </p>
<p>transmitted by an upper layer module (such as COM or DCM) is not supported. </p>
<p><b>&gt; </b> The TP layer gateway does not support the FrTp retry feature. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>101 / 106 </p>
<p><b>&gt; </b> If the gateway feature is used, the PduR configuration data must be linked to the default </p>
<p>ROM section (must not declared as “far”). </p>
<p><b>&gt; </b> The data section used by PduR must be linked to the default RAM section (must not </p>
<p>declared as “far”).  </p>
<p><b>&gt; </b> Each interface layer routing relation can be assigned to a dedicated Tx Buffer. Sharing a </p>
<p>Tx Buffer among several routing relations is not possible. </p>
<p><b>&gt; </b> When using the AUTOSAR 4.0 (draft) TP layer API, PduR supports CanTp and </p>
<p>J1939TP TP interfaces only. Other TP layer modules are currently not supported by </p>
<p>such deliveries. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>102 / 106 </p>
<p><b>8 </b></p>
<p><b>Glossary and Abbreviations </b></p>
<p><b>8.1 </b></p>
<p><b>Glossary </b></p>
<p><b>Term </b></p>
<p><b>Description </b></p>
<p>Application interface </p>
<p>API. An application interface is the prescribed method of a software </p>
<p>component for using the available functionality. It should be distinguished </p>
<p>between an application control interface and an application data interface. </p>
<p>Buffer </p>
<p>A buffer in a memory area normally in the RAM. It is an area, that the </p>
<p>application has reserved for data storage. </p>
<p>Callback function </p>
<p>This is a function provided by an application. E.g. the CAN Driver calls a </p>
<p>callback function to allow the application to control some action, to make </p>
<p>decisions at runtime and to influence the work of the driver. </p>
<p>CANbedded </p>
<p>… is the trademark of the Vector communication stack. </p>
<p>Channel </p>
<p>A channel defines the assignment (1:1) between a physical </p>
<p>communication interface and a physical layer on which different modules </p>
<p>are connected to (either CAN or LIN). 1 channel consists of 1..X </p>
<p>network(s). </p>
<p>Communication stack </p>
<p>The communication stack consists of the communication configuration </p>
<p>and the communication kernel, a number of adaptive software </p>
<p>components that cover the basic communication requirements in </p>
<p>distributed automotive applications. </p>
<p>Component </p>
<p>CAN Driver, Network Management ... are software COMPONENTS in </p>
<p>contrast to the expression module, which describes an ECU. </p>
<p>Confirmation </p>
<p>A service primitive defined in the ISO/OSI Reference Model (ISO 7498). </p>
<p>With the service primitive 'confirmation' a service provider informs a </p>
<p>service user about the result of a preceding service request of the service </p>
<p>user. Notification by the CAN Driver on asynchronous successful </p>
<p>transmission of a CAN message. </p>
<p>EAD </p>
<p>Embedded Architecture Designer; generation tool for MICROSAR </p>
<p>components </p>
<p>Electronic Control </p>
<p>Unit </p>
<p>Also known as ECU. Small embedded computer system consisting of at </p>
<p>least one CPU and corresponding periphery which is placed in one </p>
<p>housing. </p>
<p>Event </p>
<p>An exclusive signal which is assigned to a certain extended task. An </p>
<p>event can be used to send a binary information to an extended task. The </p>
<p>meaning of events is defined by the application. Any task can set an </p>
<p>event for an extended task. The event can only be cleared by the task </p>
<p>which is assigned to the event. </p>
<p>Gateway </p>
<p>A gateway is designed to enable communication between different bus </p>
<p>systems, e.g. from CAN to LIN. </p>
<p>GENy </p>
<p>Generation tool for CANbedded and MICROSAR components </p>
<p>Indication </p>
<p>A service primitive defined in the ISO/OSI Reference Model (ISO 7498). </p>
<p>With the service primitive 'indication' a service provider informs a service </p>
<p>user about the occurrence of either an internal event or a service request </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>103 / 106 </p>
<p>issued by another service user. Notification of application in case of </p>
<p>events in the Vector software components, e.g. an asynchronous </p>
<p>reception of a CAN message. </p>
<p>Interrupt </p>
<p>Processor-specific event which can interrupt the execution of a current </p>
<p>program section. </p>
<p>Interrupt service </p>
<p>routine </p>
<p>The function used for direct processing of an interrupt. </p>
<p>Lower Layer </p>
<p>Components located in the Layer Model below the PDUR. See Figure 2-2</p>
<p> </p>
<p>Interfaces to adjacent modules of the PDUR. These components are </p>
<p>CAN, LIN, FR, MOST Interface or Transport Protocol and IPDUM. </p>
<p>Network </p>
<p>A network defines the assignment (1:N) between a logical communication </p>
<p>grouping and a physical layer on which different modules are connected </p>
<p>to (either CAN or LIN). One network consists of one channel, Y networks </p>
<p>consists of 1..Z channel(s). We say network if we talk about more than </p>
<p>one bus. </p>
<p>Network </p>
<p>Management </p>
<p>The Network Managements manages the availability of different networks </p>
<p>on a channel. It is responsible for the synchronized transition between the </p>
<p>communication states 'sleep', 'prepare sleep' and 'active' for all modules. </p>
<p>Network Management serves to ensure the safety and availability of the </p>
<p>communications network of autonomous control units. The OSEK NM </p>
<p>distinguishes between node-related (local) activities, e.g. initialization of </p>
<p>the node and network-related (global) activities, e.g. coordination of </p>
<p>global NM operating modes. </p>
<p>Overrun </p>
<p>Overwriting data in a memory with limited capacity, e.g. queued message </p>
<p>object. </p>
<p>Post-build </p>
<p>This type of configuration is possible after building the software module or </p>
<p>the ECU software. The software may either receive parameters of its </p>
<p>configuration during the download of the complete ECU software resulting </p>
<p>from the linkage of the code, or it may receive its configuration file that </p>
<p>can be downloaded to the ECU separately, avoiding a re-compilation and </p>
<p>re-build of the ECU software modules. In order to make the post-build </p>
<p>time re-configuration possible, the re-configurable parameters shall be </p>
<p>stored at a known memory location of ECU storage area. </p>
<p>Schedule table </p>
<p>Table containing the sequence of LIN message identifiers to be </p>
<p>transmitted together with the message delay. </p>
<p>Scheduler </p>
<p>The algorithm which decides whether a task switch is to be affected and </p>
<p>which triggers all necessary internal activities of the operating system is </p>
<p>named scheduler. The scheduler decides whether a task switch is </p>
<p>possible according to the implemented scheduling policy. The scheduler </p>
<p>can be considered as a resource which can be occupied and released by </p>
<p>tasks. Thus a task can reserve the scheduler to avoid task switch until the </p>
<p>scheduler is released. </p>
<p>Signal </p>
<p>A signal is responsible for the logical transmission and reception of </p>
<p>information depending on the restrictions of the physical layer. The </p>
<p>definition of the signal contents is part of the database given by the </p>
<p>vehicle manufacturer. Signals describe the significance of the individual </p>
<p>data segments within a message.  Typically bits, bytes or words are used </p>
<p>for data segments but individual bit combinations are also possible. In the </p>
<p>CAN data base, each data segment is assigned a symbolic name, a </p>
<p>value range, a conversion formula and a physical unit, as well as a list of </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>104 / 106 </p>
<p>receiving nodes. </p>
<p>Transport Protocol </p>
<p>Some information that must be transferred over the CAN/LIN bus does </p>
<p>not fit into individual message frames because the data length exceeds </p>
<p>the maximum of 8 bytes. In this case, the sender must divide up the data </p>
<p>into a number of messages. Additional information is necessary for the </p>
<p>receiver to put the data together again. </p>
<p>Upper Layer </p>
<p>Components located in the Layer Model on the top of the PDUR. See </p>
<p>Figure 2-2 </p>
<p>Interfaces to adjacent modules of the PDUR. These </p>
<p>components are Com, Dcm, ApplIf, ApplTp, IPDUM. </p>
<p>Use case </p>
<p>A model of the usage by the user of a system in order to realize a single </p>
<p>functional feature of the system. </p>
<p>Table 8-1  </p>
<p>Glossary </p>
<p><b>8.2 </b></p>
<p><b>Abbreviations </b></p>
<p><b>Abbreviation </b></p>
<p><b>Description </b></p>
<p>API </p>
<p>Application Programming Interface </p>
<p> </p>
<p>AUTOSAR </p>
<p>Automotive Open System Architecture </p>
<p>BS </p>
<p>undefined </p>
<p>BSW </p>
<p>Basis Software </p>
<p>BSWMD </p>
<p>Basic Software Module Description </p>
<p>CAN </p>
<p>Controller Area Network protocol originally defined for use as a </p>
<p>communication network for control applications in vehicles. </p>
<p>CF </p>
<p>TP Consecutive Frame </p>
<p>COM </p>
<p>Communication </p>
<p>CRC </p>
<p>Cyclic Redundancy Check </p>
<p>DCM </p>
<p>Diagnostic Communication Manager </p>
<p>DEM </p>
<p>Diagnostic Event Manager </p>
<p>DET </p>
<p>Development Error Tracer </p>
<p>EAD </p>
<p>Embedded Architecture Designer </p>
<p>ECU </p>
<p>Electronic Control Unit </p>
<p>FC </p>
<p>TP Flow Control Frame </p>
<p>FF </p>
<p>TP First Frame </p>
<p>FIFO </p>
<p>First In First Out </p>
<p>FR </p>
<p>FlexRay Driver </p>
<p>GUI </p>
<p>Graphical User Interface </p>
<p>HIS </p>
<p>Hersteller Initiative Software </p>
<p>ID </p>
<p>Identifier (e.g. Identifier of a CAN message) </p>
<p>IF </p>
<p>Interface </p>
<p>I-PDU </p>
<p>Interaction PDU (Presentation Layer) </p>
<p>ISO </p>
<p>International Standardization Organization </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>105 / 106 </p>
<p>ISR </p>
<p>Interrupt Service Routine </p>
<p>J1939 </p>
<p>Is the vehicle bus  standard used for communication and diagnostics </p>
<p>among vehicle components, originally by the car and heavy duty truck </p>
<p>industry in the United States. </p>
<p>J1939TP </p>
<p>J1939 Transport Layer </p>
<p>LIN </p>
<p>Local Interconnect Network </p>
<p>MICROSAR </p>
<p>Microcontroller Open System Architecture (the Vector AUTOSAR </p>
<p>solution) </p>
<p>MOST </p>
<p>Media Oriented Systems Transport </p>
<p>NM </p>
<p>Generic Network Management Interface </p>
<p>OEM </p>
<p>Original Equipment Manufacturer </p>
<p>OSEK </p>
<p>Name of the overall project: Abbreviation of the German term &quot;Offene </p>
<p>Systeme und deren Schnittstellen für die Elektronik im Kraftfahrzeug&quot; - </p>
<p>Open Systems and the Corresponding Interfaces for Automotive </p>
<p>Electronics. </p>
<p>PDU </p>
<p>Protocol Data Unit </p>
<p>PDUR </p>
<p>PDU Router </p>
<p>RAM </p>
<p>Random Access Memory </p>
<p>ROM </p>
<p>Read-Only Memory </p>
<p>RTE </p>
<p>Runtime Environment </p>
<p>SDU </p>
<p>Service Data Unit </p>
<p>SF </p>
<p>TP Single Frame </p>
<p>SRS </p>
<p>Software Requirement Specification </p>
<p>SWC </p>
<p>Software Component </p>
<p>SWS </p>
<p>Software Specification </p>
<p>TMS320 </p>
<p>Texas Instruments DSP </p>
<p>TP </p>
<p>Transport Protocol </p>
<p>XCP </p>
<p>undefined </p>
<p>Table 8-2  </p>
<p>Abbreviations </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR PDU Router </p>
<p>2012, Vector Informatik GmbH </p>
<p>Version: 3.10.02 </p>
<p>based on template version 4.6 </p>
<p>106 / 106 </p>
<p><b>9 </b></p>
<p><b>Contact </b></p>
<p>Visit our website for more information on </p>
<p> </p>
<p>&gt;   News </p>
<p>&gt;   Products </p>
<p>&gt;   Demo software </p>
<p>&gt;   Support </p>
<p>&gt;   Training data </p>
<p>&gt;   Addresses </p>
<p> </p>
<p>www.vector.com </p>
<p> </p>
<p> </p>
<p> </p>
</body>
</html>
{% endraw %}